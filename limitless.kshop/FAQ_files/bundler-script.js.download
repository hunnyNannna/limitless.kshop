if(typeof window.bundlerLoaded==='undefined'||document.getElementById("bndlr-loaded")===null){(function(){try{window.bundlerLoaded=true;var elem=document.createElement('div');elem.id='bndlr-loaded';elem.style.cssText='display:none;';if(document.body!==null){document.body.appendChild(elem);}}catch(e){console.error(e);}
var loadScript=function(url,callback){var script=document.createElement("script")
script.type="text/javascript";script.async=true;if(script.readyState){script.onreadystatechange=function(){if(script.readyState=="loaded"||script.readyState=="complete"){script.onreadystatechange=null;callback();}};}else{script.onload=function(){callback();};}
script.src=url;var x=document.getElementsByTagName('script')[0];x.parentNode.insertBefore(script,x);};var idleCallback=function(callback){if(typeof window.requestIdleCallback==='function'){window.requestIdleCallback(callback);}else{callback();}}
var debouncers=[];var debounce=function(key,callback,delay){if(typeof debouncers[key]!=='undefined'){clearTimeout(debouncers[key]);}
debouncers[key]=setTimeout(callback,delay);}
var _internalFunctionCollection={};var bundler=function($){var bundlerConsole={_canUseConsole:function(){return true;},log:function(){if(this._canUseConsole()){window.console.log.apply(null,arguments);}},warn:function(){if(this._canUseConsole()){window.console.warn.apply(null,arguments);}},info:function(){if(this._canUseConsole()){window.console.info.apply(null,arguments);}},error:function(){if(this._canUseConsole()){window.console.error.apply(null,arguments);}}};var local={maxAge:60*1000*5,key:'bndlr_data_',cache:{},save:function(key,data){try{var ld={};try{var localData=localStorage.getItem(this.getKey());localData=JSON.parse(localData);}catch(e){console.log('no data yet');}
if(typeof localData==='object'&&localData!==null){ld=localData;}
ld[key]={data:data,time:(new Date().getTime())}
ld=JSON.stringify(ld);localStorage.setItem(this.getKey(),ld);this.cache[key]=ld[key];}catch(e){console.log('Error when saving data',e);}},get:function(key,age){if(typeof age==='undefined'){age=this.maxAge;}
try{if(typeof this.cache[key]!=='undefined'){var ld=this.cache[key];}else{var ld=localStorage.getItem(this.getKey());ld=JSON.parse(ld);}
if(typeof ld[key]==='undefined'||ld[key].time==='undefined'){return false;}
if(ld[key].time<(new Date().getTime()-this.maxAge)){return false;}
return JSON.parse(JSON.stringify(ld[key].data));}catch(e){return false;}
return false;},getKey:function(){var localKey=this.key;var currency='';if(typeof Shopify!=='undefined'&&Shopify.hasOwnProperty('currency')&&Shopify.currency.hasOwnProperty('active')){currency=Shopify.currency.active;}
localKey+=currency;var country='';if(typeof Shopify!=='undefined'&&Shopify.hasOwnProperty('country')&&typeof Shopify.country==='string'){country=Shopify.country;}
localKey+=country;return localKey;}};var customer={cache:{},promises:{},getCustomerTags:function(init){if(typeof init==='undefined'){init=false;}
var customerTags=null;if(typeof BndlrScriptAppended!=='undefined'&&BndlrScriptAppended===true){if(typeof BndlrCustomerTags!=='undefined'&&BndlrCustomerTags.length>0){customerTags=BndlrCustomerTags;}else{customerTags=[];}}
if(customerTags===null){tagsFromStorage=local.get('customer_tags',60*1000*30);if(tagsFromStorage!==false){customerTags=tagsFromStorage;}}
local.save('customer_tags',customerTags);if(customerTags===null&&init===true){var tagsFromEndpoint=customer.getCustomerTagsFromEndpoint().done(function(data){if(typeof data.tags!=='undefined'&&data.tags!==null){customerTags=data.tags;}else{customerTags=[];}
local.save('customer_tags',customerTags);});}
return customerTags;},getCustomerTagsFromEndpoint:function(){var endpoint='a/bundles/customer.json';var url=nav.getRootUrl()+endpoint;if(typeof customer.cache[url]!=='undefined'&&typeof customer.cache[url]!=='undefined'){var deferred=$.Deferred().resolve(JSON.parse(JSON.stringify(cart.cache[url])));return deferred.promise();}
if(typeof customer.promises[url]!=='undefined'&&typeof customer.promises[url].readyState!=='undefined'&&customer.promises[url].readyState<4){return customer.promises[url];}else{var promise=$.ajax({url:url,dataType:'json'}).done(function(cartData){customer.cache[url]=JSON.parse(JSON.stringify(cartData));});customer.promises[url]=promise;return promise;}},};var cart={cartCache:{},promises:{},get:function(whichEndpoint,checkCache){if(typeof checkCache==='undefined'){checkCache=true;}
if(typeof whichEndpoint==='undefined'){whichEndpoint='default';}
var endpoint='cart.js';if(whichEndpoint=='proxy'){var endpoint='a/bundles/cart/cart.json';}
var url=nav.getRootUrl()+endpoint+'?bundler-cart-call';if(checkCache){var timestamp=Date.now();timestamp=Math.round(timestamp/1500);if(typeof cart.cartCache[url]!=='undefined'&&typeof cart.cartCache[url][timestamp]!=='undefined'){var deferred=$.Deferred().resolve(JSON.parse(JSON.stringify(cart.cartCache[url][timestamp])));return deferred.promise();}}
if(checkCache&&typeof cart.promises[url]!=='undefined'&&typeof cart.promises[url].readyState!=='undefined'&&cart.promises[url].readyState<4){return cart.promises[url];}else{var promise=$.ajax({url:url,dataType:'json'}).done(function(cartData){var timestamp=Date.now();timestamp=Math.round(timestamp/1500);if(typeof cart.cartCache[url]==='undefined'){cart.cartCache[url]={};}
cart.cartCache[url][timestamp]=JSON.parse(JSON.stringify(cartData));}).done(function(cartData){cart.modifyCartData(cartData);});cart.promises[url]=promise;return promise;}},modifyCartData:function(cartData){if(typeof clientSpecifics['modify_cart_data']!=='undefined'){clientSpecifics['modify_cart_data'].trigger(cartData);}},removeUnusedProductProperties:function(product){var unusedProperties=['description','published_at','created_at','compare_at_price','compare_at_price_max','compare_at_price_min','compare_at_price_varies','price','price_max','price_min','price_varies','tags','type','url','vendor','selling_plan_groups'];var unusedVariantProperties=['barcode','requires_shipping','sku','taxable','weight','selling_plan_allocations'];for(var i=0;i<unusedProperties.length;i++){if(typeof product[unusedProperties[i]]!=='undefined'){delete product[unusedProperties[i]];}}
for(var i=0;i<product.variants.length;i++){for(var j=0;j<unusedVariantProperties.length;j++){if(typeof product.variants[i][unusedVariantProperties[j]]!=='undefined'){delete product.variants[i][unusedVariantProperties[j]];}}}
return product;},modifyProductStructure:function(product){if(typeof clientSpecifics['modify_product_structure']!=='undefined'){product=clientSpecifics['modify_product_structure'].trigger(product);}
return product;},getProductData:function(rootUrl,productHandle){var localProduct=local.get(productHandle);if(localProduct===false){var productUrl=rootUrl+'products/'+productHandle+'.js';var ajax=$.ajax({url:productUrl,dataType:'json'}).done(function(data){data=cart.removeUnusedProductProperties(data);data=cart.modifyProductStructure(data);local.save(productHandle,data);});return ajax;}else{var deferred=$.Deferred().resolve(localProduct);return deferred.promise();}},getProductDataJSON:function(rootUrl,productHandle){var productUrl=rootUrl+'products/'+productHandle;return $.ajax({url:productUrl,contentType:'application/json',dataType:'json'});},getProductDataViaProxy:function(rootUrl,productId){var productUrl=rootUrl+'a/bundles/products/product.js?id='+productId+'&cur='+bndlr.getDefaultCurrency();return $.ajax({url:productUrl,contentType:'application/json',dataType:'json'});},addToCart:function(rootUrl,id,quantity,properties){var url=rootUrl+'cart/add.js?bundler-cart-call';return $.ajax({url:url,data:{id:id,quantity:quantity,properties:properties},type:'POST',dataType:'json'});},addMultipleItemsToCart:function(rootUrl,items){var url=rootUrl+'cart/add.js?bundler-cart-call';var totalQuantityCount={};for(var i=0;i<items.length;i++){var key=JSON.stringify(items[i]);if(typeof totalQuantityCount[key]==='undefined'){totalQuantityCount[key]=JSON.parse(JSON.stringify(items[i]));totalQuantityCount[key]['quantity']=totalQuantityCount[key]['quantity']*1;}else{totalQuantityCount[key]['quantity']+=items[i]['quantity']*1;}}
var items=[];for(var key in totalQuantityCount){if(totalQuantityCount.hasOwnProperty(key)){items.push(totalQuantityCount[key]);}}
return $.ajax({url:url,data:{items:items},type:'POST',dataType:'json'});},updateCart:function(){this.get().done(function(data){try{var itemCount=data.item_count;$('[data-cart-item-count]').html(itemCount);$('.header__cart-count').html(itemCount);$('.site-header__cart-count span[data-cart-count]').html(itemCount);if($('#CartCount [data-cart-count]').length>0){$('#CartCount [data-cart-count]').html(itemCount);}else if($('#CartCount').length>0){$('#CartCount').html($('#CartCount').html().replace(/(\d+)/,data.item_count));}
if($('#CartCount.hide').length>0){$('#CartCount.hide').removeClass('hide');}
if($('#site-cart-handle .count-holder .count').length>0){$('#site-cart-handle .count-holder .count').html($('#site-cart-handle .count-holder .count').html().replace(/(\d+)/,data.item_count));}
if($('#minicart .count.cart-target').length>0){$('#minicart .count.cart-target').html($('#minicart .count.cart-target').html().replace(/(\d+)/,data.item_count));}
if($('#sidebar #meta .count').length>0){$('#sidebar #meta .count').html($('#sidebar #meta .count').html().replace(/(\d+)/,data.item_count));}
if($('.site-header__cart .site-header__cart-indicator').length>0){$('.site-header__cart .site-header__cart-indicator').html($('.site-header__cart .site-header__cart-indicator').html().replace(/(\d+)/,data.item_count));if(data.item_count>0){$('.site-header__cart .site-header__cart-indicator').removeClass('hide');}}
if($('.cart-count').length>0){$('.cart-count').html($('.cart-count').html().replace(/(\d+)/,data.item_count));}
if($('.cartCount[data-cart-count]').length>0){$('.cartCount[data-cart-count]').html($('.cartCount[data-cart-count]').html().replace(/(\d+)/,data.item_count));}
if($('[data-js-cart-count-desktop]').length>0){$('[data-js-cart-count-desktop]').html(data.item_count);$('[data-js-cart-count-desktop]').attr('data-js-cart-count-desktop',data.item_count);}
if($('.cart-item-count-header').length>0){var $itemCountHeader=$('.cart-item-count-header').first();if($itemCountHeader.hasClass('cart-item-count-header--total')===true){if($itemCountHeader.find('.money').length){$itemCountHeader=$itemCountHeader.find('.money').first();$itemCountHeader.html(bndlr.formatPrice(data.items_subtotal_price));}}else{$itemCountHeader.html($itemCountHeader.html().replace(/(\d+)/,data.item_count));}}
if($('#CartCost').length>0&&typeof theme!=='undefined'&&typeof theme.moneyFormat!=='undefined'){var totalCartValue=utils.formatMoney(data.items_subtotal_price,theme.moneyFormat);$('#CartCost').html(totalCartValue);}
if(typeof refreshCart=='function'){refreshCart(data);}
if(typeof slate!=='undefined'&&typeof slate.cart!=='undefined'&&typeof slate.cart.updateCart=='function'){slate.cart.updateCart();}
if(typeof ajaxCart!=='undefined'&&typeof ajaxCart.load==='function'){ajaxCart.load();}
if($('.mega-nav-count.nav-main-cart-amount.count-items').length>0){$('.mega-nav-count.nav-main-cart-amount.count-items').html($('.mega-nav-count.nav-main-cart-amount.count-items').html().replace(/(\d+)/,data.item_count));$('.mega-nav-count.nav-main-cart-amount.count-items.hidden').removeClass('hidden');}
if(typeof Shopify!=='undefined'&&typeof Shopify.updateQuickCart!=='undefined'){Shopify.updateQuickCart(data);}
if(typeof bcActionList!=='undefined'&&typeof bcActionList.atcBuildMiniCartSlideTemplate==='function'){bcActionList.atcBuildMiniCartSlideTemplate(data);if(typeof openMiniCart==='function'){openMiniCart();}}
if($('.custom-cart-eye-txt').length>0){$('.custom-cart-eye-txt').html($('.custom-cart-eye-txt').html().replace(/(\d+)/,data.item_count));}
if(typeof Shopify!=='undefined'&&typeof Shopify.updateCartInfo!=='undefined'&&$('.top-cart-holder .cart-target form .cart-info .cart-content').length>0){Shopify.updateCartInfo(data,'.top-cart-holder .cart-target form .cart-info .cart-content');}
var event=new CustomEvent("wetheme-toggle-right-drawer",{detail:{type:'cart',forceOpen:undefined,params:{cart:data},},});document.documentElement.dispatchEvent(event);if(typeof window.vndHlp!=='undefined'&&typeof window.vndHlp.refreshCart==='function'){window.vndHlp.refreshCart(data);}
if(typeof window.cartStore!=='undefined'&&typeof window.cartStore.setState==='function'){window.cartStore.setState({justAdded:{},popupActive:true,item_count:data.item_count,items:data.items,cart:data});}
if(typeof window.Shopify!=='undefined'&&typeof window.Shopify.onCartUpdate==='function'){window.Shopify.onCartUpdate(data,true);}
if(typeof theme!=='undefined'&&typeof theme.Cart!=='undefined'&&typeof theme.Cart.setCurrentData==='function'){theme.Cart.setCurrentData(data);}
if(typeof clientSpecifics['update_cart']!=='undefined'){clientSpecifics['update_cart'].trigger(data);}}catch(e){bundlerConsole.log(e);}});if(typeof window.SLIDECART_UPDATE!=='undefined'){try{window.SLIDECART_UPDATE();}catch(e){bundlerConsole.log(e);}}
if(typeof window.SLIDECART_OPEN!=='undefined'){setTimeout(function(){try{window.SLIDECART_OPEN();}catch(e){bundlerConsole.log(e);}},500);}
if(typeof Shopify!=='undefined'&&typeof Shopify.theme!=='undefined'&&typeof Shopify.theme.jsAjaxCart!=='undefined'&&typeof Shopify.theme.jsAjaxCart.updateView==='function'){Shopify.theme.jsAjaxCart.updateView();}
if(typeof CartJS!=='undefined'&&typeof CartJS.getCart==='function'){try{CartJS.getCart();}catch(e){bundlerConsole.log(e);}}
if($('.sp-cart .sp-dropdown-toggle').length&&typeof Shopify!=='undefined'&&typeof Shopify.getCart==='function'){Shopify.getCart();}
if($('form.cart-drawer').length>0){$('.cart-drawer input').first().trigger('blur');setTimeout(function(){$('.cart-drawer input').first().trigger('input');},350);}
try{document.dispatchEvent(new CustomEvent('cart:refresh'));}catch(e){}
try{document.documentElement.dispatchEvent(new CustomEvent('cart:refresh',{bubbles:true}));}catch(e){}
if(typeof window.HsCartDrawer!=='undefined'&&typeof window.HsCartDrawer.updateSlideCart==='function'){debounce('hscartdrawer',function(){try{HsCartDrawer.updateSlideCart();}catch(e){bundlerConsole.log(e);}},100);}
if(typeof theme!=='undefined'&&typeof theme.Cart!=='undefined'&&typeof theme.Cart.updateCart==='function'){theme.Cart.updateCart();}}};var nav={getRootUrl:function(withLocale){if(typeof withLocale==='undefined'){withLocale=false;}
var locale='';if(withLocale){locale=this.getUrlLocale();}
if(this.isShopPage()===false){return 'https://subk-merch.myshopify.com/';}else{var url=window.location.origin?window.location.origin+'/':window.location.protocol+'//'+window.location.host+'/';if(locale.length>0){url+=locale+'/';}
return url;}},isShopPage:function(){if(typeof Shopify!=='undefined'&&Shopify.shop==='subk-merch.myshopify.com'){return true;}
return false;},getInvoiceEndpoint:function(withExtraInfo,additionalGetParams){if(typeof withExtraInfo==='undefined'){withExtraInfo=false;}
if(typeof additionalGetParams==='undefined'){additionalGetParams='';}
var ssad=false;if(typeof window.SealSubs!=='undefined'&&typeof window.SealSubs.discounts_apply_on_initial_order==='boolean'){ssad=SealSubs.discounts_apply_on_initial_order;}
var extraParam='';if(withExtraInfo){extraParam='&extra=true';}
return this.getAppUrl()+'cdo.php?v31&shop=subk-merch.myshopify.com&ssad='+ssad.toString()+extraParam+additionalGetParams;},getAppUrl:function(){return 'https://bundler.nice-team.net/app/api/';},isCartPage:function(){if(/\/cart\/?/.test(window.location.href)){return true;}
return false;},isProductPage:function(){if(/\/products\/([^\?\/\n]+)/.test(window.location.href)){return true;}
return false;},getProductHandle:function(){var href=window.location.href;href=href.replace('/products/products/','/products/');if(/\/products\/([^\?#\/\n]+)/i.test(href)){var found=href.match(/\/products\/([^\?#\/\n]+)/i);if(typeof found[1]!=='undefined'){return found[1];}}
return false;},getVariantId:function(){var qp=this.getQueryParams(window.location.search);if(typeof qp['variant']!=='undefined'){return qp['variant'];}
return '';},getQueryParams:function(qs){qs=qs.split('+').join(' ');var params={},tokens,re=/[?&]?([^=]+)=([^&]*)/g;while(tokens=re.exec(qs)){params[decodeURIComponent(tokens[1])]=decodeURIComponent(tokens[2]);}
return params;},getQuickCheckoutUrl:function(name,id){return 'https://subk-merch.myshopify.com/a/bundles/checkout/'+utils.encodeName(name)+'-'+utils.encodeId(id);},getLandingPageUrl:function(name,id){var url='a/bundles/'+utils.encodeName(name)+'-'+utils.encodeId(id);var rootUrl=this.getRootUrl(true);return rootUrl+url;},getLocale:function(){if(typeof Shopify!=='undefined'&&typeof Shopify.locale==='string'){return Shopify.locale}
return '';},getUrlLocale:function(){var baseUrl=this.getRootUrl();var locale=this.getLocale();if(locale!==''){if(window.location.href.indexOf(baseUrl+locale+'/')===0){return locale;}}
return '';}};var utils={getRandomString:function(){var result='';var characters='abcdefghijklmnopqrstuvwxyz0123456789';var charactersLength=characters.length;var a=[];for(var i=0;i<15;i++){a.push(characters.charAt(Math.floor(Math.random()*charactersLength)));}
return a.join('');},encodeId:function(num){var chrs='0123456789abcdefghijklmnopqrstuvwxyz';var result='';var l=chrs.length;while(num){result=chrs.charAt(num%l)+result;num=parseInt(num/l);}
return result;},deCompress:function(code){var chrs='0123456789abcdefghijklmnopqrstuvwxyz';var result=0;var cl=code.length;for(var i=0;i<cl;i++){result=(result*chrs.length+chrs.indexOf(code.charAt(i)));}
return result;},encodeName:function(name){name=name.toLowerCase();name=name.replace(/\s/g,'-');name=name.replace(/[/$\\?%#]/g,'');return name;},formatMoney:function(cents,format,fallbackCurrency,directionFor50){if(typeof directionFor50==='undefined'){var directionFor50='up';}
try{if(typeof cents=='string'){cents=cents.replace('.','');}
var value='';var placeholderRegex=/\{\{\s*(\w+)\s*\}\}/;var formatString=format;function defaultOption(opt,def){return(typeof opt=='undefined'?def:opt);}
function formatWithDelimiters(number,precision,thousands,decimal,directionFor50){precision=defaultOption(precision,2);thousands=defaultOption(thousands,',');decimal=defaultOption(decimal,'.');directionFor50=defaultOption(directionFor50,'up');if(isNaN(number)||number==null){return 0;}
var originalNumber=number;number=(number/100.0).toFixed(precision);if(directionFor50==='down'){if(((originalNumber/100)-number)===-0.5){number-=1;number=number.toString();}}
var parts=number.split('.'),dollars=parts[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,'$1'+thousands),cents=parts[1]?(decimal+parts[1]):'';return dollars+cents;}
switch(formatString.match(placeholderRegex)[1]){case 'amount':value=formatWithDelimiters(cents,2);break;case 'amount_no_decimals':value=formatWithDelimiters(cents,0,',','.',directionFor50);break;case 'amount_with_comma_separator':value=formatWithDelimiters(cents,2,'.',',');break;case 'amount_no_decimals_with_comma_separator':value=formatWithDelimiters(cents,0,'.',',',directionFor50);break;case 'amount_no_decimals_with_space_separator':value=formatWithDelimiters(cents,0,' ',',',directionFor50);break;case 'amount_with_apostrophe_separator':value=formatWithDelimiters(cents,2,"'",'.');break;}
return formatString.replace(placeholderRegex,value);}catch(e){bundlerConsole.log(e.message);price=cents/100;return price.toLocaleString(undefined,{style:'currency',currency:fallbackCurrency});}},convertMoney:function(value,rate,currency){if(value<=0){return 0;}
value*=rate;var roundUp=['USD','CAD','AUD','NZD','SGD','HKD','GBP'];var roundTo100=['JPY'];var roundTo95=['EUR'];if(roundUp.indexOf(currency)!==-1){value=Math.ceil(value);}else if(roundTo100.indexOf(currency)!==-1){value=Math.ceil(value/100)*100}else if(roundTo95.indexOf(currency)!==-1){value=Math.ceil(value)-0.05;}
return value;},getListOfValues:function(object,key){var list='';for(var k in object){if(object.hasOwnProperty(k)){if(typeof object[k][key]!=='undefined'){list+=object[k][key]+',';}}}
list=list.replace(/,+$/,'');return list;},getCurrencySymbol:function(currency){var symbol='';try{symbol=(0).toLocaleString(undefined,{style:'currency',currency:currency,minimumFractionDigits:0,maximumFractionDigits:0}).replace(/\d/g,'').trim();}catch(e){}
if(symbol!==''){return symbol;}
return currency;}};function ProductsLib(){this._library={};};ProductsLib.prototype.get=function(key){if(typeof key==='undefined'){return this._library;}else if(typeof this._library[key]!=='undefined'){return this._library[key];}else{return{};}};ProductsLib.prototype.isEmpty=function(key){if(typeof key==='undefined'){return true;}else if(typeof this._library[key]!=='undefined'){return(Object.keys(this._library[key]).length==0);}else{return true;}};ProductsLib.prototype.set=function(key,products){this._library[key]=JSON.parse(JSON.stringify(products));};var Library={Products:new ProductsLib(),RequiredProducts:new ProductsLib(),DiscountedProducts:new ProductsLib(),MixAndMatchBundles:new ProductsLib()};function ProductsTools(){};ProductsTools.prototype.setLibraries=function(Library,bundleId){var discountedProducts=Library.DiscountedProducts.get();if(discountedProducts.hasOwnProperty(bundleId)){var products={};for(var productId in discountedProducts[bundleId]){if(discountedProducts[bundleId].hasOwnProperty(productId)){products[productId]=Library.Products.get(productId);}}
Library.DiscountedProducts.set(bundleId,products);}
var requiredProducts=Library.RequiredProducts.get();if(requiredProducts.hasOwnProperty(bundleId)){var products={};for(var productId in requiredProducts[bundleId]){if(requiredProducts[bundleId].hasOwnProperty(productId)){products[productId]=Library.Products.get(productId);}}
Library.RequiredProducts.set(bundleId,products);}};ProductsTools.prototype.setRequiredVariantLinePrices=function(Library,bundle){var requiredProducts=Library.RequiredProducts.get(bundle.id);for(var key in requiredProducts){if(requiredProducts.hasOwnProperty(key)){var productId=requiredProducts[key].product_id;if(typeof bundle.required_products[productId]!=='undefined'){var quantity=bundle.required_products[productId].quantity;for(var i=0;i<requiredProducts[key].variants.length;i++){var price=Tools.Price.getPrice(requiredProducts[key].variants[i].price)*quantity;var compareAtLinePrice=Tools.Price.priceOrZero(requiredProducts[key].variants[i].compare_at_price)*quantity;requiredProducts[key].variants[i].linePrice=price;requiredProducts[key].variants[i].compareAtLinePrice=compareAtLinePrice;requiredProducts[key].variants[i].discountedPriceQuantity=quantity;}}}}
Library.RequiredProducts.set(bundle.id,requiredProducts);}
function PriceTools(){};PriceTools.prototype.getPrice=function(price){if(typeof price.indexOf==='function'&&price.indexOf('.')!==-1){price=price*100;}
return price;};PriceTools.prototype.priceOrZero=function(price){if(typeof price==='undefined'||price===''||price===null){return 0;}
return this.getPrice(price);};var Tools={Products:new ProductsTools(),Price:new PriceTools()};var ProductRetrievalRequests={};var ProductRetrievalStatus={};var BndlrAnalytics={init:function(){},track:function(what,productId,variantId,quantity){if(what==='addtocart'){if(typeof fbq==='function'){try{var eventId='id_'+Date.now();fbq('track','AddToCart',{content_ids:[productId],content_type:'product',contents:[{id:productId,quantity:parseInt(quantity,10)}]},{eventID:eventId});}catch(e){console.log(e);}}}}};BndlrAnalytics.init();var dbBundles=[{"id":100460,"name":"Fatal Love Discount","title":"LIMITED TIME OFFER!","description":"Buy these products together and get a discount!","button_text":"ADD TO CART","discount_warning":"Discount will not be reflected in your cart, but will be applied at checkout.","discount_type":"products_discounts","percentage_value":"10","fixed_amount_value":"","fixed_price_value":"","priority":1,"status":"enabled","product_level":"product","total_price_text":"Total: {original_price} {discounted_price}","minimum_requirements":"specific_products","minimum_requirements_num":1,"minimum_requirements_n_max_products":null,"show_bundle":"true","bundle_image":"","list_product_names":"true","mix_and_match_display":"false","free_shipping":"false","is_volume_bundle":"false","product_target_type":"specific_products","volume_bundle_combine_quantites":"false","limit_for_customer_tags":[],"use_date_condition":"false","date_from":null,"date_to":null,"products":{"4777172729905":{"id":"4777172729905","title":"MONSTA X 3RD ALBUM - FATAL LOVE","quantity":1,"discount_amount":"2.53","image":"","sequence":1,"required":0,"variants":{"32468849721393":{"id":"32468849721393","title":"","quantity":1,"discount_amount":"2.53","sequence":1,"required":0},"32468849786929":{"id":"32468849786929","title":"","quantity":1,"discount_amount":"2.53","sequence":2,"required":0},"32468849852465":{"id":"32468849852465","title":"","quantity":1,"discount_amount":"2.53","sequence":3,"required":0},"32468850343985":{"id":"32468850343985","title":"","quantity":1,"discount_amount":"2.53","sequence":4,"required":0}},"handle":"monsta-x-3rd-album-fatal-love"}},"required_products":{"6583577149489":{"id":"6583577149489","title":"MONSTA X 9TH MINI ALBUM - ONE OF A KIND + EXCLUSIVE PHOTOCARD","quantity":1,"variants":{"39351330242609":{"id":"39351330242609","title":"VER. 1","quantity":1},"39351330275377":{"id":"39351330275377","title":"VER. 2","quantity":1},"39351330308145":{"id":"39351330308145","title":"VER. 3","quantity":1},"39351330340913":{"id":"39351330340913","title":"VER. 4","quantity":1}},"handle":"monsta-x-9th-mini-album-one-of-a-kind-exclusive-photocard"}},"volume_discounts":[]}];var bundles=[];var currentDateTime=(new Date()).getTime();for(var z=0;z<dbBundles.length;z++){var enabledBundle=true;if(typeof dbBundles[z].use_date_condition!=='undefined'&&dbBundles[z].use_date_condition==='true'){if(typeof dbBundles[z].date_from!=='undefined'&&dbBundles[z].date_from!==null&&dbBundles[z].date_from.trim()!==''){var fromDate=new Date(dbBundles[z].date_from);if(fromDate.getTime()>currentDateTime){enabledBundle=false;}}
if(typeof dbBundles[z].date_to!=='undefined'&&dbBundles[z].date_to!==null&&dbBundles[z].date_to.trim()!==''){var toDate=new Date(dbBundles[z].date_to);if(toDate.getTime()<currentDateTime){enabledBundle=false;}}}
if(enabledBundle===true){bundles.push(dbBundles[z]);}}
if(typeof Shopify!=='undefined'&&Shopify.hasOwnProperty('currency')&&Shopify.currency.hasOwnProperty('rate')){var rate=Shopify.currency.rate;var currency=Shopify.currency.active;if(rate!=="1.0"){for(var i=0;i<bundles.length;i++){if(bundles[i].discount_type==='products_discounts'||bundles[i].discount_type==='fixed_amount'){bundles[i].fixed_amount_value=utils.convertMoney(bundles[i].fixed_amount_value,rate,currency);for(var pkey in bundles[i].products){var product=bundles[i].products[pkey];product.discount_amount=utils.convertMoney(product.discount_amount,rate,currency);for(var vkey in product.variants){var variant=product.variants[vkey];variant.discount_amount=utils.convertMoney(variant.discount_amount,rate,currency);}}}else if(bundles[i].discount_type==='fixed_price'){bundles[i].fixed_price_value=utils.convertMoney(bundles[i].fixed_price_value,rate,currency);}
if(bundles[i].minimum_requirements==='volume_discounts'&&typeof bundles[i].volume_discounts!=='undefined'&&bundles[i].volume_discounts.length>0){for(var z=0;z<bundles[i].volume_discounts.length;z++){if(bundles[i].volume_discounts[z].discount_type==='fixed_amount'){bundles[i].volume_discounts[z].discount_value=utils.convertMoney(bundles[i].volume_discounts[z].discount_value,rate,currency);}}}}}}
var widgetView={addToCartButton:{showCheckmark:function($button){var htmlContent=$button.html();$button.html(htmlUtils.svgCheckmark);if($button.closest('[data-bndlr-keep-success-indicator]').length===0){var timeout=4000;setTimeout(function(){$button.find('.bndlr-checkmark').first().fadeOut(450,function(){$button.html(htmlContent);});},timeout);}}},getBundleTitle:function(title,name,id){var titleHtml='<h2 class="bndlr-bundle-title">'+title+'</h2>';return titleHtml;},getBundleImage:function(imageSrc,title,name,id){var imageHtml='<img class="bndlr-bundle-image" src="'+imageSrc+'" />';return imageHtml;},drawSelectedProducts:function(bundleKey,products){var bundleId=$('[data-bndlr-key="'+bundleKey+'"]').closest('[data-bundle]').attr('data-bundle');bundleId=parseInt(bundleId);var bundle=bndlr.getBundleById(bundleId);var discountedProducts=Library.DiscountedProducts.get(bundle.id);var html='';var statusBoxProductsHtml='';for(var key in products){if(products.hasOwnProperty(key)){var productId=products[key].product_id;var variantId=products[key].variant_id;var productData;if(bundle.product_level=='product'){productData=discountedProducts[productId];}else{productData=discountedProducts[variantId];}
var selectedProductHtml=bndlr.getSelectedProductHtml(products[key],productData,bundle,key);html+=selectedProductHtml;var statusBoxProductHtml=bndlr.getStatusBoxProductHtml(products[key],productData,bundle);statusBoxProductsHtml+=statusBoxProductHtml;}}
$('[data-bndlr-key="'+bundleKey+'"] .bndlr-mnm-selected-products').html(html);$('#bndlr-mnm-status-box[data-bndlr-bundle-key="'+bundleKey+'"] .bdnlr-mnm-status-box-products-container').html(statusBoxProductsHtml);},MixNMatch:{hideAddtoBundleButtons:function(bundleKey){$('[data-bndlr-key="'+bundleKey+'"]').find('.bndlr-add-to-bundle').addClass('bndlr-hidden');},showAddtoBundleButtons:function(bundleKey){$('[data-bndlr-key="'+bundleKey+'"]').find('.bndlr-add-to-bundle').removeClass('bndlr-hidden');},hideAddtoBundleButton:function(bundleKey,productId){$('[data-bndlr-key="'+bundleKey+'"] [data-product-id="'+productId+'"] .bndlr-add-to-bundle').addClass('bndlr-hidden');},showAddtoBundleButton:function(bundleKey,productId){$('[data-bndlr-key="'+bundleKey+'"] [data-product-id="'+productId+'"] .bndlr-add-to-bundle').removeClass('bndlr-hidden');},fadeInSelectedProducts:function(bundleKey){$('[data-bndlr-key="'+bundleKey+'"]').find('.bndlr-toggle.bndlr-hidden').removeClass('bndlr-hidden');},fadeOutSelectedProducts:function(bundleKey){$('[data-bndlr-key="'+bundleKey+'"]').find('.bndlr-toggle').addClass('bndlr-hidden');},fadeInAddToCartButton:function(bundleKey){$('[data-bndlr-key="'+bundleKey+'"]').find('.bndlr-add-bundle-to-cart.bndlr-hidden').removeClass('bndlr-hidden');$('[data-bndlr-key="'+bundleKey+'"]').find('.bndlr-mnm-total-price.bndlr-hidden').removeClass('bndlr-hidden');$('[data-bndlr-key="'+bundleKey+'"]').find('.bndlr-bundle-checkout-warning.bndlr-hidden').removeClass('bndlr-hidden');$('[data-bndlr-key="'+bundleKey+'"]').find('.sealsubs-target-element-bundle').css({'display':'block'});$('#bndlr-mnm-status-box[data-bndlr-bundle-key="'+bundleKey+'"]').find('.bndlr-status-box-add-to-cart.bndlr-hidden').removeClass('bndlr-hidden');},fadeOutAddToCartButton:function(bundleKey){$('[data-bndlr-key="'+bundleKey+'"]').find('.bndlr-add-bundle-to-cart').addClass('bndlr-hidden');$('[data-bndlr-key="'+bundleKey+'"]').find('.bndlr-mnm-total-price').addClass('bndlr-hidden');$('[data-bndlr-key="'+bundleKey+'"]').find('.bndlr-bundle-checkout-warning').addClass('bndlr-hidden');$('[data-bndlr-key="'+bundleKey+'"]').find('.sealsubs-target-element-bundle').css({'display':'none'});$('#bndlr-mnm-status-box[data-bndlr-bundle-key="'+bundleKey+'"]').find('.bndlr-status-box-add-to-cart').addClass('bndlr-hidden');},}};var htmlUtils={moneySpan:function(value,currency,classes,customAttribute,numericValue){var valueNoHtml=value.replace(/(<([^>]+)>)/gi,"");if(typeof customAttribute!=='string'){customAttribute='';}
valueNoHtml=valueNoHtml.replace(/\"/g,"&quot;").replace(/\'/g,"&apos;");if(typeof numericValue!=='undefined'){return '<span class="'+classes+' bndlr-money conversion-bear-money money gt_currency gt_currency--'+currency+'" '+customAttribute+' data-money-convertible data-currency-'+currency+'="'+valueNoHtml+'" data-currentprice="'+numericValue+'">'+value+'</span>';}else{return '<span class="'+classes+' bndlr-money conversion-bear-money money" '+customAttribute+' data-money-convertible data-currency-'+currency+'="'+valueNoHtml+'">'+value+'</span>';}},svgCheckmark:'<svg class="bndlr-checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="-5 -2 40 40"><path fill="none" d="M4.1 18.2 l7.1 7.2 l16.7-16.8" /></svg>',svgCheckmarkPreselected:'<svg class="bndlr-preselected-checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="-5 -2 40 40"><path fill="none" d="M4.1 18.2 l7.1 7.2 l16.7-16.8" /></svg>'};if(typeof clientSpecifics==='undefined'){var clientSpecifics={};}
function cartChangeDetectorFunction(){this.mutationsInProgress=0;this.dispatchCartDrawerEventTimeout=false;};cartChangeDetectorFunction.prototype.beforeMutation=function(){this.mutationsInProgress++;}
cartChangeDetectorFunction.prototype.afterMutation=function(){var self=this;setTimeout(function(){self.mutationsInProgress--;},100);}
cartChangeDetectorFunction.prototype.getMutationsInProgress=function(){return this.mutationsInProgress;}
cartChangeDetectorFunction.prototype.observeCart=function(){try{var self=this;var callback=function(mutationsList,observer){if(self.getMutationsInProgress()===0){if(typeof self.dispatchCartDrawerEventTimeout!=='undefined'){clearTimeout(self.dispatchCartDrawerEventTimeout);}
self.dispatchCartDrawerEventTimeout=setTimeout(function(){var event=new Event('bndlr:cart_drawer_mutation');window.dispatchEvent(event);},90);}};var observer=new MutationObserver(callback);var cartDrawersList=['#ajaxifyMini','#CartDrawer .drawer__inner','#ajaxifyModal #ajaxifyCart','#qikify-stickycart-app','.sp-cart .sp-dropdown-menu .sp-dropdown-inner .sp-cart-layout','#CartDrawer #CartContainer','#sidebar-cart','#cartSlideoutWrapper','div.right-drawer-vue','#theme-ajax-cart .ajax-cart--mini-cart','.off-canvas--container .cart--root','#cartSidebar','.top-cart-holder .cart-target','.go-cart__drawer.js-go-cart-drawer .go-cart-drawer','.cart-mini .cart-mini-sidebar','#slidedown-cart','#slideout-ajax-cart #mini-cart','#shopify-section-mini-cart #mini-cart','#cart-popup'];for(var i=0;i<cartDrawersList.length;i++){if($(cartDrawersList[i]).length){observer.observe($(cartDrawersList[i])[0],{attributes:true,childList:true,subtree:true});}}}catch(e){console.log(e);}}
var cartChangeDetector=new cartChangeDetectorFunction();cartChangeDetector.observeCart();cartChangeDetectorFunction.prototype.hookToAddToCartEvent=function(){(function(open){XMLHttpRequest.prototype.open=function(){var rurl='';if(typeof arguments[1]==='string'&&arguments[1].length>0){rurl=arguments[1];this.addEventListener('load',function(){try{if(typeof rurl==='string'&&rurl.length>0){handleAddToCart(rurl,this.response);}}catch(t){console&&console.warn&&console.warn('[Bundler cart event listener] Error in handleXhrDone:  '+t.message)}})}
return open.apply(this,arguments);}
function handleAddToCart(url,data){var types=['/cart/update.js','/cart/change.js','/cart/change.json','/cart/change','/cart/add.js','/cart/add.json','/cart/add','/cart?view=ajax','/cart?view=json','section_id=cart-drawer'];for(var i=0;i<types.length;i++){if(url.indexOf(types[i])!==-1&&url.indexOf('bundler-cart-call')===-1){var event=new CustomEvent('bndlr:cart_was_modified');document.dispatchEvent(event);i=types.length;}}
var exactMatch=['/cart'];for(var i=0;i<exactMatch.length;i++){if(url==exactMatch[i]&&url.indexOf('bundler-cart-call')===-1){var event=new CustomEvent('bndlr:cart_was_modified');document.dispatchEvent(event);i=types.length;}}}})(XMLHttpRequest.prototype.open);(function(w){if(typeof w.fetch==='function'){try{var oldFetch=w.fetch;w.fetch=function(){var promise=oldFetch.apply(this,arguments);try{if(typeof arguments[0]==='string'&&arguments[0].length>0){var rurl=arguments[0];promise.then(function(data){try{if(typeof rurl==='string'&&rurl.length>0){handleAddToCart(rurl,data);}}catch(t){console&&console.warn&&console.warn('[Bundler cart event listener] Error in fetch:  '+t.message)}});}}catch(e){console.error(e);}
return promise;}}catch(e){console.log(e);}}
function handleAddToCart(url,data){var types=['/cart/update.js','/cart/change.js','/cart/change.json','/cart/change','/cart/add.js','/cart/add.json','/cart/add','/cart?view=ajax','/cart?view=json','section_id=cart-drawer'];for(var i=0;i<types.length;i++){if(url.indexOf(types[i])!==-1&&url.indexOf('bundler-cart-call')===-1){var event=new CustomEvent('bndlr:cart_was_modified');document.dispatchEvent(event);i=types.length;}}}})(window);};if(typeof cartChangeDetector!=='undefined'){cartChangeDetector.hookToAddToCartEvent();}
var bndlr={outputBundles:function(){bundlerConsole.log(JSON.parse(JSON.stringify(bundles)));},getBundles:function(){return JSON.parse(JSON.stringify(bundles));},outputProductUrls:function(){var urls=[];for(var i=0;i<bundles.length;i++){for(var key in bundles[i].products){if(bundles[i].products.hasOwnProperty(key)){urls.push(nav.getRootUrl()+'products/'+bundles[i].products[key].handle);}}}
bundlerConsole.log(JSON.parse(JSON.stringify(urls)));},getProductUrls:function(){var urls=[];for(var i=0;i<bundles.length;i++){for(var key in bundles[i].products){if(bundles[i].products.hasOwnProperty(key)){urls.push(nav.getRootUrl()+'products/'+bundles[i].products[key].handle);}}}
return JSON.parse(JSON.stringify(urls));},useBundlerCheckout:true,checkoutParams:{},setCheckoutParams:function(params){if(Object.keys(params).length>0){bndlr.checkoutParams=params;}},preventBundlerCheckout:function(){bndlr.externalAppPreventCheckout.prevent=true;bundlerConsole.log('Third party requested prevention of Bundler checkout');},externalAppPreventCheckout:{prevent:false,counter:0,canCheckout:function(){if(typeof clientSpecifics['can_checkout']!=='undefined'){var canCheckout=clientSpecifics['can_checkout'].get();if(canCheckout===false){return false;}}
try{if(typeof window.PARCELY_APP!=='undefined'&&typeof window.PARCELY_APP.readyForCheckout==='boolean'){if(window.PARCELY_APP.readyForCheckout===false){return false;}}}catch(e){console.log(e.message);}
if(this.prevent){return false;}
return true;}},addCheckoutParams:function(url,excludedKeys){if(typeof excludedKeys==='undefined'){excludedKeys=[];}
var locale=this.getLocale();if(locale!==''&&typeof this.checkoutParams['locale']==='undefined'){this.checkoutParams['locale']=locale;}
if(Object.keys(this.checkoutParams).length>0){if(url.indexOf('?')===-1){url+='?';}else{url+='&';}
for(var key in this.checkoutParams){if(this.checkoutParams.hasOwnProperty(key)&&excludedKeys.indexOf(key)===-1){url+=key+'='+this.checkoutParams[key]+'&';}}
url=url.replace(/\&$/,'');}
return url;},getLocale:function(){try{if(typeof Weglot!=='undefined'&&typeof Weglot.getCurrentLang==='function'){var lang=Weglot.getCurrentLang();if(typeof lang!=='undefined'&&lang!==null&&lang!==''){return lang;}}}catch(e){}
if(typeof Shopify!=='undefined'&&typeof Shopify.locale==='string'){return Shopify.locale}
return '';},init:function(){if(typeof window.bndlrPOS==='undefined'&&nav.isShopPage()===false){console.warn('Bundler: You have to upgrade Bundler if you want to display widgets on third party pages');return false;}
var self=this;var checkoutSelector="input[type='submit'][name='checkout']:not(.productForm-submit), button[type='submit'][name='checkout']:not(.productForm-submit):not([disabled]), button.checkout-button[name='checkout'], form.cart-form a.btn-checkout, a[href='/checkout'], #dropdown-cart button.btn-checkout, .cart-popup-content a.btn-checkout, .cart__popup a.checkout-button, .widget_shopping_cart_content a[href='/checkout'], .jas_cart_page button.checkout-button, .mini-cart-info button.mini-cart-button, a.checkout-link, a.mini-cart-checkout-button, .shopping_cart_footer .actions button";checkoutSelector+=', #dropdown-cart button.btn[onclick="window.location=\'/checkout\'"], form[action="/cart"] button[name="checkout"], .bundler-checkout-button, input.action_button[type="submit"][value="Checkout"]';checkoutSelector+=', button.Cart__Checkout[type="submit"][name="checkout"] span';checkoutSelector+=', .popup-cart a[href^="/checkout"], #slidecarthq .footer button.button';checkoutSelector+=', button.cart__checkout-cta, button.sidecart__checkout-cta';checkoutSelector+=', button.bc-atc-slide-checkout-btn';checkoutSelector+=', #ajax-cart__content .ajax-cart__button.button--add-to-cart';checkoutSelector+=', .cart_container form.js-cart_content__form button.add_to_cart.action_button';checkoutSelector+=', .cart_container .js-cart_content__form input.action_button[type="submit"]';checkoutSelector+=', #checkout_shipping_continue_btn';checkoutSelector+=', .spurit-occ2-checkout a[name="checkout"][href="/checkout/"]';checkoutSelector+=', #checkout-button';checkoutSelector+=', button.btn-checkout';checkoutSelector+=', button.rebuy-button';checkoutSelector+=', .go-cart__button[href*="/checkout/"],  .go-cart__button[href*="/checkout?"]';checkoutSelector+=', a[href*="/checkout/"]:not([href*="/a/bundles/checkout/"]):not([href*="/subscription/"]), a[href*="/checkout?"]';checkoutSelector+=', input.cart--button-checkout, a.satcb-cs-checkout-btn';checkoutSelector+=', button#parcelySubmit[data-cart-submit]';checkoutSelector+=', #checkout[type="submit"][name="checkout"], #checkout[type="submit"][name="checkout"] .custom-cobutton';checkoutSelector+=', a[href*="/checkout"]:not([href*="/a/bundles/checkout/"]):not([href*="/subscription/"])';checkoutSelector+=', .rebuy-cart__flyout-footer .rebuy-cart__flyout-subtotal + .rebuy-cart__flyout-actions > button.rebuy-button:first-child, .rebuy-cart__flyout-footer .rebuy-cart__flyout-subtotal + .rebuy-cart__flyout-actions > button.rebuy-button:first-child span';checkoutSelector+=', .quick-cart__buy-now[data-buy-now-button], .icart-checkout-btn, .icartCheckoutBtn';checkoutSelector+=', button.cart__checkout, button[type="submit"][form="mini-cart-form"]';checkoutSelector+=', button[type="submit"][form="mini-cart-form"] span, button[type="submit"][form="mini-cart-form"] span svg';checkoutSelector+=', .SideCart__footer button[type="submit"]';checkoutSelector+=', div[onclick="clicktocheckoutnormal()"], div[onclick="clicktocheckout()"]';checkoutSelector+=', .mini-cart__actions .mini-cart__checkout, .mini-cart__actions .mini-cart__checkout *';checkoutSelector+=', button.checkout-button[onclick="window.location=\'/checkout\'"]';checkoutSelector+=', [data-ocu-checkout="true"]';checkoutSelector+=', input[type="submit"][name="checkout"].cart__submit';checkoutSelector+=', [data-ocu-checkout="true"], .btncheckout';var $document=$(document);var $body=$('body');$(checkoutSelector).on('click',function(e){if(bndlr.useBundlerCheckout&&bndlr.externalAppPreventCheckout.canCheckout()){e.preventDefault();e.stopPropagation();$(this).addClass('bndlr-checkout-button-clicked');self.prepareInvoice();}});$document.on('click',checkoutSelector,function(e){if(bndlr.useBundlerCheckout&&bndlr.externalAppPreventCheckout.canCheckout()){e.preventDefault();e.stopPropagation();$(this).addClass('bndlr-checkout-button-clicked');self.prepareInvoice();}});$document.on('click','.bndlr-message-yes',function(){$(this).addClass('bndlr-loading');self.prepareInvoice();});$document.on('bundler_trigger_normal_checkout',function(){bndlr.useBundlerCheckout=false;var cartSelector='form[action="/cart"][method="post"], form.cart[action="/cart"][method="post"], form.cart[method="post"], #cart form';var clickWasHandled=false;var tryToClickOnTheSameButton=true;if(typeof window.PARCELY_APP!=='undefined'){tryToClickOnTheSameButton=false;}
if(tryToClickOnTheSameButton===true){var $clickedButton=$('.bndlr-checkout-button-clicked');if($clickedButton.length===1){if($clickedButton.prop('tagName')!=='A'){clickWasHandled=true;if($clickedButton.is('[disabled]')){$clickedButton.removeAttr('disabled');}
try{$clickedButton.click();}catch(e){clickWasHandled=false;console.error(e);}
setTimeout(function(){window.location.href=bndlr.addCheckoutParams('/checkout');},1000);}}else if($(cartSelector).find(checkoutSelector).length){clickWasHandled=true;$(cartSelector).find(checkoutSelector).first().click();}}
if(clickWasHandled!==true){if(typeof window.SealSubs!=='undefined'&&typeof window.SealSubs.discounts_apply_on_initial_order==='boolean'&&typeof window.SealSubs.checkout==='function'){if(SealSubs.discounts_apply_on_initial_order){window.SealSubs.checkout();clickWasHandled=true;}}}
if(clickWasHandled!==true){window.location.href=bndlr.addCheckoutParams('/checkout');}else{setTimeout(function(){window.location.href=bndlr.addCheckoutParams('/checkout');},1000);}});$document.on('click','.bndlr-message-close',function(){bndlr.setCookie('bndlr_hide_discount_message','hide',0);self.closeMessage();});$document.on('click','.bndlr-message-no',function(){self.closeMessage();});$document.on('click','.bndlr-add-to-cart',function(){bndlr.addToCart($(this));});$document.on('keydown','.bndlr-add-to-cart',function(e){if(e.which==13){bndlr.addToCart($(this));}
if(e.which==32){e.preventDefault();bndlr.addToCart($(this));}});$document.on('change','.bndlr-select-variant',function(){bndlr.updatePriceDisplay($(this));bndlr.changeDisplayedImage($(this));bndlr.convertCurrency();});$document.on('show_bundle','body',function(e,$el){self.showBundleOnElementWithHandle($el);});$document.on('click','.bndlr-add-to-bundle',function(){bndlr.MixNMatch.addToBundle($(this));});$document.on('keydown','.bndlr-add-to-bundle',function(e){if(e.which==13){bndlr.MixNMatch.addToBundle($(this));}
if(e.which==32){e.preventDefault();bndlr.MixNMatch.addToBundle($(this));}});$document.on('click','.bndlr-add-bundle-to-cart',function(){bndlr.MixNMatch.addMixAndMatchBundleToCart($(this));});$document.on('keydown','.bndlr-add-bundle-to-cart',function(e){if(e.which==13){bndlr.MixNMatch.addMixAndMatchBundleToCart($(this));}
if(e.which==32){e.preventDefault();bndlr.MixNMatch.addMixAndMatchBundleToCart($(this));}});$document.on('click','.bndlr-mix-and-match .bndlr-close',function(){bndlr.MixNMatch.removeFromBundle($(this));});$document.on('keydown','.bndlr-mix-and-match .bndlr-close',function(e){if(e.which==13){bndlr.MixNMatch.removeFromBundle($(this));}
if(e.which==32){e.preventDefault();bndlr.MixNMatch.removeFromBundle($(this));}});if(typeof window.BndlrIsBundleLandingPage!=='undefined'&&window.BndlrIsBundleLandingPage===true){$document.on('click','.bndlr-status-box-add-to-cart',function(){var bundleKey=$(this).closest('[data-bndlr-bundle-key]').attr('data-bndlr-bundle-key');bndlr.MixNMatch.addMixAndMatchBundleToCart($('[data-bndlr-key="'+bundleKey+'"] .bndlr-add-bundle-to-cart').first(),$(this));});$document.on('keydown','.bndlr-status-box-add-to-cart',function(e){if(e.which==13||e.which==32){if(e.which==32){e.preventDefault();}
var bundleKey=$(this).closest('[data-bndlr-bundle-key]').attr('data-bndlr-bundle-key');bndlr.MixNMatch.addMixAndMatchBundleToCart($('[data-bndlr-key="'+bundleKey+'"] .bndlr-add-bundle-to-cart').first(),$(this));}});var MixNMatchScrollTimeout=false;$(window).scroll(function(){if(MixNMatchScrollTimeout!==false){clearTimeout(MixNMatchScrollTimeout);}
MixNMatchScrollTimeout=setTimeout(bndlr.MixNMatch.showHideStatusBox,200);});}
$document.on('click','button.add_to_cart, #cart_form .js-change-quantity, .product-quantity-box .js-change-quantity, .btn--add-to-cart, .cart-functions  button.button[name="add"], #product-add-to-cart',function(e){debounce('check-for-discounts',function(){setTimeout(function(){DiscountEstimator.showPopup();},1000);},100);});document.addEventListener('bndlr:cart_was_modified',function(){debounce('check-for-discounts',function(){DiscountEstimator.showPopup();},100);});var bundleWidgetCreatedTimeout=false;$document.on('bundler_bundle_widget_created',function(){if(bundleWidgetCreatedTimeout!==false){clearTimeout(bundleWidgetCreatedTimeout);}
bundleWidgetCreatedTimeout=setTimeout(function(){$('.bndlr-product').each(function(i,el){$(el).find('.bndlr-select-option').first().trigger('change');});bndlr.convertCurrency();if(($('.bndlr-container:not([data-available="false"]) .bndlr-product-title').first().height()===0&&$('.bndlr-container:not([data-available="false"]) .bndlr-product-title').first().text()!==''&&$('.bndlr-container:not([data-available="false"]) .bndlr-bundle-image').length===0)||($('.bndlr-container:not([data-available="false"]) .bndlr-bundle-image').length>0&&$('.bndlr-container:not([data-available="false"]) .bndlr-bundle-image').first().height()===0)){$('.bundler-target-element').css({'font-size':'16px','line-height':'1.5'});}},500);});document.addEventListener('bundler:mixnmatch_refreshed',function(){if(typeof window.Shopify!=='undefined'&&typeof window.Shopify.theme!=='undefined'&&(window.Shopify.theme.theme_store_id==871||window.Shopify.theme.name.indexOf('Warehouse')!==-1)){debounce('resize-box',function(){var height=document.querySelector('.product-block-list__item--info .card').getBoundingClientRect().height;if(height>200){document.querySelector('.product-block-list__wrapper').style.minHeight=height+'px';}},200);}});$(window).on('resize',function(){if(typeof bndlr.repositionTimeout!=='undefined'){clearTimeout(bndlr.repositonTimeout);}
bndlr.repositonTimeout=setTimeout(bndlr.repositionPlusSigns,50);});$('#SingleOptionSelector-0, #SingleOptionSelector-1').on('change',function(){var variantSelector='#ProductSelect-product-template option:selected, #ProductSelect-product-template option:selected';var variant=$(variantSelector).val();if(typeof variant=='undefined'){var variant=$(variantSelector).val();}
$('select.bndlr-select-variant option[value="'+variant+'"]').parent('select').val(variant);$('select.bndlr-select-variant option[value="'+variant+'"]').parent('select').trigger('change');});try{document.addEventListener('click',function(event){try{if(bndlr.useBundlerCheckout&&(event.target.matches('form[action="/cart/add"] .shopify-payment-button__button')||event.target.matches('form[action="/cart/add"] .shopify-payment-button__button *')||event.target.matches('form[action="/cart/add"] .shopify-payment-button__more-options')||event.target.matches('form[action="/cart/add"] .lh-buy-now'))&&bndlr.externalAppPreventCheckout.canCheckout()){event.preventDefault();event.stopPropagation();event.stopImmediatePropagation();var form=$(event.target).closest('form');var url=form.attr('action');$.ajax({type:"POST",url:url,data:form.serialize(),success:function(data){self.prepareInvoice();}});}}catch(e){bundlerConsole.log(e.message);}
try{if(bndlr.useBundlerCheckout&&(event.target.matches('form#form_buy_sticky #button-cart-buy'))&&bndlr.externalAppPreventCheckout.canCheckout()){event.preventDefault();event.stopPropagation();event.stopImmediatePropagation();var form=$(event.target).closest('form');var $stickyQuantity=form.find('[name="stickyquantity"]');if($stickyQuantity.length>0){$stickyQuantity.attr('name','quantity');}
var url=form.attr('action');$.ajax({type:"POST",url:url,data:form.serialize(),success:function(data){self.prepareInvoice();}});}}catch(e){bundlerConsole.log(e.message);}},true);}catch(e){bundlerConsole.log(e.message);}
try{document.addEventListener('click',function(event){try{if(bndlr.useBundlerCheckout&&event.target.matches(checkoutSelector)&&bndlr.externalAppPreventCheckout.canCheckout()){event.preventDefault();event.stopPropagation();event.stopImmediatePropagation();try{$(event.target).addClass('bndlr-checkout-button-clicked');}catch(e){console.error(e);}
self.prepareInvoice();}}catch(e){bundlerConsole.log(e.message);}},true);}catch(e){}
var productWidthStandard=230;var productWidthLandingPage=330;if(typeof clientSpecifics['product_dimensions']!=='undefined'){productWidthStandard=clientSpecifics['product_dimensions'].getStandardWidth();productWidthLandingPage=clientSpecifics['product_dimensions'].getLadingPageWidth();}
$body.append('<style>'+
'.bndlr-container {'+
'width:100%;'+
'text-align:center;'+
'margin-top:20px;'+
'padding-top: 20px;'+
'clear: both;'+
'box-sizing: border-box;'+
'line-height:1.5;'+
'}'+
'.bndlr-product {'+
'max-width:230px;'+
'max-width:'+productWidthStandard+'px;'+
'display:inline-block;'+
'vertical-align: top;'+
'margin: 5px 5px;'+
'position:relative;'+
'border: 1px solid rgba(198, 198, 198, 0.55);'+
'padding: 5px 5px;'+
'vertical-align: middle;'+
'box-sizing: border-box;'+
'}'+
'.bndlr-product-overlay {'+
'width:100%;'+
'height:100%;'+
'position:absolute;'+
'top:0;'+
'left:0;'+
'background:rgba(255, 255, 255, 0.5);'+
'box-sizing: border-box;'+
'display:none;'+
'}'+
'.bndlr-product-overlay .bndlr-product-overlay-checkmark  {'+
'position:absolute;'+
'width: auto;'+
'height: 1.5em;'+
'display: block;'+
'background:white;'+
'background: #FFFFFF;'+
'top:0;'+
'right:0;'+
'}'+
'.bndlr-product-overlay .bndlr-product-overlay-checkmark .bndlr-preselected-checkmark {'+
'width: auto;'+
'height: 1.5em;'+
'display: block;'+
'stroke-width: 3;'+
'stroke: rgb(70, 103, 167);'+
'stroke: #4667A7;'+
'margin:0 auto;'+
'}'+
'.bndlr-product:not(:last-of-type)::after {'+
'position: absolute;'+
'display: block;'+
'right: calc(-0.5em - 6px);'+
'top: 50%;'+
'transform: translateY(-50%);'+
'z-index: 9;'+
'z-index: 1;'+
'content: "+";'+
'font-weight: bold;'+
'color: white;'+
'color: #2AD687;'+
'background: #4667a7;'+
'background: #000000;'+
'border-radius:50%;'+
'width: 1em;'+
'height: 1em;'+
'line-height: 1.05em;'+
'font-size:25px;'+
'font-family:arial;'+
'}'+
'.bndlr-product.bndlr-no-plus-sign::after {'+
'display:none;'+
'}'+
'.bndlr-container .bndlr-break-plus-signs .bndlr-add-to-cart {'+
'max-width:230px;'+
'}'+
'.bndlr-landing-page .bndlr-product {'+
'max-width:330px;'+
'max-width:'+productWidthLandingPage+'px;'+
'}'+
'.bndlr-landing-page .bndlr-mnm-selected-products .bndlr-product {'+
'max-width:250px;'+
'}'+
'.bndlr-landing-page .bndlr-container {'+
'margin-top:0;'+
'padding-top:0;'+
'}'+
'.bndlr-landing-page .bndlr-break-plus-signs .bndlr-add-to-cart {'+
'max-width:330px;'+
'}'+
'@media screen and (max-width: 554px) {'+
'.bndlr-landing-page .bndlr-container .bndlr-add-to-cart {'+
'max-width:330px;'+
'}'+
'}'+
'.bndlr-break-plus-signs .bndlr-product:not(:last-of-type)::after {'+
'right: calc(-0.5em - 6px);'+
'left: 50%;'+
'transform: translateX(-50%);'+
'bottom: calc(-0.5em - 6px);'+
'top:initial;'+
'}'+
'.bndlr-products-container {'+
'display:inline-block;'+
'padding:7px;'+
'border-radius:2px;'+
'margin-bottom: 20px;'+
'position:relative;'+
'}'+
'.bndlr-inner-products-container {'+
'display:inline-block;'+
'}'+
'.bndlr-mixnmatch .bndlr-inner-products-container {'+
'padding-top:5px;'+
'}'+
'.bndlr-bundle-description {'+
'width:80%;'+
'margin:0 auto;'+
'}'+
'.bndlr-bundle-title {'+
'margin-bottom: 0.3em;'+
'margin-top: 0.2em;'+
'}'+
'.bndlr-container h2.bndlr-bundle-title {'+
'text-align:center;'+
'}'+
'.bndlr-bundle-checkout-warning {'+
'width:80%;'+
'margin:0 auto 0.2em auto;'+
'font-size:0.8em;'+
'opacity:0.8;'+
'margin-top: 0.5em;'+
'}'+
'.bndlr-add-to-cart {'+
'display:block;'+
'width: calc(100% - 10px);'+
'margin:5px auto 0 auto;'+
'background: #4667a7;'+
'background: #000000;'+
'padding: 0.6em 0;'+
'color: white;'+
'color: #2AD687;'+
'border-radius: 2px;'+
'cursor: pointer;'+
'max-width: 710px;'+
'}'+
'.bndlr-add-to-bundle {'+
'display:block;'+
'width: 100%;'+
'margin:5px auto 0 auto;'+
'background: #4667a7 !important;'+
'background: rgb(67, 112, 183) !important;'+
'padding: 0.6em 0;'+
'color: white !important;'+
'color: #FFFFFF !important;'+
'border-radius: 2px;'+
'cursor: pointer;'+
'max-width: 710px;'+
'user-select: none;'+
'}'+
'.bndlr-add-to-bundle:active {'+
'opacity:0.5;'+
'}'+
'.bndlr-add-bundle-to-cart {'+
'display:block;'+
'width: 100%;'+
'margin:5px auto 0 auto;'+
'background: #4667a7 !important;'+
'background: #000000 !important;'+
'padding: 0.6em 0;'+
'color: white !important;'+
'color: #2AD687 !important;'+
'border-radius: 2px;'+
'cursor: pointer;'+
'max-width: 710px;'+
'}'+
'.bndlr-add-to-cart[data-active="false"] {'+
'opacity:0.8;'+
'cursor: default;'+
'}'+
'.bndlr-checkmark {'+
'width: auto;'+
'height: 1.5em;'+
'display: block;'+
'stroke-width: 4;'+
'stroke: #2AD687;'+
'margin:0 auto;'+
'stroke-dasharray: 45;'+
'stroke-dashoffset: 45;'+
'-moz-animation: bndlr-stroke 0.35s linear forwards;'+
'-webkit-animation: bndlr-stroke 0.35s linear forwards;'+
'-o-animation: bndlr-stroke 0.35s linear forwards;'+
'-ms-animation: bndlr-stroke 0.35s linear forwards;'+
'animation: bndlr-stroke 0.35s linear forwards;'+
'}'+
'.bndlr-product.bndlr-mix-and-match .bndlr-checkmark {'+
'stroke: #FFFFFF;'+
'}'+
'_:-ms-lang(x), .bndlr-checkmark {'+
'stroke-dasharray: 0px;'+
'stroke-dashoffset: 0px;'+
'}'+
'@keyframes bndlr-stroke {'+
'100% {'+
'stroke-dashoffset: 0px;'+
'}'+
'}'+
'.bndlr-product-image-url {'+
'display: block;'+
'text-decoration: none;'+
'border: none !important;'+
'padding: 0 !important;'+
'}'+
'.bndlr-product-image-url::after {'+
'display: none !important;'+
'}'+
'.bndlr-product-image {'+
'border-radius:2px;'+
'max-width:100%;'+
'width:100%;'+
'display:block;'+
'margin-bottom:5px;'+
'margin-left: 0 !important;'+
'opacity: 1 !important;'+
'}'+
'.bndlr-product-title {'+
'font-weight:bold;'+
'border: none !important;'+
'padding: 0 !important;'+
'color: #282828 !important;'+
'}'+
'.bndlr-product-quantity {'+
'font-weight:bold;'+
'color: #788188;'+
'display: inline-block;'+
'margin-right: 5px;'+
'}'+
'.bndlr-old-price {'+
'text-decoration: line-through !important;'+
'margin-right:0.25em;'+
'color: #788188 !important;'+
'color: rgb(143, 143, 143) !important;'+
'font-weight:bold !important;'+
'}'+
'.bndlr-new-price {'+
'color: #788188 !important;'+
'color: rgb(143, 143, 143) !important;'+
'font-weight:bold !important;'+
'}'+
'.bndlr-old-price-cart-inline {'+
'text-decoration: line-through !important;'+
'margin-right:0.25em;'+
'}'+
'.bndlr-total-price,.bndlr-mnm-total-price {'+
'font-weight:bold;'+
'}'+
'.bndlr-total-price .bndlr-old-price, .bndlr-total-price .bndlr-new-price, .bndlr-mnm-total-price .bndlr-old-price, .bndlr-mnm-total-price .bndlr-new-price {'+
'color:inherit;'+
'}'+
'.bndlr-price-per-unit {'+
'color: #788188 !important;'+
'color: rgb(143, 143, 143) !important;'+
'font-weight:normal !important;'+
'font-style:italic;'+
'font-size: 0.8em;'+
'vertical-align: middle;'+
'vertical-align: top;'+
'}'+
'.bndlr-select-variant {'+
'font-family: inherit;'+
'font-weight: inherit;'+
'font-style: inherit;'+
'-webkit-font-smoothing: antialiased;'+
'-webkit-text-size-adjust: 100%;'+
'border-radius: 2px;'+
'max-width: 100%;'+
'font-size: .82em;'+
'padding: .445em 10px;'+
'padding-right: 10px;'+
'padding-right: 10px;'+
'line-height: 1.6;'+
'border: 1px solid #E3E3E3;'+
'width: 100%;'+
'max-width: 100%;'+
'display: block;'+
'margin-top: 5px;'+
'margin-bottom: 0px !important;'+
'color:rgb(47, 47, 47);'+
'-webkit-appearance: none;'+
'-moz-appearance: none;'+
'appearance: none;'+
'background-image: url(https://cdn-bundler.nice-team.net/app/img/app/dwn.svg?v2) !important;'+
'background-repeat: no-repeat !important;'+
'background-position: right 10px center !important;'+
'background-color: #fff !important;'+
'background-color: #FFFFFF !important;'+
'padding-right: 28px;'+
'text-indent: 0.01px;'+
'text-overflow: "";'+
'cursor: pointer;'+
'background-size: auto;'+
'min-height: unset !important;'+
'height: auto;'+
'}'+
'select.bndlr-select-variant::-ms-expand {'+
'display:none;'+
'}'+
'.bndlr-loading {'+
'color: rgba(0,0,0,0) !important;'+
'position:relative;'+
'}'+
'.bndlr-loading svg.bndlr-checkmark {'+
'opacity:0;'+
'}'+
'.bndlr-loading:after {'+
'display: block;'+
'content: "";'+
'border: 2px solid white;'+
'border: 2px solid #2AD687;'+
'width: 1em;'+
'height: 1em;'+
'border-radius: 50%;'+
'border-top: 2px solid transparent;'+
'position: absolute;'+
'left: 50%;'+
'top: 50%;'+
'animation-name: bndlr-spin;'+
'animation-duration: 500ms;'+
'animation-iteration-count: infinite;'+
'animation-timing-function: linear;'+
'}'+
'@keyframes bndlr-spin {'+
'from {'+
'transform:translateY(-50%) translateX(-50%) rotate(0deg);'+
'}'+
'to {'+
'transform:translateY(-50%) translateX(-50%) rotate(360deg);'+
'}'+
'}'+
'.bndlr-bundle-loading {'+
'height:6rem;'+
'position:relative;'+
'}'+
'.bndlr-bundle-loading:after {'+
'display: block;'+
'content: "";'+
'border: 2px solid #cdcdcd;'+
'width: 3em;'+
'height: 3em;'+
'border-radius: 50%;'+
'border-top: 2px solid transparent;'+
'position: absolute;'+
'left: 50%;'+
'top: 50%;'+
'animation-name: bndlr-spin;'+
'animation-duration: 500ms;'+
'animation-iteration-count: infinite;'+
'animation-timing-function: linear;'+
'}'+
'#bndlr-discount-message {'+
'position:fixed;'+
'display:block;'+
'width:auto;'+
'height:auto;'+
'background:rgb(246, 239, 220);'+
'background:rgb(246, 239, 220);'+
'color:#262626;'+
'color:#262626;'+
'padding: 30px 20px;'+
'right:10px;'+
'bottom:-100%;'+
'z-index:99999;'+
'box-shadow: 1px 1px 2px 1px #a5a5a5;'+
'border-radius: 2px;'+
'text-align:center;'+
'font-size:20px;'+
'border: 3px solid rgb(47, 47, 47);'+
'border: 3px solid rgb(47, 47, 47);'+
'margin-left:10px;'+
'}'+
'.bndlr-message-title {'+
'font-style:italic;'+
'font-size: 0.8em;'+
'font-weight: normal;'+
'}'+
'.bndlr-message-and-text {'+
'font-size: 0.8em;'+
'font-weight: normal;'+
'}'+
'.bndlr-message-question {'+
'font-size: 0.7em;'+
'font-weight: normal;'+
'padding: 0 20px;'+
'margin: 15px 0 10px 0;'+
'}'+
'.bndlr-message-discount-value {'+
'border-top: 1px solid black;'+
'border-top: 1px solid #262626;'+
'border-bottom: 1px solid black;'+
'border-bottom: 1px solid #262626;'+
'font-weight:bold;'+
'margin: 10px;'+
'line-height: 1.5;'+
'}'+
'.bndlr-message-yes {'+
'font-size: 0.7em;'+
'background: rgb(70, 167, 98);'+
'background: rgb(70, 167, 98);'+
'color: white;'+
'color: #ffffff;'+
'display: inline-block;'+
'padding: 5px 15px;'+
'border: 1px solid rgb(0, 0, 0);'+
'border: 1px solid #262626;'+
'border-radius: 2px;'+
'margin:0 10px;'+
'cursor:pointer;'+
'}'+
'.bndlr-message-no {'+
'font-size: 0.7em;'+
'background: transparent;'+
'display: inline-block;'+
'padding: 5px 15px;'+
'border: 1px solid rgb(0, 0, 0);'+
'border: 1px solid #262626;'+
'border-radius: 2px;'+
'margin:0 10px;'+
'cursor:pointer;'+
'}'+
'.bndlr-message-close, .bndlr-message-close:empty {'+
'position:absolute;'+
'width:32px;'+
'height:32px;'+
'top:-5px;'+
'right:-5px;'+
'cursor:pointer;'+
'border: none;'+
'box-sizing: border-box;'+
'display:block;'+
'}'+
'.bndlr-message-close:before, .bndlr-message-close:after {'+
'position: absolute;'+
'left: calc(16px - 1px);'+
'content: "";'+
'height: 16px;'+
'top: 8px;'+
'width: 2px;'+
'background-color: rgb(38, 38, 38);'+
'background-color: rgb(38, 38, 38);'+
'}'+
'.bndlr-message-close:before {'+
'transform: rotate(45deg);'+
'}'+
'.bndlr-message-close:after {'+
'transform: rotate(-45deg);'+
'}'+
'.bndlr-warning {'+
'position:absolute;'+
'bottom:2px;'+
'left:2px;'+
'background:white;'+
'color: #292929;'+
'font-size:1em;'+
'display:block;'+
'padding: 5px;'+
'border-radius:2px !important;'+
'border: 1px solid #cdcdcd;'+
'cursor:help;'+
'left: 50%;'+
'transform: translateX(-50%);'+
'width: 90%;'+
'}'+
'.bndlr-add-to-cart:focus, .bndlr-select-variant:focus, .bndlr-product a:focus, .bndlr-add-to-bundle:focus, .bndlr-add-bundle-to-cart:focus, .bndlr-close:focus {'+
'outline:1px dotted rgb(134, 134, 134);'+
'outline-offset: 1px;'+
'}'+
'.bndlr-add-to-cart:focus, .bndlr-select-variant:active, .bndlr-add-to-bundle:focus, .bndlr-add-bundle-to-cart:focus  {'+
'opacity:0.9;'+
'}'+
'.bndlr-select-variant:hover {'+
'outline:1px solid rgb(221, 221, 221);'+
'}'+
'.rte img.bndlr-product-image {'+
'margin:0;'+
'margin-bottom: 5px;'+
'margin-left: 0 !important;'+
'}'+
'.rte .bundler-target-element a {'+
'text-decoration:initial;'+
'text-underline-position:initial;'+
'}'+
'.rte .bundler-target-element h2::after {'+
'margin:0;'+
'padding:0;'+
'display:none;'+
'}'+
'.rte .bundler-target-element h2 {'+
'margin-top:0.2em;'+
'margin-bottom:0.3em;'+
'}'+
'#jas-content .jas-row .bundler-target-element {'+
'flex:1 1 auto;'+
'}'+
'img.bndlr-bundle-image {'+
'border: 1px solid rgba(198, 198, 198, 0.55);'+
'padding: 5px 5px;'+
'max-width:100%;'+
'max-width:calc(100% - 10px);'+
'width:auto;'+
'margin: 5px;'+
'vertical-align: bottom;'+
'box-sizing: border-box;'+
'}'+
'.bndlr-product-names-list {'+
'max-width: 710px;'+
'margin:0 auto;'+
'padding-bottom: 0.25em;'+
'}'+
'.bndlr-product-names-list .bndlr-price-per-unit {'+
'vertical-align: middle;'+
'padding-left: 0.5em;'+
'font-size: 0.7em;'+
'}'+
'#bndlr-loaded {'+
'width:0;'+
'height:0;'+
'}'+
'.bndlr-product[data-available="false"] {'+
'}'+
'.bndlr-container[data-available="false"] .bndlr-bundle-checkout-warning {'+
'display:none;'+
'}'+
'.bndlr-product[data-available="false"]::before {'+
'display:block;'+
'content:"Out of stock";'+
'content:"Out of stock";'+
'position:absolute;'+
'opacity: 1;'+
'left: 0;'+
'top: 0;'+
'background:rgb(219, 54, 24);'+
'color:white;'+
'padding: 5px 7px;'+
'font-weight: normal;'+
'}'+
'.bundler-target-element {'+
'clear:both;'+
'direction:ltr;'+
'}'+
'.template-product section.page.page-product-header[itemtype="http://schema.org/Product"][data-section-type="product"] .bndlr-container {'+
'padding-bottom:100px;'+
'}'+
'.bndlr-error {'+
'text-align: center;'+
'color:rgba(142, 142, 142, 0.46);'+
'font-size: 0.7em;'+
'font-style: italic;'+
'}'+
'span.bndlr-cart-values {'+
'display:inline;'+
'}'+
'.bndlr-mnm-second-container {'+
'display:flex;'+
'flex-direction:column;'+
'}'+
'.bndlr-mnm-selected-products-title {'+
'text-align:center;'+
'padding:5px 10px 0 10px;'+
'font-size: 1.1em;'+
'font-weight: bold;'+
'font-style: italic;'+
'}'+
'.bndlr-mnm-selected-products {'+
'flex: 1 1 50%;'+
'display: flex;'+
'padding:5px 0;'+
'}'+
'.bndlr-mnm-selected-products .bndlr-product {'+
'max-width:200px;'+
'}'+
'.bndlr-mnm-add-to-cart-wrapper {'+
'flex: 1 1 auto;'+
'padding:5px;'+
'}'+
'.bndlr-mnm-selected-products .bndlr-product {'+
'box-shadow: 1px 1px 5px 0px rgb(128, 128, 128);'+
'border:none;'+
'}'+
'.bndlr-mnm-instructions-text {'+
'color: rgb(232, 35, 35);'+
'color: rgb(232, 35, 35);'+
'}'+
'.bndlr-product[data-mnm-required="true"]::before {'+
'display:block;'+
'content:"Required";'+
'content:"Required";'+
'position:absolute;'+
'opacity: 1;'+
'left: 0;'+
'top: 0;'+
'background:rgb(219, 54, 24);'+
'background: rgb(219, 54, 24);'+
'color:white;'+
'color: rgb(255, 255, 255);'+
'padding: 5px 7px;'+
'font-weight: normal;'+
'z-index:1;'+
'border-bottom-right-radius: 2px;'+
'}'+
'#bndlr-mnm-status-box {'+
'position:fixed;'+
'bottom: 1em;'+
'left:50%;'+
'transform:translateX(-50%);'+
'min-width:250px;'+
'max-width:90%;'+
'text-align:center;'+
'z-index:2;'+
'}'+
'@media only screen and (max-width: 440px) {'+
'#bndlr-mnm-status-box {'+
'min-width:90%;'+
'}'+
'}'+
'.bdnlr-mnm-status-box-info-container {'+
'background:black;'+
'background: #000000;'+
'padding: 1em;'+
'border-radius: 5px;'+
'}'+
'.bdnlr-mnm-status-box-products-container {'+
'text-align: center;'+
'padding-left: 5px;'+
'}'+
'.bndlr-status-box-product {'+
'width: 67px;'+
'height: 67px;'+
'display: inline-block;'+
'margin-left: -10px;'+
'margin-bottom: -0.5em;'+
'vertical-align:bottom;'+
'}'+
'.bndlr-status-box-product-quantity {'+
'position: absolute;'+
'margin-top: -0.5em;'+
'margin-left: -0.5em;'+
'color: gray;'+
'color: rgb(128, 128, 128);'+
'font-style: italic;'+
'font-size: 0.8em;'+
'text-shadow: 1px 1px 0px rgb(193, 192, 192);'+
'}'+
'.bndlr-status-box-product-url {'+
'display:block;'+
'}'+
'.bndlr-status-box-product-image {'+
'width: 67px;'+
'border-radius: 50%;'+
'height: 67px;'+
'object-fit: cover;'+
'background:white;'+
'box-shadow: 1px 1px 2px 0px rgba(0, 0, 0, 0.7);'+
'}'+
'#bndlr-mnm-status-box .bndlr-mnm-instructions-text {'+
'color: white;'+
'color: #FFFFFF;'+
'}'+
'.bndlr-status-box-add-to-cart {'+
'display:block;'+
'width: 100%;'+
'margin:0 auto;'+
'background: #4667a7;'+
'background: #4667a7;'+
'padding: 0.6em 0;'+
'color: white;'+
'color: #FFFFFF;'+
'border-radius: 2px;'+
'cursor: pointer;'+
'max-width: 710px;'+
'}'+
'.bndlr-visibility-hidden {'+
'visibility:hidden;'+
'opacity:0;'+
'transition: visibility 0.5s, opacity 0.5s linear;'+
'}'+
'.bndlr-visibility-visible {'+
'visibility: visible;'+
'opacity:1;'+
'transition: visibility 0.5s, opacity 0.5s linear;'+
'}'+
'.bndlr-hidden {'+
'display:none;'+
'}'+
'.bndlr-close::after {'+
'content: "";'+
'display: block;'+
'height: 2px;'+
'width: 100%;'+
'background-color: rgb(70, 70, 70);'+
'position: absolute;'+
'left: 0;'+
'top: 7px;'+
'outline: 1px solid rgb(255, 255, 255);'+
'}'+
'.bndlr-close::before {'+
'content: "";'+
'display: block;'+
'height: 100%;'+
'width: 2px;'+
'background-color: rgb(70, 70, 70);'+
'position: absolute;'+
'left: 7px;'+
'top: 0;'+
'outline: 1px solid rgb(255, 255, 255);'+
'}'+
'.bndlr-close {'+
'width: 16px;'+
'height: 16px;'+
'-webkit-transform: rotate(45deg);'+
'-x-transform: rotate(45deg);'+
'-o-transform: rotate(45deg);'+
'transform: rotate(45deg);'+
'position: absolute;'+
'right: 3px;'+
'top: 3px;'+
'border: none;'+
'cursor: pointer;'+
'box-sizing: border-box;'+
'}'+
'div.bndlr-close:empty {'+
'display:block;'+
'}'+
'#ajaxifyModal #ajaxifyCart .bndlr-cart-values {'+
'font-size:80%;'+
'}'+
'.bndlr-dn {'+
'display:none;'+
'}'+
'.bndlr-no-click {'+
'pointer-events:none;'+
'}'+
'#bundler-target-element:empty, .bundler-target-element:empty, .bundler-volume-target-element:empty {'+
'display:block !important;'+
'}'+
'#__pf [data-pf-type="Section"] .bundler-volume-target-element {'+
'max-width:500px;'+
'}'+
'.bndlr-inner-products-container > div:first-child {'+
'display: flex;'+
'flex-wrap: wrap;'+
'justify-content: center;'+
'}'+
'.bndlr-product {'+
'display: flex;'+
'flex-direction: column;'+
'justify-content: center;'+
'}'+
'.bndlr-product-image-url {'+
'margin-top:auto;'+
'margin-bottom:auto;'+
'}'+
'_:-ms-lang(x), .bndlr-inner-products-container > div:first-child {'+
'display: block;'+
'}'+
'_:-ms-lang(x), .bndlr-product {'+
'display: inline-block;'+
'}'+
'_:-ms-lang(x), .bndlr-product-image-url {'+
'margin-top:0;'+
'margin-bottom:0;'+
'}'+
'.bndlr-product-image-url {'+
'margin-top:0;'+
'margin-bottom:auto;'+
'}'+
'.bndlr-bottom-pusher {'+
'margin-bottom:unset;'+
'}'+
'.bndlr-mnm-available-products, .bndlr-mnm-selected-products {'+
'display: flex;'+
'flex-wrap: wrap;'+
'justify-content: center;'+
'}'+
'.bndlr-product.bndlr-mix-and-match {'+
'display: flex;'+
'flex-direction: column;'+
'justify-content: center;'+
'flex: 1 1 auto;'+
'}'+
'.bndlr-mix-and-match .bndlr-product-image-url {'+
'margin-top:auto;'+
'margin-bottom:auto;'+
'}'+
'.bndlr-mix-and-match .bndlr-bottom-pusher {'+
'margin-bottom:unset;'+
'}'+
'_:-ms-lang(x), .bndlr-mnm-available-products, .bndlr-mnm-selected-products {'+
'display: block;'+
'}'+
'_:-ms-lang(x), .bndlr-product.bndlr-mix-and-match {'+
'display: inline-block;'+
'}'+
'_:-ms-lang(x), .bndlr-mix-and-match .bndlr-product-image-url {'+
'margin-top:0;'+
'margin-bottom:0;'+
'}'+
'.bndlr-mix-and-match .bndlr-product-image-url {'+
'margin-top:0;'+
'margin-bottom:auto;'+
'}'+
'.bndlr-mix-and-match .bndlr-bottom-pusher {'+
'margin-bottom:unset;'+
'}'+
'@keyframes bdnlr-bounce {'+
'0%, 10%, 27%, 40%, 50% {'+
'-webkit-animation-timing-function: cubic-bezier(.215, .61, .355, 1);'+
'-webkit-transform: translateZ(0);'+
'animation-timing-function: cubic-bezier(.215, .61, .355, 1);'+
'transform: translateZ(0);'+
'}'+
'20%, 21% {'+
'-webkit-animation-timing-function: cubic-bezier(.755, .05, .855, .06);'+
'-webkit-transform: translate3d(0, -20px, 0);'+
'animation-timing-function: cubic-bezier(.755, .05, .855, .06);'+
'transform: translate3d(0, -20px, 0);'+
'}'+
'35% {'+
'-webkit-animation-timing-function: cubic-bezier(.755, .05, .855, .06);'+
'-webkit-transform: translate3d(0, -10px, 0);'+
'animation-timing-function: cubic-bezier(.755, .05, .855, .06);'+
'transform: translate3d(0, -10px, 0);'+
'}'+
'45% {'+
'-webkit-transform: translate3d(0, -4px, 0);'+
'transform: translate3d(0, -4px, 0);'+
'}'+
'}'+
'.bndlr-add-to-cart, .bndlr-add-bundle-to-cart {'+
'-moz-animation: bdnlr-bounce 2s infinite;'+
'-webkit-animation: bdnlr-bounce 2s infinite;'+
'animation: bdnlr-bounce 2s infinite;'+
'-moz-transform-origin: center bottom;'+
'-webkit-transform-origin: center bottom;'+
'transform-origin: center bottom;'+
'}'+
'.bundler-target-element[data-bndlr-ccid] .bndlr-container {'+
'margin-top:10px;'+
'padding-top:10px;'+
'}'+
'.bndlr-medium .bndlr-product {'+
'max-width:190px;'+
'}'+
'.bundler-widgets-side-by-side, .bundler-widgets-side-by-side #bundler-target-element {'+
'display: flex;'+
'clear: both;'+
'max-width: 1500px;'+
'margin: 0 auto;'+
'flex-wrap:wrap;'+
'}'+
'.bundler-widgets-side-by-side .bundler-target-element {'+
'display: flex;'+
'flex: 1 1 auto;'+
'align-self: flex-end;'+
'justify-content: center;'+
'max-width:740px;'+
'min-width: 320px;'+
'}'+
'.bundler-widgets-side-by-side .bndlr-products-container {'+
'display:block;'+
'}'+
'.number_total.bundler-cart-price-info-container-inline {'+
'flex-direction:row !important;'+
'}'+
'</style>');if(nav.isShopPage()===false){$body.append('<style>'+
'.bndlr-container {'+
'margin-top:0;'+
'padding-top:0;'+
'}'+
'</style>');}
if(typeof window.Shopify!=='undefined'&&typeof window.Shopify.theme!=='undefined'&&typeof window.Shopify.theme.name==='string'&&window.Shopify.theme.name==='Flow'){document.addEventListener('bundler:bundle_widget_created',function(){debounce('window-resize',function(){window.dispatchEvent(new Event('resize'));},200);});}
if(typeof window.Shopify!=='undefined'&&typeof window.Shopify.theme!=='undefined'&&typeof window.Shopify.theme.theme_store_id!=='undefined'&&window.Shopify.theme.theme_store_id===730){document.addEventListener('bundler:bundle_widget_created',function(){debounce('window-resize',function(){},200);});}
if(typeof window.Shopify!=='undefined'&&typeof window.Shopify.theme!=='undefined'&&typeof window.Shopify.theme.theme_store_id!=='undefined'&&window.Shopify.theme.theme_store_id===829){document.addEventListener('bundler:bundle_widget_created',function(){debounce('window-resize',function(){window.dispatchEvent(new Event('resize'));},200);});}
if(typeof clientSpecifics['init']!=='undefined'){clientSpecifics['init'].trigger();}},convertCurrency:function(selector){if(typeof selector==='undefined'){selector='.bndlr-product .bndlr-money, .bndlr-total-price .bndlr-money';}
if(typeof DoublyGlobalCurrency!=='undefined'&&typeof DoublyGlobalCurrency.currentCurrency!=='undefined'&&typeof DoublyGlobalCurrency.convertAll!=='undefined'){try{var newCurrency=DoublyGlobalCurrency.currentCurrency;DoublyGlobalCurrency.convertAll(newCurrency,selector);}catch(e){}}else if(typeof Currency!=='undefined'&&typeof Currency.currentCurrency!=='undefined'&&typeof Currency.convertAll!=='undefined'){var oldCurrency=bndlr.getDefaultCurrency();var newCurrency=Currency.currentCurrency;if(oldCurrency!==newCurrency&&newCurrency!==''&&typeof Shopify!=='undefined'&&typeof Shopify.currency!=='undefined'&&typeof Shopify.currency.rate!=='undefined'&&Shopify.currency.rate==="1.0"){try{Currency.convertAll(oldCurrency,newCurrency,selector);}catch(e){}}}
if(typeof conversionBearAutoCurrencyConverter!=='undefined'&&typeof conversionBearAutoCurrencyConverter.convertPricesOnPage==='function'){conversionBearAutoCurrencyConverter.convertPricesOnPage();}
if(typeof BOLDCURRENCY!=='undefined'&&typeof BOLDCURRENCY.converter!=='undefined'&&typeof BOLDCURRENCY.converter.refresh!=='undefined'){BOLDCURRENCY.converter.refresh();}
if(typeof window.baCurr!=='undefined'&&typeof window.baCurr.refreshConversion==='function'){try{window.baCurr.refreshConversion();}catch(e){console.log(e);}}
if(typeof window.store!=='undefined'&&typeof window.store.update!=='undefined'&&typeof window.GemCurrency!=='undefined'&&typeof window.GemCurrency.currentCurrency!=='undefined'){try{window.store.update('dataCurrency',window.GemCurrency.currentCurrency);}catch(e){console.log(e);}}},canUseCheckout:function(){return bndlr.useBundlerCheckout&&bndlr.externalAppPreventCheckout.canCheckout();},preparingCheckout:false,prepareInvoice:function(fallbackToCheckout,callback,triggerNormalCheckout){if(typeof clientSpecifics['on_prepare_invoice']!=='undefined'){clientSpecifics['on_prepare_invoice'].trigger(fallbackToCheckout,callback,triggerNormalCheckout);}else{bndlr._prepareInvoice(fallbackToCheckout,callback,triggerNormalCheckout);}},_prepareInvoice:function(fallbackToCheckout,callback,triggerNormalCheckout){if(bndlr.preparingCheckout!==false){var lastStartedAt=bndlr.preparingCheckout;if(Date.now()<(lastStartedAt+1500)){return true;}}
bndlr.preparingCheckout=Date.now();if(typeof fallbackToCheckout==='undefined'){fallbackToCheckout=true;}
if(typeof triggerNormalCheckout==='undefined'){triggerNormalCheckout=true;}
cart.get('default',false).done(function(cartData){var cartNoteSelector='#CartSpecialInstructions, .cart-note__input, #note, [name="cart[note]"], [name="note"]';if($(cartNoteSelector).first().length>0&&$(cartNoteSelector).first().val().length>0){cartData.note=$(cartNoteSelector).first().val();}
try{if(nav.isCartPage()&&$('.bundler-target-element').length===0){var cartItemKeyRegex=/\d+:[a-z0-9]+/;$('[name="updates[]"]').each(function(key,el){var id=$(el).attr('id');if(typeof id==='string'){var match=id.match(cartItemKeyRegex);if(match!==null&&typeof match[0]==='string'){var itemKey=match[0];var itemQuantity=$(el).val()*1;if(itemQuantity>0){for(var j=0;j<cartData.items.length;j++){if(cartData.items[j].key===itemKey&&cartData.items[j].quantity!=itemQuantity){cartData.items[j].quantity=itemQuantity;cartData.items[j].line_price=itemQuantity*cartData.items[j].price;cartData.items[j].original_line_price=itemQuantity*cartData.items[j].original_price;cartData.items[j].final_line_price=itemQuantity*cartData.items[j].final_price;}}}}}});}}catch(e){console.error(e);bndlr.preparingCheckout=false;}
try{var cartSelector='form[action="/cart"][method="post"], form.cart[method="post"], #cart form';if($(cartSelector).length>0){var url=$(cartSelector).attr('action');var urlParams=url.match(/(?:cart\?)(.*)/);if(urlParams!==null&&typeof urlParams[1]!=='undefined'&&urlParams[1].length>0){var additionalParams=nav.getQueryParams(urlParams[1]);bndlr.setCheckoutParams(additionalParams);}
$(cartSelector).find('input[name^="attributes["], select[name^="attributes["], textarea[name^="attributes["]').each(function(ix,el){if(typeof cartData.attributes==='undefined'){cartData.attributes={}}
var key=$(el).attr('name').replace('attributes[','').replace(']','');var value=$(el).val();var $el=$(el);var addAttribute=true;if($el.attr('type')==='checkbox'){if($el.is(':checked')===false){addAttribute=false;}}
if(addAttribute&&((value!==''&&value!==null)||typeof cartData.attributes[key]=='undefined')){cartData.attributes[key]=value;}});}}catch(e){bundlerConsole.log(e);bndlr.preparingCheckout=false;}
bndlr.getInvoice(cartData).done(function(data){if(typeof callback==='function'){callback();}else{bndlr.useInvoice(data,triggerNormalCheckout);}
bndlr.preparingCheckout=false;}).fail(function(f){if(fallbackToCheckout===true){window.location.href=bndlr.addCheckoutParams('/checkout');}else{$('.bndlr-add-to-cart').removeClass('bndlr-loading');}
bndlr.preparingCheckout=false;});});},getCartData:function(successCallback){cart.get('default',false).done(function(cartData){var cartNoteSelector='#CartSpecialInstructions, .cart-note__input, #note, [name="cart[note]"], [name="note"]';if($(cartNoteSelector).first().length>0&&$(cartNoteSelector).first().val().length>0){cartData.note=$(cartNoteSelector).first().val();}
try{if(nav.isCartPage()&&$('.bundler-target-element').length===0){var cartItemKeyRegex=/\d+:[a-z0-9]+/;$('[name="updates[]"]').each(function(key,el){var id=$(el).attr('id');if(typeof id==='string'){var match=id.match(cartItemKeyRegex);if(match!==null&&typeof match[0]==='string'){var itemKey=match[0];var itemQuantity=$(el).val()*1;if(itemQuantity>0){for(var j=0;j<cartData.items.length;j++){if(cartData.items[j].key===itemKey&&cartData.items[j].quantity!=itemQuantity){cartData.items[j].quantity=itemQuantity;cartData.items[j].line_price=itemQuantity*cartData.items[j].price;cartData.items[j].original_line_price=itemQuantity*cartData.items[j].original_price;cartData.items[j].final_line_price=itemQuantity*cartData.items[j].final_price;}}}}}});}}catch(e){console.error(e);}
try{var cartSelector='form[action="/cart"][method="post"], form.cart[method="post"], #cart form';if($(cartSelector).length>0){var url=$(cartSelector).attr('action');var urlParams=url.match(/(?:cart\?)(.*)/);if(urlParams!==null&&typeof urlParams[1]!=='undefined'&&urlParams[1].length>0){var additionalParams=nav.getQueryParams(urlParams[1]);bndlr.setCheckoutParams(additionalParams);}
$(cartSelector).find('input[name^="attributes["], select[name^="attributes["], textarea[name^="attributes["]').each(function(ix,el){if(typeof cartData.attributes==='undefined'){cartData.attributes={}}
var key=$(el).attr('name').replace('attributes[','').replace(']','');var value=$(el).val();var $el=$(el);var addAttribute=true;if($el.attr('type')==='checkbox'){if($el.is(':checked')===false){addAttribute=false;}}
if(addAttribute&&((value!==''&&value!==null)||typeof cartData.attributes[key]=='undefined')){cartData.attributes[key]=value;}});}}catch(e){bundlerConsole.log(e);}
if(typeof successCallback==='function'){successCallback(cartData);}});},gettingCheckoutInfo:false,getCheckoutInfo:function(callback){if(bndlr.gettingCheckoutInfo!==false){var lastStartedAt=bndlr.gettingCheckoutInfo;if(Date.now()<(lastStartedAt+1500)){return true;}}
bndlr.gettingCheckoutInfo=Date.now();bndlr.getCartData(function(cartData){if(cartData.items.length>0){bndlr.getInvoice(cartData,true,'getCheckoutInfo').done(function(data){if(typeof callback==='function'){data.can_apply_discount=false;if(typeof data.url!=='undefined'&&data.url!=='/checkout'){data.can_apply_discount=true;}
callback(data);}
bndlr.gettingCheckoutInfo=false;}).fail(function(f){if(typeof callback==='function'){callback({can_apply_discount:false});}
bndlr.gettingCheckoutInfo=false;});}else{callback({can_apply_discount:false});}});},getInvoice:function(cartData,withExtraInfo,source){if(typeof withExtraInfo==='undefined'){withExtraInfo=false;}
if(typeof source==='undefined'){source='';}
var additionalGetParams='';if(source!==''){additionalGetParams='&from='+source;}
var exchangeRate=1;if(typeof window.Shopify!=='undefined'&&typeof window.Shopify.currency!=='undefined'&&typeof window.Shopify.currency.rate!=='undefined'){exchangeRate=window.Shopify.currency.rate;}
return $.ajax({url:nav.getInvoiceEndpoint(withExtraInfo,additionalGetParams),type:'POST',data:{cart:cartData,er:exchangeRate},dataType:'json',timeout:15000});},useInvoice:function(invoice,triggerNormalCheckout){if(typeof triggerNormalCheckout==='undefined'){triggerNormalCheckout=true;}
if(typeof invoice.url!=='undefined'){if(invoice.url==='/checkout'){if(triggerNormalCheckout){$(document).trigger('bundler_trigger_normal_checkout');}else{window.location.href=this.addCheckoutParams('/checkout');}}else{var excludedCheckoutKeys=[];if(invoice.url.indexOf('discount=')!==-1){excludedCheckoutKeys.push('discount');}
invoice.url=this.addCheckoutParams(invoice.url,excludedCheckoutKeys);if(typeof invoice.status_code!=='undefined'&&invoice.status_code==202){setTimeout(function(){window.location=invoice.url;},1000);}else{window.location=invoice.url;}}}else{window.location.href=this.addCheckoutParams('/checkout');}},showBundleOnElementWithHandle:function($el){var productHandle=$el.attr('data-product-handle');if(productHandle!==false){var self=this;cart.getProductData(nav.getRootUrl(),productHandle).done(function(productData){productData=self.remapProductData(productData);var bundle=self.findBundle(productData.id,productData.variants);var uniqueKey=utils.getRandomString();$el.attr('data-b-key',uniqueKey);var keySelector='[data-b-key="'+uniqueKey+'"]';$el.attr('data-bundle',bundle.id);$el.html('<div class="bndlr-bundle-loading"></div>');if(bundles!==false){self.getProducts(bundle,function(){self.displayBundle(bundle,keySelector);});}});}},canShowBundlesAutomatically:function(){var canShowWidgets=true;return canShowWidgets;},getCustomerTags:function(){return customer.getCustomerTags();},canShowBundle:function(bundle){if(typeof bundle.limit_for_customer_tags==='undefined'||bundle.limit_for_customer_tags.length===0){return true;}
var customerTags=bndlr.getCustomerTags();if(customerTags!==null){for(var g=0;g<customerTags.length;g++){for(var h=0;h<bundle.limit_for_customer_tags.length;h++){if(customerTags[g].trim()===bundle.limit_for_customer_tags[h].trim()){return true;}}}
return false;}
return false;},showBundle:function(removePreviousBundles){var bundleFound=false;if($('#bundler-target-element[data-bundle], .bundler-target-element[data-bundle]').length>0){var bundlesList=[];$('#bundler-target-element[data-bundle], .bundler-target-element[data-bundle]').each(function(index,el){$el=$(el);if($el.find('.bndlr-container').length===0){$el.addClass('bundler-target-element');var uniqueKey=$el.attr('data-bndlr-k');if(typeof uniqueKey!=='string'){uniqueKey=utils.getRandomString();$el.attr('data-bndlr-k',uniqueKey);$el.attr('id','_bndl_key_'+uniqueKey);}
var keySelector='#_bndl_key_'+uniqueKey;bundlesList.push({id:$el.attr('data-bundle'),keySelector:keySelector});}});var bundleDataList=[];for(var i=0;i<bundlesList.length;i++){if(bundlesList[i].id.length){bundleDataList[i]={bundle:this.getBundleById(bundlesList[i].id),keySelector:bundlesList[i].keySelector};if(bundleDataList[i].bundle!==false){bundleFound=true;}
if(bundleDataList[i].bundle!==false){if(bndlr.canShowBundle(bundleDataList[i].bundle)===true){var self=this;var bundle=bundleDataList[i].bundle;self.getProducts(bundle,(function(){var bundleTmp=bundle;var keySelectorTmp=bundleDataList[i].keySelector;return function(products){self.setObserver(bundleTmp,keySelectorTmp);}})());}else{document.querySelector(bundleDataList[i].keySelector).innerHTML='';}}}}}
if(this.canShowBundlesAutomatically()===false){return true;}
if(bundleFound===false){var productHandle=nav.getProductHandle();if(productHandle!==false&&((typeof removePreviousBundles!=='undefined'&&removePreviousBundles)||$('.bndlr-automatic').length<=0)){var self=this;cart.getProductData(nav.getRootUrl(),productHandle).done(function(productData){productData=self.remapProductData(productData);var bundle=self.findBundle(productData.id,productData.variants);if(bundle!==false){if(typeof removePreviousBundles!=='undefined'&&removePreviousBundles){$('.bundler-target-element').remove();}
var uniqueKey=utils.getRandomString();var keySelector='#_bndl_key_'+uniqueKey;self.loopThroughSelectors(function($element,htmlSelector){if($element.length===1&&$element.closest('#judgeme_product_reviews').length===0){var dataBundleAttr=$element.attr('data-bundle');if(typeof dataBundleAttr==='undefined'||dataBundleAttr===false){if(typeof self.productHtmlSelectorsActions[htmlSelector]!=='undefined'){var positioningFunction=self.productHtmlSelectorsActions[htmlSelector];$element[positioningFunction]('<div id="_bndl_key_'+uniqueKey+'" class="bundler-target-element bndlr-automatic" data-bundle="'+bundle.id+'" data-bndlr-k="'+uniqueKey+'"></div>');}else{$element.append('<div id="_bndl_key_'+uniqueKey+'" class="bundler-target-element bndlr-automatic" data-bundle="'+bundle.id+'" data-bndlr-k="'+uniqueKey+'"></div>');}
return false;}}});self.getProducts(bundle,function(){self.setObserver(bundle,keySelector);});}});}}},loopThroughSelectors:function(callback){for(var i=0;i<this.productHtmlSelectors.length;i++){var htmlSelector=this.productHtmlSelectors[i];if(htmlSelector==='.bundler-target-only-visible-element'){var $element=$(htmlSelector).filter(':visible');}else{var $element=$(htmlSelector);}
if(callback($element,htmlSelector)===false){break;}}},isVariantStockAvailable:function(variant){if(variant.inventory_quantity<=0&&variant.inventory_policy==='deny'){return false;}
return true;},priceOrZero:function(price){if(typeof price==='undefined'||price===''||price===null){return 0;}
return this.getPrice(price);},remapProductData:function(productData,variantId){if(typeof productData.product!=='undefined'&&typeof productData.id==='undefined'){var source=productData.product;var product={id:source.id,title:source.title,handle:source.handle,variants:[],images:[],featured_image:source.images[0].src};var variants=[];for(var z=0;z<source.variants.length;z++){var variant={id:source.variants[z].id,public_title:source.variants[z].public_title,name:source.variants[z].name,title:source.variants[z].title,price:this.getPrice(source.variants[z].price),compare_at_price:this.priceOrZero(source.variants[z].compare_at_price),featured_image:{src:this.getVariantsFeaturedImage(source,source.variants[z])},available:this.isVariantStockAvailable(source.variants[z])};variants.push(variant);}
product.variants=variants;var images=[];for(var z=0;z<source.images.length;z++){images.push(source.images[z].src);}
product.images=images;productData=product;}
if(typeof variantId!=='undefined'&&variantId!==null){var variants=[];for(z=0;z<productData.variants.length;z++){if(productData.variants[z].id==variantId){variants.push(productData.variants[z]);productData.id=productData.variants[z].id;var variantTitle=this.getVariantTitle(productData.variants[z]);if(productData.title!==variantTitle){productData.title=productData.title+' - '+this.getVariantTitle(productData.variants[z]);}else{productData.title=productData.title;}
break;}}
if(variants.length===0){console.warn('Could not get variant '+variantId+' data for product '+productData.title+'!');productData.id=variantId;}
productData.variants=variants;}
productData.product_id=productData.id;return productData;},getVariantTitle:function(variant){var name=variant.public_title;if(typeof name=='undefined'||name===null){name=variant.name;}
if(typeof name=='undefined'||name===null){name=variant.title;}
return name;},findBundle:function(productId,variants,volumeDiscountType){if(typeof volumeDiscountType==='undefined'){volumeDiscountType=false;}
var currentPriority=0;var foundPreferredVariantBundle=null;var foundNonPreferredVariantBundle=null;var bndls=bundles;if(typeof clientSpecifics['before_find_bundle_reorder']!=='undefined'){bndls=clientSpecifics['before_find_bundle_reorder'].reorder(bndls);}
for(var i=0;i<bndls.length;i++){if(bndls[i].show_bundle==='false'){continue;}
if(volumeDiscountType===true&&bndls[i].minimum_requirements!=='volume_discounts'){continue;}
if(volumeDiscountType===false&&bndls[i].minimum_requirements==='volume_discounts'){continue;}
if(bndlr.canShowBundle(bndls[i])!==true){continue;}
if(volumeDiscountType===true&&bndls[i].minimum_requirements==='volume_discounts'&&bndls[i].product_target_type==='all_products'){return bndls[i];}
if(bndls[i].priority!==currentPriority){if(foundPreferredVariantBundle!==null){return foundPreferredVariantBundle;}
if(foundNonPreferredVariantBundle!==null){return foundNonPreferredVariantBundle;}}
currentPriority=bndls[i].priority;if(this.isVariantBundle(bndls[i])===false){if(typeof bndls[i].products[productId]!=='undefined'){return bndls[i];}
if(typeof bndls[i].required_products[productId]!=='undefined'){return bndls[i];}}else{var preferredVariant=nav.getVariantId();if(preferredVariant===''){var selectedVariant=$('select.product-single__variants[name="id"] option:selected');if(selectedVariant.length){preferredVariant=selectedVariant.val();}}
if(preferredVariant!==''){for(var pid in bndls[i].products){if(bndls[i].products.hasOwnProperty(pid)){var bundleVariants=bndls[i].products[pid].variants;if(typeof bundleVariants[preferredVariant]!=='undefined'){foundPreferredVariantBundle=bndls[i];}}}
if(foundPreferredVariantBundle===null){for(var pid in bndls[i].required_products){if(bndls[i].required_products.hasOwnProperty(pid)){var bundleVariants=bndls[i].required_products[pid].variants;if(typeof bundleVariants[preferredVariant]!=='undefined'){foundPreferredVariantBundle=bndls[i];}}}}}
for(var pid in bndls[i].products){if(bndls[i].products.hasOwnProperty(pid)){var bundleVariants=bndls[i].products[pid].variants;for(var x=0;x<variants.length;x++){var variantId=variants[x].id;if(typeof bundleVariants[variantId]!=='undefined'){foundNonPreferredVariantBundle=bndls[i];}}}}
if(foundNonPreferredVariantBundle===null){for(var pid in bndls[i].required_products){if(bndls[i].required_products.hasOwnProperty(pid)){var bundleVariants=bndls[i].required_products[pid].variants;for(var x=0;x<variants.length;x++){var variantId=variants[x].id;if(typeof bundleVariants[variantId]!=='undefined'){foundNonPreferredVariantBundle=bndls[i];}}}}}}}
if(foundPreferredVariantBundle!==null){return foundPreferredVariantBundle;}
if(foundNonPreferredVariantBundle!==null){return foundNonPreferredVariantBundle;}
return false;},isVariantBundle:function(bundle){if(typeof bundle.product_level!=='undefined'&&bundle.product_level=='variant'){return true;}
return false;},getBundleById:function(bundleId){for(var i=0;i<bundles.length;i++){if(typeof bundles[i].id!=='undefined'&&bundles[i].id==bundleId){return bundles[i];}}
return false;},processBundlesWithRetrievedProducts:function(){for(var bundleId in ProductRetrievalRequests){if(ProductRetrievalRequests.hasOwnProperty(bundleId)){var allBundleProductsWereRetrieved=true;for(var handle in ProductRetrievalRequests[bundleId].products){if(ProductRetrievalRequests[bundleId].products.hasOwnProperty(handle)){if(ProductRetrievalRequests[bundleId].products[handle]!=='retrieved'){allBundleProductsWereRetrieved=false;}}}
if(allBundleProductsWereRetrieved){Tools.Products.setLibraries(Library,bundleId);for(var i=0;i<ProductRetrievalRequests[bundleId].callback.length;i++){setTimeout(ProductRetrievalRequests[bundleId].callback[i],1);}
delete ProductRetrievalRequests[bundleId];}}}},handleProductRetrievalError:function(handle){for(var bundleId in ProductRetrievalRequests){if(ProductRetrievalRequests.hasOwnProperty(bundleId)){if(typeof ProductRetrievalRequests[bundleId].products[handle]!=='undefined'){if(typeof ProductRetrievalStatus[handle].error!=='undefined'){errorHandler.displayError(ProductRetrievalStatus[handle].error,bundleId);}}}}},markProductAsRetrieved:function(productData,forHandle){if(typeof productData.product!=='undefined'&&typeof productData.id==='undefined'){productData=productData.product;}
if(typeof forHandle!=='undefined'){var handle=forHandle;}else{var handle=productData.handle;}
ProductRetrievalStatus[handle].retrieved=true;ProductRetrievalStatus[handle].product_id=productData.id;ProductRetrievalStatus[handle].data=productData},setProductLibrariesForBundlesInQueue:function(forHandle){var handle=forHandle;if(typeof ProductRetrievalStatus[handle]!=='undefined'&&ProductRetrievalStatus[handle].retrieved===true){var productData=ProductRetrievalStatus[handle].data;for(var bundleId in ProductRetrievalRequests){if(ProductRetrievalRequests.hasOwnProperty(bundleId)){if(typeof ProductRetrievalRequests[bundleId].products[handle]!=='undefined'&&ProductRetrievalRequests[bundleId].products[handle]!='retrieved'){for(var key in ProductRetrievalRequests[bundleId].bundle.products){if(ProductRetrievalRequests[bundleId].bundle.products.hasOwnProperty(key)){var bndlrProduct=ProductRetrievalRequests[bundleId].bundle.products[key];if(bndlrProduct.handle===handle){if(Library.Products.isEmpty(bndlrProduct.id)){if(ProductRetrievalRequests[bundleId].bundle.product_level=='variant'){var remappedData=bndlr.remapProductData(JSON.parse(JSON.stringify(productData)),bndlrProduct.id);}else{var remappedData=bndlr.remapProductData(JSON.parse(JSON.stringify(productData)));}
Library.Products.set(bndlrProduct.id,remappedData);}}}}
if(ProductRetrievalRequests[bundleId].bundle.minimum_requirements==='specific_products'){for(var key in ProductRetrievalRequests[bundleId].bundle.required_products){if(ProductRetrievalRequests[bundleId].bundle.required_products.hasOwnProperty(key)){var bndlrProduct=ProductRetrievalRequests[bundleId].bundle.required_products[key];if(bndlrProduct.handle===handle){if(Library.Products.isEmpty(bndlrProduct.id)){if(ProductRetrievalRequests[bundleId].bundle.product_level=='variant'){var remappedData=bndlr.remapProductData(JSON.parse(JSON.stringify(productData)),bndlrProduct.id);}else{var remappedData=bndlr.remapProductData(JSON.parse(JSON.stringify(productData)));}
Library.Products.set(bndlrProduct.id,remappedData);}}}}}
ProductRetrievalRequests[bundleId].products[handle]='retrieved';}}}}},setVariantProductData:function(productData){if(typeof productData.variants!=='undefined'){for(var i=0;i<productData.variants.length;i++){var variantProductData=bndlr.remapProductData(JSON.parse(JSON.stringify(productData)),productData.variants[i].id);Library.Products.set(variantProductData.id,variantProductData);}}},getProducts:function(bundle,callback){var products={};var totalProducts=0;var processedProducts=0;var strippedProducts=JSON.parse(JSON.stringify(bundle.products));Library.DiscountedProducts.set(bundle.id,bundle.products);if(bundle.minimum_requirements==='specific_products'){Library.RequiredProducts.set(bundle.id,bundle.required_products);var requiredProducts=JSON.parse(JSON.stringify(bundle.required_products));Object.keys(requiredProducts).forEach(function(key){strippedProducts[key]=requiredProducts[key];});}
if(typeof ProductRetrievalRequests[bundle.id]==='undefined'){ProductRetrievalRequests[bundle.id]={products:{},callback:[callback],bundle:bundle};}else{ProductRetrievalRequests[bundle.id].callback.push(callback);}
for(var productId in strippedProducts){if(strippedProducts.hasOwnProperty(productId)){var handle=strippedProducts[productId].handle;if(typeof ProductRetrievalRequests[bundle.id].products[handle]==='undefined'){ProductRetrievalRequests[bundle.id].products[handle]={retrieving:true,id:strippedProducts[productId].id}}}}
for(var bundleId in ProductRetrievalRequests){if(ProductRetrievalRequests.hasOwnProperty(bundleId)){for(var productHandle in ProductRetrievalRequests[bundleId].products){if(typeof ProductRetrievalStatus[productHandle]==='undefined'){ProductRetrievalStatus[productHandle]={retrieved:false};var productId=ProductRetrievalRequests[bundleId].products[productHandle].id;cart.getProductData(nav.getRootUrl(),productHandle).done((function(){return function(productData){bndlr.markProductAsRetrieved(productData);bndlr.setProductLibrariesForBundlesInQueue(productData.handle);bndlr.processBundlesWithRetrievedProducts();}})()).fail((function(){var handle=productHandle;var pid=productId;return function(jqXHR){if(jqXHR.status==404){cart.getProductDataJSON(nav.getRootUrl(),handle).done(function(productData){if(typeof productData.product!=='undefined'){bndlr.markProductAsRetrieved(productData,handle);bndlr.setProductLibrariesForBundlesInQueue(handle);bndlr.processBundlesWithRetrievedProducts();}else{var errorMessage='Bundler: Can\'t get product data: '+nav.getRootUrl()+'products/'+handle+'.<br />To show the bundle widget, just make sure that the product is active in your online shop.';console.warn(errorMessage);ProductRetrievalStatus[handle]['error']=errorMessage;bndlr.handleProductRetrievalError(handle);}}).fail((function(){var pd=pid;return function(){var errorMessage='Bundler: Can\'t get product data: '+nav.getRootUrl()+'products/'+handle+'.<br />To show the bundle widget, just make sure that the product is active in your online shop.';console.warn(errorMessage);ProductRetrievalStatus[handle]['error']=errorMessage;bndlr.handleProductRetrievalError(handle);}})());}}})());}else if(ProductRetrievalStatus[productHandle].retrieved===true){bndlr.setProductLibrariesForBundlesInQueue(productHandle);bndlr.processBundlesWithRetrievedProducts();}else if(ProductRetrievalStatus[productHandle].retrieved===false){}}}}},productHtmlSelectors:['#bundler-target-element','.bundler-target-element','.bundler-target-only-visible-element','div.product-template[itemtype="http://schema.org/Product"] .product__content.page-width','#ProductSection-product-template .product.grid','.layout-content-wrapper .product-detail-form','#ProductSection-product-template section[itemtype="http://schema.org/Product"]','single-product.product-page-main','#__pf [data-pf-type="Layout"] [data-pf-type="Column"] [data-pf-type="ProductBox"]','#MainContent #shopify-section-product-template #ProductSection-product-template,product-template__container.page-width','#ProductSection-product-template .product-single.grid','#ProductSection-product-template','.product-main .box_product_page .product-essential','#ProductSection .product-single','div#section-product.product--section[itemtype="//schema.org/Product"] .box__product-content.site-box .site-box-content','div[itemtype="http://schema.org/Product"] #layoutmaincontent','#shopify-section-product-template #section-product-template .product-single .wrapper .product-details .product-single__meta div[itemprop="offers"][itemtype="http://schema.org/Offer"]','#shopify-section-product-template [data-section-id="product-template"] .product-block-list .product-block-list__item--info form.product-form','#shopify-section-product-template .product-section .page-content .page-width','[itemtype="http://schema.org/Product"][data-section-id="product"] .product-detail__wrapper .page-width','div[itemtype="http://schema.org/Product"] + .single-product-layout-type-3 .product-single','div[itemtype="http://schema.org/Product"] .product-single[data-product-id]','div[itemtype="http://schema.org/Product"]','div[itemtype="//schema.org/Product"]','div[itemtype="http://data-vocabulary.org/Product"] .product_section','#shopify-section-product-template .main_content_area .product_section[itemtype="http://schema.org/Product"]','#ProductSection-product-template-default .product-default .product_top .product-shop','#ProductSection-product-template-default .product_bottom','#shopify-section-single-product-tab','#shopify-section-product-template .sixteen.columns [class|="product"] [itemtype="http://schema.org/Product"]','#shopify-section-product-template div[class^="product-"] div[itemtype="http://schema.org/Product"].product_section','#shopify-section-product-template .product-template .product-right .shopify-product-form','#shopify-section-product-template .section-product .product-single','#shopify-section-product-template.shopify-section--product-template div.one-whole.column[class*="product-"]','#shopify-section-product-template div.product_section.is-flex','#shopify-section-product-template div.product_section','#shopify-section-product-template div.product-section:first','#shopify-section-product-template','section.grid-hold.product.content','#shopify-section-product [data-section-id="product"] .pro_main_c > div.row','#PageContainer main > div[itemtype="http://schema.org/Product"]','#shopify-section-static-product .product--container article.product--outer','#shopify-section-static-product article.product--outer','#shopify-section-product-detail-main [data-section-id="product-detail-main"]','article[itemtype="http://schema.org/Product"]','#ProductSection-product .product-page .product-single','div[itemtype="http://schema.org/Product"] .ten.columns.omega','#shopify-section-static-product.shopify-section.section-product','div[class^="product-"] div[itemtype="http://schema.org/Product"].product_section','.template-product .shg-product:first','div#product-details[itemtype="http://schema.org/Product"]','div#product_page_content[itemtype="http://schema.org/Product"]','.product-template-section .product_section','#shopify-section-product-template-control div[itemtype="http://schema.org/Product"]:first','#MainContent .module-wrap[data-label="Product"][data-status="dynamic"]','section[itemtype="http://schema.org/Product"]','.template-product .gryffeditor .module-wrap[data-label="Product"]:first','article#single-product .product__right','#PageContainer #shopify-section-product-template-alt','#shopify-section-product .product--template[data-section-id="product"][data-section-type="product"][data-product-template]','div[data-section-type="product"] .product-page .product-single','div[data-section-type="product"]','#ProductSection-product .product-page .product-single:not(.product-single--medium-image)','#template-product .product_section .product__information','div[class*="product-"][itemtype="http://schema.org/Product"]','#shopify-section-product .product-container .product-details-wrapper .product-message','#jas-content .product > .jas-row','.product #shopify-section-product-page-description','.product .product-infors .theiaStickySidebar','#MainContent section[keyword="product"] .gt_container','div[data-type="product"] .lh-product-single .lh-details-product','#shopify-section-static-product .module-wrapper .module-product .product-wrap .product-tabs','.template-product .product-tabs .product-tabs-body #product-tab-description','#shopify-section-product-page article#section-product-page .product-content','.product-template.product-details-section .section.product_section','#PageContainer .product-template .section-description','#shopify-section-product.shopify-section.section--products','#shopify-section-product-template .product .page__content-wrapper','#shopify-section-product-sections-template .product-section .page-content .page-width .product-single__description-full','#shopify-section-bbar-product-template #product-view','#shopify-section-template--product','div[data-section-type="product-page"] .product-page__main','.shopify-section .product-section .page-content','.site-box-container.product--section .box__product-content .site-box-content','#shopify-section-product--static .product-form-product--static','#shopify-section-product--static','#shopify-section-product-description-bottom-template .product_form form.shopify-product-form','#shopify-section-template-product #template-product .container--product','.shopify-section.section-product .product-details-inline','#shopify-section-module-product [data-section-id="module-product"]','#shopify-section-product #content .pro_main_c > .row:first','#shopify-section-product-sections-template .page-content .page-width .product-single__meta','#shopify-section-product-template > div[class^="product-"]','.product-page--right-column--container .product-form--root form.product-form--container','.product .product__info-container','#shopify-section-product-template-new','.shopify-section section[data-section-type="product"] > div.container','#shopify-section-product-details-template .container .product.product_section','.product .product-details','.pro-page #ProductSection-product-template-default .product-default .product_top','.product-single .product-single__bottom','.Product__InfoWrapper .Product__Info .Container','.shopify-section .product__section.product-template div.row.grid_wrapper .product__section-content','#PageContainer .container .grid.product-single','#shopify-section-product-details-template.shopify-section--product-template .container .product_section.is-flex','.product-block-list__item.product-block-list__item--info .card.card--sticky','.product-id.product-template .product-grid-product-template','#content .shopify-section.section-product-template .product-container[data-section-type="product-template"]','.is-product-main .product-container .product-main','.main__wrapper #content ~ .product__wrapper','.main__wrapper #content.product-page','.product-section .page-content .page-width .breadcrumb + .grid','#shopify-section-product .section-product','.product--container','.product-page-main','.shopify-section.section-product','.shopify-section .product-section:not(.is-modal) .page-content','div.shopify-section--main-product','.AddToCartForm  .item-content [data-key="accordion"]','div.product-area','div.product__section','[itemtype="http://schema.org/Product"] ~ .grid[itemtype="http://schema.org/Product"]','#shopify-section-product-template [itemtype="http://schema.org/Offer"] ~ .container ~ .product-detail','#shopify-section-product-page__product','.product-page--root','.screen-layer--is-active .screen-layer__inner .product-section.is-modal .page-content .page-width','.section-main-product [data-section-type="main-product"]','.product_section [data-product-details]','.product_section','.content-page-detail','.product.product--wet-pouch','#product_template'],productHtmlSelectorsActions:{'#ProductSection-product-template-default .product-default .related-products':'before','#shopify-section-product .product-container .product-details-wrapper .product-message':'before','#shopify-section-product-template .product-template .product-right .shopify-product-form':'after','#shopify-section-product-template [data-section-id="product-template"] .product-block-list .product-block-list__item--info form.product-form':'after','#shopify-section-static-product .module-wrapper .module-product .product-wrap .product-tabs':'after','#PageContainer .product-template .section-description':'after','#shopify-section-product.shopify-section.section--products':'after','#shopify-section-product-sections-template .product-section .page-content .page-width .product-single__description-full':'before','#shopify-section-bbar-product-template #product-view':'after','#shopify-section-product--static .product-form-product--static':'after','#shopify-section-static-product .product--container article.product--outer':'after','#shopify-section-product .product--template[data-section-id="product"][data-section-type="product"][data-product-template]':'after','#shopify-section-product-description-bottom-template .product_form form.shopify-product-form':'after','#shopify-section-module-product [data-section-id="module-product"]':'after','#shopify-section-product #content .pro_main_c > .row:first':'after','#shopify-section-product-template div.product_section.is-flex':'after','.product-page--right-column--container .product-form--root form.product-form--container':'after','#shopify-section-product-details-template .container .product.product_section':'after','#shopify-section-product-details-template.shopify-section--product-template .container .product_section.is-flex':'after','.product .product-details':'after','.pro-page #ProductSection-product-template-default .product-default .product_top':'after','.AddToCartForm  .item-content [data-key="accordion"]':'before','div.product-area':'after','.main__wrapper #content ~ .product__wrapper':'after'},discountedBundleProducts:{},activeBundle:{},objectToArray:function(object){var array=[];var order=[];for(var property in object){if(object.hasOwnProperty(property)){if(object[property].hasOwnProperty('sequence')){var sequence=object[property]['sequence'];if(typeof order[sequence]==='undefined'){order[sequence]=object[property];}else{order.push(object[property]);}}}}
if(order.length>0){for(var i=0;i<order.length;i++){if(typeof order[i]!=='undefined'){array.push(order[i]);}}}else{for(var property in object){if(object.hasOwnProperty(property)){array.push(object[property]);}}}
return array;},widgetCanBeDisplayed:true,renderedBundles:{},setObserver:function(bundle,keySelector,customCallback){var rootMargin='0px 0px 0px 0px';var threshold=0.25;var root=null;if(typeof window.bndlrPOSShowBundles!=='undefined'&&window.bndlrPOSShowBundles===true){rootMargin='0px 0px 500px 0px';threshold=0;root=document;}
if(typeof IntersectionObserver!=='undefined'){var options={root:root,rootMargin:rootMargin,threshold:threshold}
var callback=function(entries,observer){for(var i=0;i<entries.length;i++){var entry=entries[i];if(entry.isIntersecting||entry.boundingClientRect.top<0){observer.unobserve(entry.target);if(typeof customCallback!=='function'){idleCallback(function(){bndlr.displayBundle(bundle,keySelector)});}else{customCallback();}}}};var observer=new IntersectionObserver(callback,options);var target=document.querySelector(keySelector);if(target!==null){observer.observe(target);}}else{this.displayBundle(bundle,keySelector);}},displayBundle:function(bundle,keySelector){this.widgetCanBeDisplayed=true;var bundleKey=utils.getRandomString();var discountedProducts=Library.DiscountedProducts.get(bundle.id);discountedProducts=this.modifyProductsPrices(bundle,discountedProducts);Library.DiscountedProducts.set(bundle.id,discountedProducts);Tools.Products.setRequiredVariantLinePrices(Library,bundle);var requiredProducts=Library.RequiredProducts.get(bundle.id);var allProducts=Library.Products.get();var orderedProducts=this.objectToArray(bundle.products);var bundleRequiredProducts=[];if(bundle.minimum_requirements=='specific_products'){bundleRequiredProducts=this.objectToArray(bundle.required_products);}
var bundleName=bundle.name.replace('"','').replace(/<[^>]*>?/gm,'');var canDisplayBundle=true;var hideProductsIfImageIsSet=true;if(bundle.mix_and_match_display==='true'&&bundle.minimum_requirements==='n_products'){try{var bundleHtml=''+
'<div id="_bndl_'+bundleKey+'" class="bndlr-container bndlr-mixnmatch" data-bndlr-key="'+bundleKey+'" data-bundle-name="'+bundleName+'">'+
'<div class="bndlr-products-container">';bundleHtml+=widgetView.getBundleTitle(bundle.title,bundle.name,bundle.id);bundleHtml+='<div class="bndlr-bundle-description">'+bundle.description+'</div>';bundleHtml+='<div class="bndlr-inner-products-container">';if(bundle.product_level=='variant'&&bundle.bundle_image!==''){bundleHtml+=widgetView.getBundleImage(bundle.bundle_image,bundle.title,bundle.name,bundle.id);}
bundleHtml+='<div class="bndlr-mnm-available-products">';for(var p=0;p<orderedProducts.length;p++){var productId=orderedProducts[p].id;if(typeof discountedProducts[productId]!=='undefined'){var isRequired=(orderedProducts[p].required===1?true:false);var productHtml=this.getMixAndMatchProductHtml(discountedProducts[productId],bundle,isRequired);bundleHtml+=productHtml;}}
bundleHtml+='</div>';bundleHtml+='<div class="bndlr-mnm-second-container">';bundleHtml+='<div class="bndlr-mnm-selected-products-title bndlr-hidden bndlr-toggle">';bundleHtml+='Your bundle:';bundleHtml+='</div>';bundleHtml+='<div class="bndlr-mnm-selected-products bndlr-hidden bndlr-toggle">';bundleHtml+='</div>';bundleHtml+='<div class="bndlr-mnm-add-to-cart-wrapper">';bundleHtml+='<span class="bndlr-mnm-instructions-text">';bundleHtml+=this.MixNMatch.getInstructionsText(bundle,0,true);bundleHtml+='</span>';if(bundle.total_price_text!==''){bundleHtml+='<div class="bndlr-mnm-total-price bndlr-hidden"></div>';}
var addToCartButtonText=bundle.button_text;bundleHtml+='<div class="bndlr-add-bundle-to-cart bndlr-hidden" title="'+addToCartButtonText.replace('"','')+'" data-active="'+this.widgetCanBeDisplayed.toString()+'" tabindex="0" role="button">'+addToCartButtonText+'</div>';bundleHtml+='<div class="bndlr-bundle-checkout-warning bndlr-hidden">'+bundle.discount_warning+'</div>';bundleHtml+='</div>';bundleHtml+='</div>';bundleHtml+='</div>';bundleHtml+='</div>';bundleHtml+='</div>';var htmlSelector='.bundler-target-element[data-bundle="'+bundle.id+'"]';if(typeof window.BndlrIsBundleLandingPage!=='undefined'&&window.BndlrIsBundleLandingPage===true){var bundleStatusBox='<div id="bndlr-mnm-status-box" class="bndlr-visibility-visible" data-bndlr-bundle-key="'+bundleKey+'">'+
'<div class="bdnlr-mnm-status-box-products-container">'+
'</div>'+
'<div class="bdnlr-mnm-status-box-info-container">'+
'<span class="bndlr-mnm-instructions-text">'+
this.MixNMatch.getInstructionsText(bundle,0,true)+
'</span>'+
'<div class="bndlr-status-box-add-to-cart bndlr-hidden" title="'+addToCartButtonText.replace('"','')+'" data-active="'+this.widgetCanBeDisplayed.toString()+'" tabindex="0" role="button">'+addToCartButtonText+'</div>';'</div>'+
'</div>';$('body').append(bundleStatusBox);this.MixNMatch.showHideStatusBox();}}catch(e){bundlerConsole.log(e);canDisplayBundle=false;}}else{try{var bundleHtml=''+
'<div id="_bndl_'+bundleKey+'" class="bndlr-container" data-bndlr-key="'+bundleKey+'" data-bundle-name="'+bundleName+'">'+
'<div class="bndlr-products-container">';bundleHtml+=widgetView.getBundleTitle(bundle.title,bundle.name,bundle.id);bundleHtml+='<div class="bndlr-bundle-description">'+this.replacePricePlaceholders(bundle.description,bundle,bundleKey)+'</div>';bundleHtml+='<div class="bndlr-inner-products-container">';if(bundle.product_level=='variant'&&bundle.bundle_image!==''){bundleHtml+=widgetView.getBundleImage(bundle.bundle_image,bundle.title,bundle.name,bundle.id);}
var style=''
if(bundle.product_level=='variant'&&bundle.bundle_image!==''&&hideProductsIfImageIsSet){style='display:none;';}
bundleHtml+='<div style="'+style+'">';for(var p=0;p<bundleRequiredProducts.length;p++){var productId=bundleRequiredProducts[p].id;if(typeof requiredProducts[productId]!=='undefined'){var productHtml=this.getProductHtml(requiredProducts[productId],bundle,true);bundleHtml+=productHtml;}}
for(var p=0;p<orderedProducts.length;p++){var productId=orderedProducts[p].id;if(typeof discountedProducts[productId]!=='undefined'){var productHtml=this.getProductHtml(discountedProducts[productId],bundle);bundleHtml+=productHtml;}}
bundleHtml+='</div>';if(bundle.product_level=='variant'&&bundle.bundle_image!==''&&bundle.list_product_names==='true'&&hideProductsIfImageIsSet){bundleHtml+='<div class="bndlr-product-names-list">';var listSeparator=', ';for(var p=0;p<orderedProducts.length;p++){var productId=orderedProducts[p].id;if(typeof discountedProducts[productId]!=='undefined'){var productHtml=this.getProductListName(discountedProducts[productId],bundle,false,bundleKey);bundleHtml+=productHtml+listSeparator;}}
for(var p=0;p<bundleRequiredProducts.length;p++){var productId=bundleRequiredProducts[p].id;if(typeof requiredProducts[productId]!=='undefined'){var productHtml=this.getProductListName(requiredProducts[productId],bundle,true,bundleKey);bundleHtml+=productHtml+listSeparator;}}
bundleHtml=bundleHtml.replace(/,\s*$/,'').replace(/,<br \/>$/,'');bundleHtml+='</div>';}
if(bundle.total_price_text!==''){bundleHtml+='<div class="bndlr-total-price">'+this.getTotalPriceText(bundle,bundleKey)+'</div>';}
var addToCartButtonText=bundle.button_text;if(this.widgetCanBeDisplayed===false){addToCartButtonText='Out of stock';}
bundleHtml+='<div class="bndlr-add-to-cart" title="'+addToCartButtonText.replace('"','')+'" data-active="'+this.widgetCanBeDisplayed.toString()+'" tabindex="0" role="button">'+addToCartButtonText+'</div>';bundleHtml+='</div>';bundleHtml+='<div class="bndlr-bundle-checkout-warning">'+bundle.discount_warning+'</div>';bundleHtml+='</div>';bundleHtml+='</div>';var htmlSelector='.bundler-target-element[data-bundle="'+bundle.id+'"]';}catch(e){bundlerConsole.log(e);canDisplayBundle=false;}}
if(canDisplayBundle===false){bundlerConsole.log('Skipping bundle',bundle.name);return true;}
if(typeof keySelector==='string'){$element=$(keySelector);}else{$element=$(htmlSelector);}
if($element.length>0){var $bundle=$(bundleHtml);if(this.widgetCanBeDisplayed===false){$bundle.attr('data-available','false');}
var $addtcButton=$bundle.find('.bndlr-add-to-cart');$addtcButton.off('click');$addtcButton.click(function(e){bndlr.addToCart($(this));e.stopPropagation();});$element.html($bundle);bndlr.renderedBundles[bundleKey]=true;this.setProductWidth(htmlSelector,$element);}
idleCallback(function(){var self=this;debounce('reposition-plus-signs',function(){self.repositionPlusSigns('#_bndl_'+bundleKey,$bundle);},200);$(document).trigger('bundler_bundle_widget_created');try{var event=new CustomEvent("bundler:bundle_widget_created",{detail:{products:JSON.parse(JSON.stringify(allProducts))}});document.dispatchEvent(event);}catch(e){bundlerConsole.log(e);}}.bind(bndlr));},repositionPlusSignsTimeout:false,repositionPlusSigns:function(selector,$element){if(typeof $element!=='undefined'){if($element.length>0){this.repositionPlusSign($element);this.repositionPlusSignForMixNMatch($element);}}else if(typeof selector!=='undefined'){var el=$(selector);if(el.length>0){this.repositionPlusSign(el);this.repositionPlusSignForMixNMatch(el);}}else{$('.bundler-target-element .bndlr-container').each(function(key,el){bndlr.repositionPlusSign($(el));});$('.bundler-target-element .bndlr-mnm-selected-products').each(function(key,el){bndlr.repositionPlusSignForMixNMatch($(el));});}},repositionPlusSign:function($el){if($el.hasClass('bndlr-mixnmatch')||$el.find('.bndlr-mixnmatch').length){return true;}
var totalHeight=0;$el.find('.bndlr-product').each(function(key,el){totalHeight+=$(el).outerHeight(true);});if(Math.floor(totalHeight)==Math.floor($el.find('.bndlr-inner-products-container div').first().height())){$el.find('.bndlr-inner-products-container').addClass('bndlr-break-plus-signs');}else{$el.find('.bndlr-inner-products-container').removeClass('bndlr-break-plus-signs');}},repositionPlusSignForMixNMatch:function($el){var totalHeight=0;$el=$el.find('.bndlr-mnm-selected-products').first();if(typeof $el!=='undefined'){$el.find('.bndlr-product').each(function(key,el){totalHeight+=$(el).outerHeight(true);});if(Math.floor(totalHeight)==Math.floor($el.height())){$el.closest('.bndlr-inner-products-container').addClass('bndlr-break-plus-signs');}else{$el.closest('.bndlr-inner-products-container').removeClass('bndlr-break-plus-signs');}}},setProductWidth:function(bundleSelector,$element){if(typeof $element==='undefined'){$element=$(bundleSelector);}
if($element.length===0){return;}
var boundingClientWidth=$element[0].getBoundingClientRect().width;var paddingValue=14;var isInPopup=false
if($element.closest('.bundles-bundler-hop-full-page-overlay').length>0){var bodyWidth=$('body')[0].getBoundingClientRect().width;if(bodyWidth<400){boundingClientWidth=bodyWidth*0.9-18;if(boundingClientWidth<70){boundingClientWidth=$('body')[0].offsetWidth*0.9-18;}
isInPopup=true;}else{boundingClientWidth=bodyWidth*0.9-18;isInPopup=true;}
paddingValue=0;}
if(boundingClientWidth>0){boundingClientWidth-=paddingValue;var productsNum=$(bundleSelector+' .bndlr-product').length;if(productsNum>=2){if(typeof window.BndlrIsBundleLandingPage!=='undefined'&&window.BndlrIsBundleLandingPage){var productWidth=340;if(typeof clientSpecifics['product_dimensions']!=='undefined'){productWidth=clientSpecifics['product_dimensions'].getLadingPageWidth()+10;}}else{var productWidth=240;if(typeof clientSpecifics['product_dimensions']!=='undefined'){productWidth=clientSpecifics['product_dimensions'].getStandardWidth()+10;}}
var minProducts=2;var minProductWidth=140;if(boundingClientWidth<=550){minProductWidth=120;}
if(isInPopup){minProductWidth=70;}
if(productsNum>6){minProducts=6;}else{minProducts=productsNum;}
if(productWidth*minProducts>boundingClientWidth){var perfectWidth=boundingClientWidth/minProducts-10;var $products=$element.find('.bndlr-product');if(perfectWidth>minProductWidth&&perfectWidth<productWidth){$products.css({'max-width':Math.floor(perfectWidth)});}else{var widthFound=false;if(minProducts%2===0){perfectWidth=boundingClientWidth/2-10;if(perfectWidth>minProductWidth&&perfectWidth<220){$products.css({'max-width':Math.floor(perfectWidth)});widthFound=true;}}
var currentProductsNum=minProducts-1;while(widthFound===false&&currentProductsNum>=1){perfectWidth=boundingClientWidth/currentProductsNum-10;if(perfectWidth>minProductWidth&&perfectWidth<productWidth){$products.css({'max-width':Math.floor(perfectWidth)});widthFound=true;}else{currentProductsNum--;}}
if(widthFound===false){$products.css({'max-width':Math.floor(minProductWidth-10)});}}}}}},getTotalPriceText:function(bundle,bundleKey){var pricesHtmls=this.getPricesHtmls(bundle,bundleKey);var modifiedText=bundle.total_price_text;if(pricesHtmls.raw_original_price<=pricesHtmls.raw_discounted_price){modifiedText=modifiedText.replace(/{original_price}\s{0,1}/g,'');}
modifiedText=modifiedText.replace(/{original_price}/g,pricesHtmls.original_price_html);modifiedText=modifiedText.replace(/{discounted_price}/g,pricesHtmls.discounted_price_html);modifiedText=modifiedText.replace(/{savings}/g,pricesHtmls.savings_html);return modifiedText;},getMixNMatchTotalPriceText:function(bundle,products){var pricesHtmls=this.getPricesHtmls(null,null,products);var modifiedText=bundle.total_price_text;if(pricesHtmls.raw_original_price<=pricesHtmls.raw_discounted_price){modifiedText=modifiedText.replace(/{original_price}\s{0,1}/g,'');}
modifiedText=modifiedText.replace(/{original_price}/g,pricesHtmls.original_price_html);modifiedText=modifiedText.replace(/{discounted_price}/g,pricesHtmls.discounted_price_html);modifiedText=modifiedText.replace(/{savings}/g,pricesHtmls.savings_html);return modifiedText;},replacePricePlaceholders:function(string,bundle,bundleKey){var pricesHtmls=this.getPricesHtmls(bundle,bundleKey);var modifiedText=string.replace(/{original_price}/g,pricesHtmls.original_price_html);modifiedText=modifiedText.replace(/{discounted_price}/g,pricesHtmls.discounted_price_html);modifiedText=modifiedText.replace(/{savings}/g,pricesHtmls.savings_html);return modifiedText;},getPricesHtmls:function(bundle,bundleKey,products){var originalPrice=0;var discountedPrice=0;if(typeof products==='undefined'){var bundleId=bundle.id;var discountedProducts=Library.DiscountedProducts.get(bundleId);for(var productId in discountedProducts){if(discountedProducts.hasOwnProperty(productId)){var product=discountedProducts[productId];discountedPrice+=this.getSelectedVariantPrice(product,bundleKey,bundleId);originalPrice+=this.getSelectedVariantOldPrice(product,bundleKey,bundleId);}}
var requiredProducts=Library.RequiredProducts.get(bundleId);for(var productId in requiredProducts){if(requiredProducts.hasOwnProperty(productId)){var product=requiredProducts[productId];discountedPrice+=this.getSelectedVariantPrice(product,bundleKey,bundleId,true);originalPrice+=this.getSelectedVariantOldPrice(product,bundleKey,bundleId,true);}}}else{for(var key in products){if(products.hasOwnProperty(key)){var dPrice=0;var oPrice=0;var productVariant=products[key].variants[0];oPrice=this.getVariantOldPrice(productVariant);dPrice=this.getVariantDiscountedPrice(productVariant);discountedPrice+=dPrice;originalPrice+=oPrice;}}}
var savings=originalPrice-discountedPrice;if(savings<0){savings=0;}
var currency=this.getDefaultCurrency();var originalPriceHtml=this.formatPrice(originalPrice);originalPriceHtml=htmlUtils.moneySpan(originalPriceHtml,currency.toLowerCase(),'bndlr-old-price','',originalPrice);var discountedPriceHtml=this.formatPrice(discountedPrice,undefined,'down');discountedPriceHtml=htmlUtils.moneySpan(discountedPriceHtml,currency.toLowerCase(),'bndlr-new-price','',discountedPrice);var savingsHtml=this.formatPrice(savings);savingsHtml=htmlUtils.moneySpan(savingsHtml,currency.toLowerCase(),'bndlr-savings','',savings);return{'original_price_html':originalPriceHtml,'discounted_price_html':discountedPriceHtml,'savings_html':savingsHtml,'raw_original_price':originalPrice,'raw_discounted_price':discountedPrice};},getSelectedVariant:function(productId,bundleKey,bundleId,forRequiredProduct){if(typeof forRequiredProduct==='undefined'){forRequiredProduct=false;}
var reqProductSelector='';if(forRequiredProduct){reqProductSelector='.bndlr-product[data-required="true"]';}else{reqProductSelector='.bndlr-product[data-required="false"]';}
if(typeof this.renderedBundles[bundleKey]!=='undefined'){if(typeof bundleKey!=='undefined'&&bundleKey!==''){var variantId=$('#_bndl_'+bundleKey).find(reqProductSelector+' select.bndlr-select-variant.id_'+productId+' option:selected').val();}else if(typeof bundleId!=='undefined'&&bundleId!==''){console.log('Retrieving selected variant id by bundle id');var variantId=$('[data-bundle="'+bundleId+'"] '+reqProductSelector+' select.bndlr-select-variant.id_'+productId+' option:selected').val();}else{bundlerConsole.log('bundle id and bundle key are missing');var variantId=$(reqProductSelector+' select.bndlr-select-variant.id_'+productId+' option:selected').val();}}
if(typeof variantId==='undefined'){var bundle=this.getBundleById(bundleId);if(forRequiredProduct){var productsLib=Library.RequiredProducts.get(bundleId);}else{var productsLib=Library.DiscountedProducts.get(bundleId);}
if(productsLib[productId]!=='undefined'&&((forRequiredProduct===false&&typeof bundle.products!=='undefined'&&typeof bundle.products[productId]!=='undefined')||(forRequiredProduct&&typeof bundle.required_products!=='undefined'&&typeof bundle.required_products[productId]!=='undefined'))){var productVariants=productsLib[productId].variants;if(forRequiredProduct){var productFromBundle=bundle.required_products[productId];}else{var productFromBundle=bundle.products[productId];}
for(var vi=0;vi<productVariants.length;vi++){if(bundle.product_level==='product'&&productVariants[vi].available==false){continue;}
if(typeof productFromBundle.variants[productVariants[vi].id]!=='undefined'){return productVariants[vi].id;}}}
return false;}else{return variantId;}},getPrice:function(price){if(typeof price.indexOf==='function'&&price.indexOf('.')!==-1){price=price*100;}
return price;},getTotalOriginalAmount:function(bundle,products,fromPOS,bundleKey){var totalOriginalAmount=0;for(var key in products){if(products.hasOwnProperty(key)){var productId=products[key].product_id;if(fromPOS&&typeof products[key].type!=='undefined'&&products[key].type==='required'){continue;}
if(typeof bundle.products[productId]!=='undefined'){var selectedVariant=fromPOS?false:this.getSelectedVariant(productId,bundleKey,bundle.id);var quantity=bundle.products[productId].quantity;if(fromPOS){quantity=products[key].quantity;}
if(selectedVariant===false){totalOriginalAmount+=this.getPrice(products[key].variants[0].price)*quantity;}else{for(var i=0;i<products[key].variants.length;i++){if(selectedVariant==products[key].variants[i].id){totalOriginalAmount+=this.getPrice(products[key].variants[i].price)*quantity;}}}}}}
return totalOriginalAmount;},applyPercentageDiscount:function(bundle,products,discountRatio,fromPOS,bundleKey,onlyToSelectedVariant){var totalAppliedAmount=0;for(var key in products){if(products.hasOwnProperty(key)){var productId=products[key].product_id;if(fromPOS&&typeof products[key].type!=='undefined'&&products[key].type==='required'){continue;}
if(typeof bundle.products[productId]!=='undefined'||(bundle.product_target_type==='all_products'&&bundle.minimum_requirements==='volume_discounts')){if(bundle.product_target_type==='all_products'&&bundle.minimum_requirements==='volume_discounts'){var quantity=products[key].quantity;}else{var quantity=bundle.products[productId].quantity;}
if(fromPOS){quantity=products[key].quantity;}
var selectedVariant=false;if(onlyToSelectedVariant){selectedVariant=fromPOS?false:this.getSelectedVariant(productId,bundleKey,bundle.id);if(selectedVariant===false){selectedVariant=products[key].variants[0].id;}}
for(var i=0;i<products[key].variants.length;i++){if(onlyToSelectedVariant===false||selectedVariant==products[key].variants[i].id){var productPrice=this.getPrice(products[key].variants[i].price);var price=this.getPrice(products[key].variants[i].price)*quantity;var compareAtLinePrice=this.priceOrZero(products[key].variants[i].compare_at_price)*quantity;products[key].variants[i].linePrice=price;products[key].variants[i].compareAtLinePrice=compareAtLinePrice;var discountAm=Math.round(productPrice*discountRatio)*quantity;if(fromPOS&&typeof window.bndlrNoDecimalsInDiscount!=='undefined'&&window.bndlrNoDecimalsInDiscount){discountAm=Math.round(discountAm/100)*100;}
products[key].variants[i].discountedPrice=price-discountAm;if(typeof products[key].variants[i].deliveriesNum==='number'&&products[key].variants[i].deliveriesNum>1){products[key].variants[i].discountedPrice*=products[key].variants[i].deliveriesNum;}
products[key].variants[i].discountedPriceQuantity=quantity;totalAppliedAmount+=discountAm;if(onlyToSelectedVariant===true){i=products[key].variants.length;}}}}}}
return totalAppliedAmount;},applyRemainingDiscount:function(bundle,products,fromPOS,bundleKey,maxDiscount,appliedAmount){if(appliedAmount!==maxDiscount){var discountDifference=maxDiscount-appliedAmount;for(var key in products){if(products.hasOwnProperty(key)){var productId=products[key].product_id;if(fromPOS&&typeof products[key].type!=='undefined'&&products[key].type==='required'){continue;}
if(typeof bundle.products[productId]!=='undefined'){var selectedVariant=fromPOS?false:this.getSelectedVariant(productId,bundleKey,bundle.id);if(selectedVariant===false){selectedVariant=products[key].variants[0].id;}
for(var i=0;i<products[key].variants.length;i++){if(selectedVariant==products[key].variants[i].id){if(products[key].variants[i].discountedPrice>discountDifference){products[key].variants[i].discountedPrice-=discountDifference;discountDifference-=discountDifference;}
i=products[key].variants.length;}}}}}}},modifyProductsPrices:function(bundle,products,fromPOS,bundleKey){function setDiscountedKeysFixedAmount(self,variant,quantity,totalOriginalAmount,maxDiscount,totalDiscountedAmount){var price=self.getPrice(variant.price)*quantity;var discountablePrice=price;var compareAtLinePrice=self.priceOrZero(variant.compare_at_price)*quantity;if(price>compareAtLinePrice){compareAtLinePrice=price;}
variant.linePrice=price;variant.compareAtLinePrice=compareAtLinePrice;if(totalOriginalAmount<=maxDiscount){variant.discountedPrice=0;}else{var discountAmount=Math.round((discountablePrice/totalOriginalAmount)*maxDiscount);variant.discountedPrice=discountablePrice-discountAmount;totalDiscountedAmount+=discountAmount;}
if(typeof variant.deliveriesNum==='number'&&variant.deliveriesNum>1){variant.discountedPrice*=variant.deliveriesNum;}
variant.discountedPriceQuantity=quantity;return totalDiscountedAmount;}
if(bundle.mix_and_match_display==='true'&&bundle.minimum_requirements==='n_products'&&fromPOS!==true){for(var key in products){if(products.hasOwnProperty(key)){var productId=products[key].product_id;if(typeof bundle.products[productId]!=='undefined'){var quantity=bundle.products[productId].quantity;for(var i=0;i<products[key].variants.length;i++){var price=this.getPrice(products[key].variants[i].price);var compareAtLinePrice=this.priceOrZero(products[key].variants[i].compare_at_price);if(price>compareAtLinePrice){compareAtLinePrice=price;}
products[key].variants[i].linePrice=price;products[key].variants[i].compareAtLinePrice=price;products[key].variants[i].discountedPrice=price;products[key].variants[i].discountedPriceQuantity=1;}}}}}else{if(fromPOS===true){var volumeDiscount=[];for(var pkey in products){if(products.hasOwnProperty(pkey)){if(typeof products[pkey]!=='undefined'&&typeof products[pkey].volume_discount!=='undefined'){discountType=products[pkey].volume_discount.discount_type;volumeDiscount=products[pkey].volume_discount;bundle.discount_type=volumeDiscount.discount_type;bundle.percentage_value=volumeDiscount.discount_value;bundle.fixed_amount_value=volumeDiscount.discount_value;break;}}}}
if(bundle.discount_type=='percentage'){var ratio=bundle.percentage_value/100;this.applyPercentageDiscount(bundle,products,ratio,fromPOS,bundleKey,false);}else if(bundle.discount_type=='fixed_amount'){var maxDiscount=bundle.fixed_amount_value*100;var totalOriginalAmount=this.getTotalOriginalAmount(bundle,products,fromPOS,bundleKey);var totalDiscountedAmount=0;for(var key in products){if(products.hasOwnProperty(key)){var productId=products[key].product_id;if(fromPOS&&typeof products[key].type!=='undefined'&&products[key].type==='required'){continue;}
if(typeof bundle.products[productId]!=='undefined'){var selectedVariant=fromPOS?false:this.getSelectedVariant(productId,bundleKey,bundle.id);var quantity=bundle.products[productId].quantity;if(fromPOS){quantity=products[key].quantity;}
if(selectedVariant===false){totalDiscountedAmount=setDiscountedKeysFixedAmount(this,products[key].variants[0],quantity,totalOriginalAmount,maxDiscount,totalDiscountedAmount);}else{for(var i=0;i<products[key].variants.length;i++){if(selectedVariant==products[key].variants[i].id){totalDiscountedAmount=setDiscountedKeysFixedAmount(this,products[key].variants[i],quantity,totalOriginalAmount,maxDiscount,totalDiscountedAmount);}}}}}}
this.applyRemainingDiscount(bundle,products,fromPOS,bundleKey,maxDiscount,totalDiscountedAmount);}else if(bundle.discount_type=='fixed_price'){var finalPrice=bundle.fixed_price_value*100;var totalOriginalAmount=this.getTotalOriginalAmount(bundle,products,fromPOS,bundleKey);var discountAmount=totalOriginalAmount-finalPrice;if(discountAmount<0){discountAmount=0;}
var discountRatio=discountAmount/totalOriginalAmount;var totalAppliedAmount=this.applyPercentageDiscount(bundle,products,discountRatio,fromPOS,bundleKey,true);this.applyRemainingDiscount(bundle,products,fromPOS,bundleKey,discountAmount,totalAppliedAmount);}else if(bundle.discount_type=='products_discounts'){for(var key in products){if(products.hasOwnProperty(key)){var productId=products[key].product_id;if(fromPOS&&typeof products[key].type!=='undefined'&&products[key].type==='required'){continue;}
if(typeof bundle.products[productId]!=='undefined'){var quantity=bundle.products[productId].quantity;if(fromPOS){quantity=products[key].quantity;}
for(var i=0;i<products[key].variants.length;i++){var price=this.getPrice(products[key].variants[i].price)*quantity;var compareAtLinePrice=this.priceOrZero(products[key].variants[i].compare_at_price)*quantity;var finalDiscount=bundle.products[productId].discount_amount*100;if(bundle.minimum_requirements==='n_products'){finalDiscount=finalDiscount*quantity;}
if(finalDiscount<0){finalDiscount=0;}
products[key].variants[i].linePrice=price;products[key].variants[i].compareAtLinePrice=compareAtLinePrice;var finalPrice=Math.round(price-finalDiscount);if(finalPrice<0){finalPrice=0;}
products[key].variants[i].discountedPrice=finalPrice;if(typeof products[key].variants[i].deliveriesNum==='number'&&products[key].variants[i].deliveriesNum>1){products[key].variants[i].discountedPrice*=products[key].variants[i].deliveriesNum;}
products[key].variants[i].discountedPriceQuantity=quantity;}}}}}}
return products;},isVariantAvailable:function(variantId,productId,bundle,fromRequiredProducts){var arrayKey='products';if(fromRequiredProducts){arrayKey='required_products';}
if(typeof bundle[arrayKey][productId]!=='undefined'){if(typeof bundle[arrayKey][productId].variants[variantId]!=='undefined'){return true;}}
return false;},getMixAndMatchProductHtml:function(product,bundle,isRequired){var variantSelectDisplay='';var options='';var variants='<select class="bndlr-select-variant id_'+product.id+'" aria-label="variant" name="variant_id" ';var allowedVariants=[];for(var i=0;i<product.variants.length;i++){if(this.isVariantAvailable(product.variants[i].id,product.id,bundle,false)){if(product.variants[i].available==false){continue;}
allowedVariants.push(product.variants[i]);}}
var variantsAreAvailable=true;if(allowedVariants.length===0){this.widgetCanBeDisplayed=false;variantsAreAvailable=false;console.warn('Bundler: The configured variants for product "'+product.title+'" are not available. If you set the app to hide unavailable variants, then please make sure that the selected variants are in stock. If the issue persists, try to edit the bundle, select the products again and save the bundle.');}
if(allowedVariants.length<=1){variantSelectDisplay='display:none;';}
variants+='style="'+variantSelectDisplay+'"';variants+='>';for(var i=0;i<allowedVariants.length;i++){var name=this.getVariantTitle(allowedVariants[i]);var dataAttrs='';variants+='<option value="'+allowedVariants[i].id+'" '+dataAttrs+'>'+name+'</option>';}
variants+='</select>';var productUrl=nav.getRootUrl(true)+'products/'+product.handle;var featuredImage=this.getFeaturedImage(product,'',bundle.id);var linkTarget='';var productTitle=product.title;var productTitleAttr=productTitle.replace('"','').replace(/<[^>]*>?/gm,'');var addToBundleText='Add';var addToBundleButtonClass='';if(variantsAreAvailable===false){addToBundleText='Out of stock';addToBundleButtonClass='bndlr-no-click';}
var html=''+
'<div class="bndlr-product bndlr-mix-and-match bndlr-no-plus-sign" '+
'data-quantity="1" '+
'data-required="false" '+
'data-mnm-required="'+isRequired.toString()+'" '+
'data-available="'+variantsAreAvailable.toString()+'" '+
'data-product-id="'+product.id+'" '+
'>';html+=''+
'<span class="bndlr-product-image-url">'+
'<img title="'+productTitleAttr+'" class="bndlr-product-image id_'+product.id+'" src="'+this.getProductImage(featuredImage,'500X500')+'" '+this.getSrcSet(featuredImage)+'>'+
'</span>';html+=''+
'<div class="bndlr-product-qn-container">';html+=''+
'<span class="bndlr-product-title" title="'+productTitleAttr+'">'+productTitle+'</span>';html+=''+
'</div>'+
'<div class="bndlr-product-price id_'+product.id+'">'+
this.getProductPriceHtml(product,'',bundle.id,true)+
'</div>'+
'<div class="bndlr-bottom-pusher"></div>'+
options+
variants+
'<div class="bndlr-add-to-bundle '+addToBundleButtonClass+'" title="'+addToBundleText+'" tabindex="0" role="button">'+addToBundleText+'</div>'+
'</div>'+
'';return html;},getStatusBoxProductHtml:function(lineItem,product,bundle){var productUrl=nav.getRootUrl(true)+'products/'+product.handle;var variantName='';var featuredImage='';for(var i=0;i<product.variants.length;i++){if(lineItem.variant_id==product.variants[i].id){if(typeof product.variants[i].featured_image!=='undefined'&&product.variants[i].featured_image!==null){featuredImage=product.variants[i].featured_image.src;}else{featuredImage=this.getVariantsFeaturedImage(product,product.variants[i]);}
variantName=product.variants[i].name;}}
var customProductImage=this.getCustomProductImage(bundle.id,product.id);if(customProductImage!==''){featuredImage=customProductImage;}
var linkTarget='';var variantNameAttr=variantName.replace('"','').replace(/<[^>]*>?/gm,'');var html=''+
'<div class="bndlr-status-box-product">';if(lineItem.quantity>1){html+='<div class="bndlr-status-box-product-quantity">'+lineItem.quantity+'x'+'</div>';}
html+=''+
'<span class="bndlr-status-box-product-url">'+
'<img title="'+variantNameAttr+'" class="bndlr-status-box-product-image addtc-np" src="'+this.getProductImage(featuredImage,'500X500')+'" '+this.getSrcSet(featuredImage)+'>'+
'</span>';html+='</div>';return html;},getSelectedProductHtml:function(lineItem,product,bundle,lineItemKey){var variantSelectDisplay='';var options='';var productUrl=nav.getRootUrl(true)+'products/'+product.handle;var variantName='';var featuredImage='';for(var i=0;i<product.variants.length;i++){if(lineItem.variant_id==product.variants[i].id){if(typeof product.variants[i].featured_image!=='undefined'&&product.variants[i].featured_image!==null){featuredImage=product.variants[i].featured_image.src;}else{featuredImage=this.getVariantsFeaturedImage(product,product.variants[i]);}
variantName=product.variants[i].name;}}
var customProductImage=this.getCustomProductImage(bundle.id,product.id);if(customProductImage!==''){featuredImage=customProductImage;}
var linkTarget='';var variantNameAttr=variantName.replace('"','').replace(/<[^>]*>?/gm,'');var html=''+
'<div class="bndlr-product bndlr-mix-and-match" data-line-item-key="'+lineItemKey+'" data-variant-id="'+lineItem.variant_id+'">';html+=''+
'<span class="bndlr-product-image-url">'+
'<img title="'+variantNameAttr+'" class="bndlr-product-image id_'+product.id+'" src="'+this.getProductImage(featuredImage,'500X500')+'" '+this.getSrcSet(featuredImage)+'>'+
'</span>';html+=''+
'<div class="bndlr-product-qn-container">'+
'<div class="bndlr-product-quantity">'+
lineItem.quantity+'x'+
'</div>';html+=''+
'<span class="bndlr-product-title" title="'+variantNameAttr+'">'+variantName+'</span>';html+=''+
'</div>'+
'<div class="bndlr-bottom-pusher"></div>'+
'<div class="bndlr-close" tabindex="0"></div>'+
'</div>'+
'';return html;},getProductHtml:function(product,bundle,fromRequiredProducts){var variantSelectDisplay='';var options='';var variants='<select class="bndlr-select-variant id_'+product.id+'" aria-label="variant" name="variant_id" ';if(typeof fromRequiredProducts==='undefined'){fromRequiredProducts=false;}
var allowedVariants=[];for(var i=0;i<product.variants.length;i++){if(this.isVariantAvailable(product.variants[i].id,product.id,bundle,fromRequiredProducts)){if(product.variants[i].available==false){continue;}
allowedVariants.push(product.variants[i]);}}
var variantsAreAvailable=true;if(allowedVariants.length===0){this.widgetCanBeDisplayed=false;variantsAreAvailable=false;console.warn('Bundler: The configured variants for product "'+product.title+'" in "'+bundle.name+'" bundle are not available. If you set the app to hide unavailable variants, then please make sure that the selected variants are in stock. If the issue persists, try to edit the bundle, select the products again and save the bundle.');}
if(allowedVariants.length<=1){variantSelectDisplay='display:none;';}
variants+='style="'+variantSelectDisplay+'"';variants+='>';for(var i=0;i<allowedVariants.length;i++){var name=this.getVariantTitle(allowedVariants[i]);var dataAttrs='';variants+='<option value="'+allowedVariants[i].id+'" '+dataAttrs+'>'+name+'</option>';}
variants+='</select>';var productUrl=nav.getRootUrl(true)+'products/'+product.handle;var featuredImage=this.getFeaturedImage(product,'',bundle.id,fromRequiredProducts);var linkTarget='';var productTitle=product.title;var productTitleAttr=productTitle.replace('"','').replace(/<[^>]*>?/gm,'');var productQuantity=this.getProductQuantity(product.id,bundle,fromRequiredProducts);var html=''+
'<div class="bndlr-product" '+
'data-quantity="'+productQuantity+'" '+
'data-required="'+fromRequiredProducts.toString()+'" '+
'data-available="'+variantsAreAvailable.toString()+'" '+
'data-product-id="'+product.id+'" '+
'>';html+=''+
'<span class="bndlr-product-image-url">'+
'<img title="'+productTitleAttr+'" class="bndlr-product-image id_'+product.id+'" src="'+this.getProductImage(featuredImage,'500X500')+'" '+this.getSrcSet(featuredImage)+'>'+
'</span>';html+=''+
'<div class="bndlr-product-qn-container">'+
this.getQuantityHtml(productQuantity);html+=''+
'<span class="bndlr-product-title" title="'+productTitleAttr+'">'+productTitle+'</span>';html+=''+
'</div>'+
'<div class="bndlr-product-price id_'+product.id+'">'+
this.getProductPriceHtml(product,'',bundle.id,!fromRequiredProducts)+
'</div>'+
'<div class="bndlr-bottom-pusher"></div>'+
options+
variants+
'<div '+
'class="bndlr-product-overlay" '+
'style="display: var(--preproduct-'+(fromRequiredProducts?'required-':'')+product.id+'-overlay-display, none);" '+
'>'+
'<div '+
'class="bndlr-product-overlay-checkmark" '+
'>'+htmlUtils.svgCheckmarkPreselected+'</div>'+
'</div>'+
'</div>'+
'';return html;},getProductListName:function(product,bundle,requiredProduct,bundleKey){var productUrl=nav.getRootUrl(true)+'products/'+product.handle;var productTitleAttr=product.title.replace('"','').replace(/<[^>]*>?/gm,'');var linkTarget='';var html=''+
this.getProductQuantityHtml(product.id,bundle,requiredProduct)+
'<a href="'+productUrl+'" class="bndlr-product-title" '+linkTarget+' title="'+productTitleAttr+'">'+product.title+'</a>'+
'';return html;},getProductImage:function(imageSrc,size){if(imageSrc===null){imageSrc='//cdn.shopify.com/s/files/1/0533/2089/files/placeholder-images-image_large.png?v=1530129081';}else{var resizeMatches=imageSrc.match(/_\d+x\d+\./gi);var resizeMatches2=imageSrc.match(/\d+x\.(jpg|png)\?/gi);if(imageSrc.indexOf('shopify')!==-1&&imageSrc.indexOf('@')===-1&&resizeMatches===null&&resizeMatches2===null){imageSrc=imageSrc.replace(/\.jpg\?/,"_"+size+'.jpg?');imageSrc=imageSrc.replace(/\.jpeg\?/,"_"+size+'.jpeg?');imageSrc=imageSrc.replace(/\.png\?/,"_"+size+'.png?');imageSrc=imageSrc.replace(/\.JPG\?/,"_"+size+'.JPG?');imageSrc=imageSrc.replace(/\.JPEG\?/,"_"+size+'.JPEG?');imageSrc=imageSrc.replace(/\.PNG\?/,"_"+size+'.PNG?');}}
return imageSrc;},getSrcSet:function(imageSrc,valueOnly){if(typeof valueOnly==='undefined'){valueOnly=false;}
if(typeof window.BndlrIsBundleLandingPage!=='undefined'&&window.BndlrIsBundleLandingPage){var sizes=[318,];}else{var sizes=[218,];}
if(typeof clientSpecifics['image_dimensions']!=='undefined'){sizes=clientSpecifics['image_dimensions'].getSizes();}
var srcset='';var sizeMultiplier=1;for(var i=0;i<sizes.length;i++){srcset+=this.getProductImage(imageSrc,sizes[i]*sizeMultiplier+'X'+sizes[i]*3*sizeMultiplier)+' '+sizes[i]+'w,';}
var sizesAttribute='';sizesAttribute=sizes[0]+'px';srcset=srcset.replace(/,$/,'');if(valueOnly){return srcset;}else{return 'srcset="'+srcset+'"';}},getProductPriceHtml:function(product,bundleKey,bundleId,canBeDiscounted){if(typeof canBeDiscounted==='undefined'){canBeDiscounted=true;}
var price=this.getSelectedVariantPrice(product,bundleKey,bundleId,!canBeDiscounted);if(canBeDiscounted){var oldPrice=this.getSelectedVariantOldPrice(product,bundleKey,bundleId);}else{var oldPrice=price;}
var showOldPrice=false;if(oldPrice>price){showOldPrice=true;}
var savings=oldPrice-price;var priceHtml=this.formatPrice(price);var oldPriceHtml=this.formatPrice(oldPrice);var currency=this.getDefaultCurrency();if(showOldPrice){var priceHtml=''+
htmlUtils.moneySpan(oldPriceHtml,currency.toLowerCase(),'bndlr-old-price','',oldPrice)+' '+
htmlUtils.moneySpan(priceHtml,currency.toLowerCase(),'bndlr-new-price','data-savings="'+savings+'"',price);}else{var priceHtml=htmlUtils.moneySpan(priceHtml,currency.toLowerCase(),'bndlr-new-price','data-savings="'+savings+'"',price);}
return priceHtml;},getVariantData:function(product,variantId){for(var i=0;i<product.variants.length;i++){if(variantId===false){return product.variants[i]}else{if(product.variants[i].id==variantId){return product.variants[i]}}}},getProductQuantityHtml:function(productId,bundle,isRequiredProduct){var quantity=this.getProductQuantity(productId,bundle,isRequiredProduct);return this.getQuantityHtml(quantity);},getQuantityHtml:function(quantity){if(quantity>1){var html='<div class="bndlr-product-quantity">'+quantity+'x</div>';return html;}
return '';},getProductQuantity:function(productId,bundle,isRequiredProduct){if(isRequiredProduct){if(typeof bundle.required_products[productId]!=='undefined'){return bundle.required_products[productId].quantity;}}else{if(typeof bundle.products[productId]!=='undefined'){return bundle.products[productId].quantity;}}
return 1;},getSelectedVariantPrice:function(product,bundleKey,bundleId,fromRequiredProducts,forOneItem){if(typeof fromRequiredProducts==='undefined'){fromRequiredProducts=false;}
if(typeof forOneItem==='undefined'){forOneItem=false;}
var selectedVariant=this.getSelectedVariant(product.id,bundleKey,bundleId,fromRequiredProducts);for(var i=0;i<product.variants.length;i++){if(selectedVariant===false){return this.getVariantDiscountedPrice(product.variants[i],forOneItem);}else{if(product.variants[i].id==selectedVariant){return this.getVariantDiscountedPrice(product.variants[i],forOneItem);}}}
return product.price;},getVariantDiscountedPrice:function(variant,forOneItem){if(typeof forOneItem==='undefined'){forOneItem=false;}
var price=0;if(typeof variant.discountedPrice==='undefined'){price=variant.linePrice;}else{price=variant.discountedPrice;}
if(forOneItem===true){if(typeof variant.discountedPrice==='undefined'||typeof variant.discountedPriceQuantity==='undefined'){price=price;}else{price=Math.round(price/variant.discountedPriceQuantity);}}
return price;},getFirstNonUndefined:function(){for(var i=0;i<arguments.length;++i){if(typeof arguments[i]!=='undefined'){return arguments[i];}}
return undefined;},getSelectedVariantOldPrice:function(product,bundleKey,bundleId,forRequiredProduct){if(typeof forRequiredProduct==='undefined'){forRequiredProduct=false;}
var selectedVariant=this.getSelectedVariant(product.id,bundleKey,bundleId,forRequiredProduct);for(var i=0;i<product.variants.length;i++){if(selectedVariant===false||product.variants[i].id==selectedVariant){return this.getVariantOldPrice(product.variants[i]);}}
return product.price;},getVariantOldPrice:function(variant){if(typeof variant.linePrice==='undefined'){console.trace();}
return this.getPrice(variant.linePrice);},updatePriceDisplay:function($this){var bundleId=$this.closest('[data-bundle]').attr('data-bundle');var bundleKey=$this.closest('[data-bndlr-key]').attr('data-bndlr-key');var bundle=this.getBundleById(bundleId);var required='false';var canBeDiscounted=true;if($this.closest('[data-required]').attr('data-required')==='true'){required='true';canBeDiscounted=false;var products=Library.RequiredProducts.get(bundleId);}else{required='false';canBeDiscounted=true;var products=Library.DiscountedProducts.get(bundleId);products=this.modifyProductsPrices(bundle,products,false,bundleKey);Library.DiscountedProducts.set(bundleId,products);}
for(var productId in products){if(products.hasOwnProperty(productId)){var priceHtml=this.getProductPriceHtml(products[productId],bundleKey,bundleId,canBeDiscounted);$('#_bndl_'+bundleKey).find('[data-required="'+required+'"] .bndlr-product-price.id_'+productId).html(priceHtml);}}
$('#_bndl_'+bundleKey).find('.bndlr-total-price').html(this.getTotalPriceText(bundle,bundleKey));},processPriceUpdate:function(eventDetails){var $el=$(eventDetails.element);if(typeof eventDetails.price!=='undefined'){var newPrice=eventDetails.price;var pricePerDelivery=newPrice;var deliveriesNum=1;var bundleId=$el.closest('[data-bundle]').attr('data-bundle');var bundleKey=$el.closest('[data-bndlr-key]').attr('data-bndlr-key');if(typeof bundleId==='undefined'||typeof bundleKey==='undefined'){return true;}
var required=false;var canBeDiscounted=true;var isMixNMatch=false;if($el.closest('.bndlr-product.bndlr-mix-and-match[data-line-item-key]').length){var lineItemKey=$el.closest('.bndlr-product.bndlr-mix-and-match[data-line-item-key]').attr('data-line-item-key');isMixNMatch=true;var products=Library.DiscountedProducts.get(bundleId);}else if($el.closest('[data-required]').attr('data-required')==='true'){required=true;canBeDiscounted=false;var products=Library.RequiredProducts.get(bundleId);}else{required=false;canBeDiscounted=true;var products=Library.DiscountedProducts.get(bundleId);}
if(isMixNMatch){for(var key in products){if(products.hasOwnProperty(key)){for(var pi=0;pi<products[key].variants.length;pi++){if(products[key].variants[pi].id==lineItemKey){products[key].variants[pi].price=pricePerDelivery;products[key].variants[pi].priceForAllDeliveries=newPrice;products[key].variants[pi].deliveriesNum=deliveriesNum;products[key].variants[pi].linePriceForAllDeliveries=newPrice*products[key].variants[pi].discountedPriceQuantity;if(products[key].variants[pi].compareAtLinePrice<products[key].variants[pi].linePriceForAllDeliveries){products[key].variants[pi].compareAtLinePrice=products[key].variants[pi].linePriceForAllDeliveries;if(products[key].variants[pi].compare_at_price===''||products[key].variants[pi].compare_at_price===0||products[key].variants[pi].compare_at_price===null){products[key].variants[pi].compare_at_price=newPrice;}}}}}}
Library.DiscountedProducts.set(bundleId,products);this.MixNMatch.refreshDisplay(bundleKey);}else{var productId=$el.closest('[data-product-id]').attr('data-product-id');if(typeof productId!=='undefined'){var selectedVariant=this.getSelectedVariant(productId,bundleKey,bundleId,required);for(var key in products){if(products.hasOwnProperty(key)){if(typeof products[key].variants!=='undefined'){for(var pi=0;pi<products[key].variants.length;pi++){if(products[key].variants[pi].id==selectedVariant){products[key].variants[pi].price=pricePerDelivery;products[key].variants[pi].priceForAllDeliveries=newPrice;products[key].variants[pi].deliveriesNum=deliveriesNum;products[key].variants[pi].linePriceForAllDeliveries=newPrice*products[key].variants[pi].discountedPriceQuantity;if(products[key].variants[pi].compareAtLinePrice<products[key].variants[pi].linePriceForAllDeliveries){products[key].variants[pi].compareAtLinePrice=products[key].variants[pi].linePriceForAllDeliveries;}
if(required){products[key].variants[pi].linePrice=pricePerDelivery;if(typeof deliveriesNum==='number'&&deliveriesNum>1){products[key].variants[pi].price=pricePerDelivery*deliveriesNum;}}}}}}}
if(required){Library.RequiredProducts.set(bundleId,products);}else{Library.DiscountedProducts.set(bundleId,products);}
this.updatePriceDisplay($el);}}}},changeDisplayedImage:function($this){var bundleId=$this.closest('[data-bundle]').attr('data-bundle');var bundleKey=$this.closest('[data-bndlr-key]').attr('data-bndlr-key');var bundle=this.getBundleById(bundleId);var required='false';var canBeDiscounted=true;if($this.closest('[data-required]').attr('data-required')==='true'){required='true';canBeDiscounted=false;var products=Library.RequiredProducts.get(bundleId);}else{required='false';canBeDiscounted=true;var products=Library.DiscountedProducts.get(bundleId);}
for(var productId in products){if(products.hasOwnProperty(productId)){var featuredImage=this.getFeaturedImage(products[productId],bundleKey,bundleId,!canBeDiscounted);if(featuredImage!==null&&featuredImage.length>0){$('.bundler-target-element [data-bndlr-key="'+bundleKey+'"] [data-required="'+required+'"] .bndlr-product-image.id_'+productId).attr('src',this.getProductImage(featuredImage,'500X500'));$('.bundler-target-element [data-bndlr-key="'+bundleKey+'"] [data-required="'+required+'"] .bndlr-product-image.id_'+productId).attr('srcset',this.getSrcSet(featuredImage,true));}}}},getFeaturedImage:function(product,bundleKey,bundleId,fromRequiredProducts){if(typeof fromRequiredProducts==='undefined'){fromRequiredProducts=false;}
var featuredImage='';var productId=product.id;if(fromRequiredProducts===false){var customProductImage=this.getCustomProductImage(bundleId,productId);if(customProductImage!==''){return customProductImage;}}
var selectedVariant=this.getSelectedVariant(productId,bundleKey,bundleId,fromRequiredProducts);if(selectedVariant===false){if(typeof product.featured_image==='undefined'){featuredImage=this.getVariantsFeaturedImage(product,product.variants[0]);}else{featuredImage=product.featured_image;}}else{for(var i=0;i<product.variants.length;i++){if(selectedVariant==product.variants[i].id){if(typeof product.variants[i].featured_image!=='undefined'&&product.variants[i].featured_image!==null){featuredImage=product.variants[i].featured_image.src;}else{featuredImage=this.getVariantsFeaturedImage(product,product.variants[i]);}}}}
if(featuredImage===''){featuredImage=product.featured_image;}
return featuredImage;},getCustomProductImage:function(bundleId,productId){var bundle=this.getBundleById(bundleId);if(typeof bundle.products[productId]!=='undefined'&&typeof bundle.products[productId].image!=='undefined'){return bundle.products[productId].image;}
return '';},getVariantsFeaturedImage:function(product,variant){var imageSrc='';if(typeof variant.image_id!=='undefined'&&variant.image_id!==null){for(var n=0;n<product.images.length;n++){if(product.images[n].id==variant.image_id){if(typeof product.images[n]=='string'){imageSrc=product.images[n];}else{imageSrc=product.images[n].src;}}}}
if(imageSrc.length==0){if(typeof product.featured_image!=='undefined'){return product.featured_image;}else{return product.image.src;}}
return imageSrc;},formatPrice:function(price,currency,directionFor50){price=Math.floor(price);if(typeof Shopify!=='undefined'&&typeof Shopify.currency_settings!=='undefined'&&typeof Shopify.currency_settings.money_format!=='undefined'){price=utils.formatMoney(price,Shopify.currency_settings.money_format,(currency||this.getDefaultCurrency()),directionFor50);}else if(typeof window.money_format!=='undefined'){price=utils.formatMoney(price,window.money_format,(currency||this.getDefaultCurrency()),directionFor50);}else if(typeof window.Theme!=='undefined'&&typeof window.Theme.moneyFormat!=='undefined'){price=utils.formatMoney(price,window.Theme.moneyFormat,(currency||this.getDefaultCurrency()),directionFor50);}else if(typeof window.theme!=='undefined'&&typeof window.theme.moneyFormat!=='undefined'){var moneyFormat=window.theme.moneyFormat;price=utils.formatMoney(price,moneyFormat,(currency||this.getDefaultCurrency()),directionFor50);}else if(typeof window.Currency!=='undefined'&&typeof window.Currency.money_format_no_currency==='string'){price=utils.formatMoney(price,window.Currency.money_format_no_currency,(currency||this.getDefaultCurrency()),directionFor50);}else if(typeof window.theme!=='undefined'&&typeof window.theme.settings!=='undefined'&&typeof window.theme.settings.moneyFormat!=='undefined'){try{format=theme.settings.moneyFormat
price=utils.formatMoney(price,format,(currency||this.getDefaultCurrency()),directionFor50);}catch(e){bundlerConsole.log(e);}}else{price=price/100;if(typeof currency==='undefined'){var currency=this.getDefaultCurrency();}
price=price.toLocaleString(undefined,{style:'currency',currency:currency});}
return price;},getDefaultCurrency:function(){if(typeof Shopify!=='undefined'&&typeof Shopify.currency.active!=='undefined'){var currency=Shopify.currency.active;}else{var currency='USD';}
return currency;},MixNMatch:{addToBundle:function($this){var bundleKey=$this.closest('[data-bndlr-key]').attr('data-bndlr-key');var properties={};var $product=$this.closest('.bndlr-product');var variantId=$product.find('select.bndlr-select-variant[name="variant_id"] option:selected').val();var productId=$product.attr('data-product-id');var quantity=1;if(typeof variantId==='undefined'){var productTitle=$product.find('.bndlr-product-title').first().text();bndlr.showWarningMessage({responseJSON:{description:'Product: '+productTitle+' is not available.'}},bundleKey);}else{var products=Library.MixAndMatchBundles.get(bundleKey);if(typeof products[variantId]!=='undefined'){products[variantId].quantity+=1;}else{products[variantId]={product_id:productId,variant_id:variantId,quantity:quantity}}
Library.MixAndMatchBundles.set(bundleKey,products);widgetView.drawSelectedProducts(bundleKey,products);widgetView.MixNMatch.fadeInSelectedProducts(bundleKey);widgetView.addToCartButton.showCheckmark($this);}
this.refreshDisplay(bundleKey);},refreshDisplay:function(bundleKey){var htmlId='#_bndl_'+bundleKey;var $element=$(htmlId);var bundleId=$element.closest('[data-bundle]').attr('data-bundle');bundleId=parseInt(bundleId);var bundle=bndlr.getBundleById(bundleId);this.showHideAddToBundleButtons(bundleKey);this.refreshInstructionsText(bundleKey,bundle);var numberOfSelectedProducts=this.getNumOfselectedProducts(bundleKey);var numberofMissingProducts=this.getNumberOfRemainingProducts(bundle,numberOfSelectedProducts);var isMissingRequiredProducts=this.isMissingRequiredProducts(bundleKey,bundle);if(numberofMissingProducts===0&&isMissingRequiredProducts===false){widgetView.MixNMatch.fadeInAddToCartButton(bundleKey);}else{widgetView.MixNMatch.fadeOutAddToCartButton(bundleKey);}
var selectedProducts=Library.MixAndMatchBundles.get(bundleKey);var products=Library.DiscountedProducts.get(bundleId);var recreatedBundle=JSON.parse(JSON.stringify(bundle));recreatedBundle.mix_and_match_display='false';var recreatedProducts={};for(var key in selectedProducts){if(selectedProducts.hasOwnProperty(key)){var variantId=selectedProducts[key].variant_id;var productId=selectedProducts[key].product_id;var quantity=selectedProducts[key].quantity;var product={};if(bundle.product_level=='product'){product=products[productId];}else{product=products[productId];}
var prd=JSON.parse(JSON.stringify(product));for(var i=0;i<product.variants.length;i++){if(product.variants[i].id==variantId){var variant=JSON.parse(JSON.stringify(product.variants[i]));prd.quantity=quantity;prd.variants=[product.variants[i]];}}
recreatedProducts[key]=prd;}}
if(this.getNumberOfRemainingProducts(bundle,numberOfSelectedProducts)===0){recreatedProducts=bndlr.modifyProductsPrices(recreatedBundle,recreatedProducts,true);}
var totalPriceText=bndlr.getMixNMatchTotalPriceText(recreatedBundle,recreatedProducts);$element.find('.bndlr-mnm-total-price').html(totalPriceText);bndlr.setProductWidth(htmlId+' .bndlr-mnm-second-container',$element.find('.bndlr-mnm-second-container'));window.requestAnimationFrame(this.showHideStatusBox);if(bndlr.repositionPlusSignsTimeout!=false){clearTimeout(bndlr.repositionPlusSignsTimeout);}
bndlr.repositionPlusSignsTimeout=setTimeout(function(){bndlr.repositionPlusSigns('#_bndl_'+bundleKey);},200);bndlr.convertCurrency('.bndlr-mnm-total-price');try{var event=new CustomEvent("bundler:mixnmatch_refreshed");document.dispatchEvent(event);}catch(e){}},refreshInstructionsText:function(bundleKey,bundle){var numberOfSelectedProducts=this.getNumOfselectedProducts(bundleKey);var isMissingRequiredProducts=this.isMissingRequiredProducts(bundleKey,bundle);var content=this.getInstructionsText(bundle,numberOfSelectedProducts,isMissingRequiredProducts);$('[data-bndlr-key="'+bundleKey+'"] .bndlr-mnm-instructions-text').html(content);$('#bndlr-mnm-status-box[data-bndlr-bundle-key="'+bundleKey+'"] .bndlr-mnm-instructions-text').html(content);},getNumOfselectedProducts:function(bundleKey){var products=Library.MixAndMatchBundles.get(bundleKey);var productsCount=0;for(var key in products){if(products.hasOwnProperty(key)){productsCount+=products[key].quantity;}}
return productsCount;},isMissingRequiredProducts:function(bundleKey,bundle){var products=Library.MixAndMatchBundles.get(bundleKey);var numOfRequiredProducts=0;var containedRequiredProducts=0;for(var key in bundle.products){if(bundle.products.hasOwnProperty(key)){if(bundle.products[key].required===1){numOfRequiredProducts++;var productIsContained=false;for(var k in products){if(products.hasOwnProperty(k)){if(products[k].product_id==bundle.products[key].id){containedRequiredProducts++;productIsContained=true;break;}}}
if(productIsContained===false){return true;}}}}
if(containedRequiredProducts===numOfRequiredProducts){return false;}else{return true;}},showHideAddToBundleButtons:function(bundleKey){if(bndlr.MixNMatch.canAddMoreProducts(bundleKey)===false){widgetView.MixNMatch.hideAddtoBundleButtons(bundleKey);}else{$('[data-bndlr-key="'+bundleKey+'"] .bndlr-mnm-available-products .bndlr-product').each(function(key,el){var productId=$(el).attr('data-product-id');if(bndlr.MixNMatch.canAddMoreProduct(bundleKey,productId)===false){widgetView.MixNMatch.hideAddtoBundleButton(bundleKey,productId);}else{widgetView.MixNMatch.showAddtoBundleButton(bundleKey,productId);}});}},canAddMoreProducts:function(bundleKey){var bundleId=$('[data-bndlr-key="'+bundleKey+'"]').closest('[data-bundle]').attr('data-bundle');bundleId=parseInt(bundleId);var bundle=bndlr.getBundleById(bundleId);var numberOfSelectedProducts=this.getNumOfselectedProducts(bundleKey);if(bundle.minimum_requirements_n_max_products===null){return true;}
if(bundle.minimum_requirements_n_max_products>numberOfSelectedProducts){return true;}
return false;},canAddMoreProduct:function(bundleKey,productId){var bundleId=$('[data-bndlr-key="'+bundleKey+'"]').closest('[data-bundle]').attr('data-bundle');bundleId=parseInt(bundleId);var bundle=bndlr.getBundleById(bundleId);var products=Library.MixAndMatchBundles.get(bundleKey);var allowedTotalProductQuantity=bundle.products[productId].quantity;for(var key in products){if(products.hasOwnProperty(key)){if(bundle.product_level=='product'){if(products[key].product_id==productId){allowedTotalProductQuantity-=products[key].quantity;if(allowedTotalProductQuantity<=0){return false;}}}else{if(products[key].variant_id==productId){if(products[key].quantity>=bundle.products[productId].quantity){return false;}else{return true;}}}}}
if(allowedTotalProductQuantity>0){return true;}else{return false;}},removeFromBundle:function($this){var lineItemKey=$this.closest('[data-line-item-key]').attr('data-line-item-key');var bundleKey=$this.closest('[data-bndlr-key]').attr('data-bndlr-key');var products=Library.MixAndMatchBundles.get(bundleKey);if(typeof products[lineItemKey]!=='undefined'){delete products[lineItemKey];Library.MixAndMatchBundles.set(bundleKey,products);widgetView.drawSelectedProducts(bundleKey,products);if(Object.keys(products).length===0){widgetView.MixNMatch.fadeOutSelectedProducts(bundleKey);}
this.refreshDisplay(bundleKey);}},productsToString:function(products){var productsString='';for(var key in products){if(products.hasOwnProperty(key)){productsString+='p-'+products[key].product_id+'-'+products[key].variant_id+'='+products[key].quantity+'&';}}
return productsString;},addMixAndMatchBundleToCart:function($this,$outOfWidgetButton){var bundleKey=$this.closest('[data-bndlr-key]').attr('data-bndlr-key');var $bundleContainer=$this.closest('[data-bndlr-key]');var products=Library.MixAndMatchBundles.get(bundleKey);$this.addClass('bndlr-loading');if(typeof $outOfWidgetButton!=='undefined'){$outOfWidgetButton.addClass('bndlr-loading');}
var queueKey='mixandmatchaddtocart';var items=[];for(var key in products){if(products.hasOwnProperty(key)){(function(){var variantId=products[key].variant_id;var quantity=products[key].quantity;var $el=$bundleContainer.find('.bndlr-mnm-selected-products .bndlr-product[data-line-item-key="'+key+'"]').first();var prodProperties=bndlr.getLineItemProperties($el);var props=JSON.parse(JSON.stringify(prodProperties));var sellingPlan=bndlr.getSellingPlan($el);items.push({id:variantId,quantity:quantity,properties:props,selling_plan:sellingPlan});})();}}
bndlr.addItemsToCart(items,queueKey,bundleKey,$this,$outOfWidgetButton);queue.process(queueKey);},getInstructionsText:function(bundle,numberOfProducts,isMissingRequiredProducts){var content='';var remainingProducts=this.getNumberOfRemainingProducts(bundle,numberOfProducts);if(remainingProducts>0){content='Your bundle needs {{n}} more item(s).';content=content.replace('{{n}}',remainingProducts);}else if(isMissingRequiredProducts){content='Your bundle is missing the required product(s).';}
return content;},getNumberOfRemainingProducts:function(bundle,numberOfProducts){var remainingProducts=bundle.minimum_requirements_num-numberOfProducts;if(remainingProducts>0){return remainingProducts;}
return 0;},showHideStatusBox:function(){if($('.bndlr-mnm-add-to-cart-wrapper .bndlr-add-bundle-to-cart').first().is(':visible')===false){$('#bndlr-mnm-status-box').removeClass('bndlr-visibility-hidden').addClass('bndlr-visibility-visible');}else{var cartButton=$('.bndlr-mnm-add-to-cart-wrapper .bndlr-add-bundle-to-cart').first();var cbOffsetTop=cartButton.offset().top;var cbHeight=cartButton.height()+40;var windowHeight=$(window).height();var windowScrollTop=$(window).scrollTop();if((cbOffsetTop+cbHeight)>(windowHeight+windowScrollTop)||(cbOffsetTop)<(windowScrollTop)){$('#bndlr-mnm-status-box').removeClass('bndlr-visibility-hidden').addClass('bndlr-visibility-visible');}else{$('#bndlr-mnm-status-box').removeClass('bndlr-visibility-visible').addClass('bndlr-visibility-hidden');}}}},getLineItemProperties:function($productEl){var properties={};try{$productEl.find('input[name^="properties"]').each(function(i,prop){var val=$(prop).val();var name=$(prop).attr('name').replace('properties[','').replace(']','');properties[name]=val;});}catch(e){bundlerConsole.log(e);}
var productId=$productEl.attr('data-product-id');$bundleContainer=$productEl.closest('[data-bndlr-key]');try{var $subsEl=$bundleContainer.find('.sealsubs-target-element-bundle').first();$subsEl.find('input[name^="properties"]').each(function(i,prop){var val=$(prop).val();var name=$(prop).attr('name').replace('properties[','').replace(']','');properties[name]=val;});if(typeof productId!=='undefined'){$subsEl.find('input[name^="'+productId+'_properties"]').each(function(i,prop){var val=$(prop).val();var name=$(prop).attr('name').replace(productId+'_properties[','').replace(']','');properties[name]=val;});}}catch(e){bundlerConsole.log(e);}
return properties;},getSellingPlan:function($productEl){var sellingPlan='';try{sellingPlan=$productEl.find('input[name^="selling_plan"]').val();}catch(e){bundlerConsole.log(e);}
return sellingPlan;},productsToString:function(products){var productsString='';for(var key in products){if(products.hasOwnProperty(key)){var prefix='';if(products[key].required){prefix='r-';}
productsString+=prefix+'p-'+products[key].product_id+'-'+products[key].variant_id+'='+products[key].quantity+'&';}}
return productsString;},addToCart:function($this){if(typeof clientSpecifics['add_to_cart_control']!=='undefined'){var canContinue=clientSpecifics['add_to_cart_control'].trigger($this.closest('.bundler-target-element'));}else{var canContinue=true;}
if(!canContinue){return false;}
if($this.attr('data-active')==='false'){bundlerConsole.log('One or more products in the bundle are unavailable.');return true;}
var bundleKey=$this.closest('[data-bndlr-key]').attr('data-bndlr-key');$this.addClass('bndlr-loading');var queueKey='addtocart';var properties={};var allProductsAreAvailable=true;var items=[];var cartItems=[];try{if($this.closest('[data-cart-items]').length>0){cartItems=JSON.parse($this.closest('[data-cart-items]').attr('data-cart-items'));}}catch(e){console.error(e);}
var preselectedProducts=[];try{if($this.closest('[data-bdnlr-preselected-products]').length>0){preselectedProducts=JSON.parse($this.closest('[data-bdnlr-preselected-products]').attr('data-bdnlr-preselected-products'));}}catch(e){console.error(e);}
var preselectedProductsRequired=[];try{if($this.closest('[data-bdnlr-preselected-products-required]').length>0){preselectedProductsRequired=JSON.parse($this.closest('[data-bdnlr-preselected-products-required]').attr('data-bdnlr-preselected-products-required'));}}catch(e){console.error(e);}
$this.closest('.bndlr-container').find('.bndlr-product').each(function(key,el){var $el=$(el);var prodProperties=bndlr.getLineItemProperties($el);for(var k in properties){if(properties.hasOwnProperty(k)){prodProperties[k]=properties[k];}}
var sellingPlan=bndlr.getSellingPlan($el);var variantId=$(el).find('select.bndlr-select-variant[name="variant_id"] option:selected').val();var quantity=$(el).attr('data-quantity');if($(el).attr('data-required')==='false'){if(preselectedProducts.length>0){for(var j=0;j<preselectedProducts.length;j++){if(preselectedProducts[j].variant_id==variantId){if(preselectedProducts[j].quantity==quantity){return;}}}}}else if($(el).attr('data-required')==='true'){if(preselectedProductsRequired.length>0){for(var j=0;j<preselectedProductsRequired.length;j++){if(preselectedProductsRequired[j].variant_id==variantId){if(preselectedProductsRequired[j].quantity==quantity){return;}}}}}
for(var k=0;k<cartItems.length;k++){if(cartItems[k].quantity>0&&cartItems[k].quantity<quantity&&cartItems[k].variant_id==variantId){quantity=quantity-cartItems[k].quantity;cartItems[k].quantity=0;if(Object.keys(prodProperties).length===0&&cartItems[k].properties!==null&&Object.keys(cartItems[k].properties).length>0){prodProperties=JSON.parse(JSON.stringify(cartItems[k].properties));}}}
if(typeof variantId==='undefined'){var productTitle=$(el).find('.bndlr-product-title').first().text();bndlr.showWarningMessage({responseJSON:{description:'Product: '+productTitle+' is not available.'}},bundleKey);allProductsAreAvailable=false;}else{var props=JSON.parse(JSON.stringify(prodProperties));items.push({id:variantId,quantity:quantity,properties:props,selling_plan:sellingPlan});}});bndlr.addItemsToCart(items,queueKey,bundleKey,$this);if(allProductsAreAvailable){queue.process(queueKey);}else{queue.cancel(queueKey);}},addItemsToCart:function(items,queueKey,bundleKey,$this,$outOfWidgetButton){queue.add(queueKey,function(){cart.addMultipleItemsToCart(nav.getRootUrl(),items).done(function(response){queue.tick(queueKey);for(var n=0;n<items.length;n++){try{var productId=0;var variantId=items[n].id;for(var m=0;m<response.items.length;m++){if(response.items[m].variant_id==variantId){productId=response.items[m].product_id;break;}}
BndlrAnalytics.track('addtocart',productId,variantId,items[n].quantity);}catch(e){bundlerConsole.log(e);}}}).fail(function(r){$this.removeClass('bndlr-loading');if(typeof $outOfWidgetButton!=='undefined'){$outOfWidgetButton.removeClass('bndlr-loading');}
bndlr.showWarningMessage(r,bundleKey);queue.cancel(queueKey);});},function(){if($this.closest('.bundler-target-element[data-bdnlr-preselected-products]').length>0){$('.bndlr-add-to-cart').removeClass('bndlr-loading');widgetView.addToCartButton.showCheckmark($this);$(document).trigger('bndlr:bundle_added_to_cart');document.dispatchEvent(new CustomEvent('bndlr:bundle_added_to_cart'));$('body').trigger('added.ajaxProduct');cart.updateCart();}else{var urlLocale=nav.getUrlLocale();if(urlLocale!==''){window.location.href='/'+urlLocale+'/cart';}else{window.location.href='/cart';}}});},afterAddToCartAction:function(){$('body').trigger('added.ajaxProduct');cart.updateCart();if($('#sidebar-cart').length>0||$('#slidecarthq').length>0||$('form.cart-drawer').length>0||$('#cart-popup').length>0||$('#mini-cart').length>0){setTimeout(function(){DiscountEstimator.showPopup();},1000);}else{DiscountEstimator.showPopup();}},closeMessage:function(){$('#bndlr-discount-message').animate({bottom:'-100%'},1000);},setCookie:function(cname,cvalue,exdays){var d=new Date();if(exdays>0){d.setTime(d.getTime()+(exdays*24*60*60*1000));var expires="expires="+d.toUTCString();document.cookie=cname+"="+cvalue+";"+expires+";path=/";}else{document.cookie=cname+"="+cvalue+";path=/";}},getCookie:function(cname){var name=cname+"=";var decodedCookie=decodeURIComponent(document.cookie);var ca=decodedCookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' '){c=c.substring(1);}
if(c.indexOf(name)==0){return c.substring(name.length,c.length);}}
return "";},showWarningMessage:function(response,bundleKey){this.stopAddtcAnimation(bundleKey);var c='This product was not added to cart.';c='undefined'==typeof response.responseJSON?$.parseJSON(response.responseText).description:response.responseJSON.description,warningHtml='<div class="bndlr-warning" style="display:none">'+c+'</div>';$.each($('[data-bndlr-key="'+bundleKey+'"] .bndlr-warning'),function(d,e){$(e).remove()});$('[data-bndlr-key="'+bundleKey+'"] .bndlr-products-container').first().append($(warningHtml)),$('[data-bndlr-key="'+bundleKey+'"] .bndlr-warning').fadeIn(500,function(){setTimeout(function(){$('[data-bndlr-key="'+bundleKey+'"] .bndlr-products-container').children('.bndlr-warning').first().fadeOut(500)},4e3)})},stopAddtcAnimation:function(bundleKey){$('[data-bndlr-key="'+bundleKey+'"] .bndlr-add-to-cart').removeClass('bndlr-loading');}};var DiscountEstimator={showPopup:function(){if(nav.isShopPage()){this.calculateDiscounts();}},updateCartDiscountsTimeout:false,updateCartDiscounts:function(){if(this.updateCartDiscountsTimeout!==false){clearTimeout(this.updateCartDiscountsTimeout);}
this.updateCartDiscountsTimeout=setTimeout(function(){DiscountEstimator.calculateDiscounts(false);},410);},calculateDiscounts:function(showPopup){if(typeof showPopup==='undefined'){showPopup=true;}},containsSellingPlan:function(cartData){if(typeof cartData.items!=='undefined'){for(var i=0;i<cartData.items.length;i++){if(cartData.items[i].hasOwnProperty('selling_plan_allocation')){return true;}}}
return false;},setSellingPlanMultipliers:function(cartData){if(typeof cartData.items!=='undefined'){for(var i=0;i<cartData.items.length;i++){var multiplier=1;if(cartData.items[i].hasOwnProperty('selling_plan_allocation')&&cartData.items[i].selling_plan_allocation.hasOwnProperty('price')&&cartData.items[i].selling_plan_allocation.hasOwnProperty('per_delivery_price')&&cartData.items[i].selling_plan_allocation.price!==cartData.items[i].selling_plan_allocation.per_delivery_price){multiplier=cartData.items[i].selling_plan_allocation.price/cartData.items[i].selling_plan_allocation.per_delivery_price;}
cartData.items[i].multiplier=multiplier;}}
return cartData;},reducePricesAccordingToMultiplier:function(cartData){if(typeof cartData.items!=='undefined'){for(var i=0;i<cartData.items.length;i++){var multiplier=1;if(typeof cartData.items[i].multiplier==='number'){var multiplier=cartData.items[i].multiplier;if(multiplier>1){var price=cartData.items[i].price;price=price/multiplier;cartData.items[i].price=price;}}}}
return cartData;},addMultipliers:function(applicableCombos,cartData){for(var i=0;i<applicableCombos.length;i++){for(var pkey in applicableCombos[i]){if(applicableCombos[i].hasOwnProperty(pkey)){var product=applicableCombos[i][pkey];var lineItemId=product.line_item_id;if(typeof cartData.items[lineItemId]!=='undefined'&&typeof cartData.items[lineItemId].multiplier==='number'){var multiplier=cartData.items[lineItemId].multiplier;applicableCombos[i][pkey].multiplier=multiplier}}}}
return applicableCombos;},getMultiplier:function(applicableCombo){var multiplier=1;if(typeof applicableCombo.multiplier==='number'){multiplier=applicableCombo.multiplier;}
return multiplier;},canGetFreeShippingDiscount:function(cartData){var isEligibleForFreeShippingDiscount=false;return isEligibleForFreeShippingDiscount;},removeBundledItemsFromCart:function(cartItems){for(var k=0;k<bundles.length;k++){var combos=this.getApplicableCombosForBundle(cartItems,bundles[k]);}
return cartItems;},calculateDiscount:function(cartDataVar,cartDataReference){var cartData=JSON.parse(JSON.stringify(cartDataVar));cartData.items=cartData.items.sort(function(a,b){return a.quantity-b.quantity;});if(typeof cartDataReference!=='undefined'&&typeof cartDataReference.items!=='undefined'){cartDataReference.items=cartDataReference.items.sort(function(a,b){return a.quantity-b.quantity;});}
var $applicableBundles=this.getApplicableBundles(cartData);var applicableCombos=this.getApplicableCombosAll(cartData,$applicableBundles);var totalDiscountValue=0;var appliedCombos={};for(var i=0;i<applicableCombos.length;i++){var $bundle=null;var originalAmount=0;var totalBundleDiscountAmount=0;var totalDiscountedAmount=0;var discountPercent=0;for(var productId in applicableCombos[i]){if(typeof appliedCombos[i]=='undefined'){if(applicableCombos[i].hasOwnProperty(productId)){var initialDiscountAmount=totalDiscountValue;var item=applicableCombos[i][productId];if($bundle===null){for(var k=0;k<$applicableBundles.length;k++){if($applicableBundles[k].id==item.bundle_id){$bundle=$applicableBundles[k];k=$applicableBundles.length;}}
originalAmount=this.getTotalOriginalAmount(applicableCombos[i])/100;}
var discountType=$bundle.discount_type;var volumeDiscount=[];if(typeof item.volume_discount!=='undefined'){discountType=item.volume_discount.discount_type;volumeDiscount=item.volume_discount;$bundle.discount_type=item.volume_discount.discount_type;$bundle.percentage_value=item.volume_discount.discount_value;$bundle.fixed_amount_value=item.volume_discount.discount_value;}
var itemDiscountAmount=0;if(item.type==='discounted'){if(discountType==='fixed_amount'){var maxAmount=originalAmount;var ratio=(item.price/100*item.quantity)/originalAmount;itemDiscountAmount=ratio*(1*$bundle.fixed_amount_value);if(itemDiscountAmount<0){itemDiscountAmount=0;}
if((totalBundleDiscountAmount+itemDiscountAmount)>(1*$bundle.fixed_amount_value)){itemDiscountAmount=(1*$bundle.fixed_amount_value)-totalBundleDiscountAmount;}
totalBundleDiscountAmount+=itemDiscountAmount;}else if(discountType==='fixed_price'){var ratio=1-(1*$bundle.fixed_price_value)/originalAmount;itemDiscountAmount=item.price/100*item.quantity*ratio;var maxDiscount=originalAmount-(1*$bundle.fixed_price_value);if(itemDiscountAmount<0){itemDiscountAmount=0;}
if((totalBundleDiscountAmount+itemDiscountAmount)>maxDiscount){itemDiscountAmount=maxDiscount-totalBundleDiscountAmount;}
totalBundleDiscountAmount+=itemDiscountAmount;}else if(discountType==='percentage'){itemDiscountAmount=(Math.round(($bundle.percentage_value/100)*item.price)*item.quantity)/100;}else if(discountType==='products_discounts'){var productId=item.product_id;var variantId=item.variant_id;if(typeof $bundle.products[productId].variants[variantId].discount_amount!=='undefined'){var discountAmount=$bundle.products[productId].variants[variantId].discount_amount*1;var itemPrice=item.price*item.quantity/100;if($bundle.minimum_requirements=='n_products'){discountAmount=discountAmount*item.quantity;}
if(itemPrice-discountAmount>=0){itemDiscountAmount=discountAmount;}else{itemDiscountAmount=itemPrice;}}}}
totalDiscountValue+=itemDiscountAmount*this.getMultiplier(item);var appliedDiscountAmount=totalDiscountValue-initialDiscountAmount;this.reduceCartItemPrice(cartDataReference,appliedDiscountAmount,item);}}}
if(totalDiscountedAmount>0&&discountPercent>0){discountPercent=Math.floor(discountPercent*100)/100;totalDiscountValue+=Math.floor(totalDiscountedAmount*discountPercent)/100;}}
totalDiscountValue=Math.round(totalDiscountValue*100)/100;totalDiscountValue=totalDiscountValue*100;return totalDiscountValue;},reduceCartItemPrice:function(cart,discountAmount,item){var lineId=item.line_item_id;discountAmount=Math.round(discountAmount*100);if(typeof cart!=='undefined'&&typeof cart.items!=='undefined'&&typeof cart.items[lineId]!=='undefined'){var linePrice=cart.items[lineId].line_price-discountAmount;cart.items[lineId].line_price=linePrice;}},getTotalOriginalAmount:function(combo){var totalAmount=0;for(var productId in combo){if(combo.hasOwnProperty(productId)){if(typeof combo[productId]!=='undefined'&&combo[productId].type==='discounted'){totalAmount+=bndlr.getPrice(combo[productId].price)*combo[productId].quantity;}}}
return totalAmount;},canApplyBundle:function(items,bundle){var requiredProductsCounter=0;if(bundle.minimum_requirements==='volume_discounts'){return true;}
for(var productId in bundle.products){if(bundle.products.hasOwnProperty(productId)){var isInCart=false;var product=bundle.products[productId];for(var variantId in product.variants){if(product.variants.hasOwnProperty(variantId)){for(var i=0;i<items.length;i++){if(variantId==items[i].variant_id){if(bundle.minimum_requirements==='all_products'||bundle.minimum_requirements==='specific_products'){isInCart=true;}else if(bundle.minimum_requirements==='n_products'){isInCart=true;if(product.quantity<items[i].quantity){requiredProductsCounter+=product.quantity;}else{requiredProductsCounter+=items[i].quantity;}}}}}}
if(bundle.minimum_requirements==='all_products'||bundle.minimum_requirements==='specific_products'){if(isInCart===false){return false;}}}}
if(bundle.minimum_requirements==='n_products'){if(requiredProductsCounter>=bundle.minimum_requirements_num){return true;}else{return false;}}else{return true;}},getApplicableBundles:function(cartData){var $applicableBundles=[];for(var i=0;i<bundles.length;i++){if(this.canApplyBundle(cartData.items,bundles[i])){$applicableBundles.push(bundles[i]);}}
return $applicableBundles;},getApplicableCombosAll:function(cartData,$applicableBundles){var $applicableItems={};var applicableCombos=[];var cartCopy=JSON.parse(JSON.stringify(cartData));var cartItems=JSON.parse(JSON.stringify(cartData.items));for(var k=0;k<$applicableBundles.length;k++){var combos=this.getApplicableCombosForBundle(cartItems,$applicableBundles[k]);for(var i=0;i<combos.length;i++){var canApplyCombo=true;if(typeof combos[i]==='undefined'){continue;}
for(var productId in combos[i]){if(combos[i].hasOwnProperty(productId)){var canApplyProduct=false;var product=combos[i][productId];for(var j=0;j<cartCopy.items.length;j++){var lineItem=cartCopy.items[j];if(lineItem.variant_id==product.variant_id){if(lineItem.quantity>=product.quantity&&j==product.line_item_id){canApplyProduct=true;lineItem.quantity-=product.quantity;}}}
if(canApplyProduct===false){canApplyCombo=false;}}}
if(canApplyCombo){applicableCombos.push(combos[i]);}else{}}}
return applicableCombos;},getApplicableCombosForBundle:function(cartItems,bundle){var combos=[];var comboId=0;var loop=true;var productQuantityCount=0;if(bundle.minimum_requirements==='volume_discounts'){}else{while(loop){if(comboId>10000){loop=false;bundlerConsole.log('-- Terminating loop --');}
if(bundle.minimum_requirements==='specific_products'){for(var productId in bundle.required_products){if(bundle.required_products.hasOwnProperty(productId)){var product=bundle.required_products[productId];var productVariants=bundle.required_products[productId].variants;cartItemsLoop:for(var i=0;i<cartItems.length;i++){for(var variantId in productVariants){if(productVariants.hasOwnProperty(variantId)){var quantity=product.quantity;if(variantId==cartItems[i].variant_id&&this.bundleMatchesPreferredBundle(cartItems[i],bundle)){var applyCombo=false;var apQuantity=cartItems[i].quantity;if(cartItems[i].quantity>=quantity){apQuantity=quantity;applyCombo=true;}
if(applyCombo){if(typeof combos[comboId]==='undefined'){combos[comboId]={};}
var key=i;var origLineItem=i;if(typeof cartItems[i].orig_line_item_id!=='undefined'){origLineItem=cartItems[i].orig_line_item_id;}
combos[comboId]['required_'+key]={product_id:productId,variant_id:cartItems[i].variant_id,line_item_id:i,orig_line_item_id:origLineItem,bundle_id:bundle.id,price:cartItems[i].price,quantity:apQuantity,discount_type:bundle.discount_type,type:'required'};cartItems[i].quantity-=apQuantity;break cartItemsLoop;}}}}}}}}
productQuantityCount=0;var remainingEachProductQuantity={};if(bundle.minimum_requirements==='n_products'){for(var productId in bundle.products){if(bundle.products.hasOwnProperty(productId)){var product=bundle.products[productId];var productVariants=bundle.products[productId].variants;if(typeof remainingEachProductQuantity[productId]==='undefined'){remainingEachProductQuantity[productId]=product.quantity;}
for(var variantId in productVariants){if(productVariants.hasOwnProperty(variantId)){if(productVariants[variantId].required===1){var quantity=product.quantity;for(var i=0;i<cartItems.length;i++){if(variantId==cartItems[i].variant_id&&this.bundleMatchesPreferredBundle(cartItems[i],bundle)){var applyCombo=false;var apQuantity=cartItems[i].quantity;if(cartItems[i].quantity>0){var remainingQuantity=remainingEachProductQuantity[productId];if(cartItems[i].quantity>remainingQuantity){apQuantity=remainingQuantity;}
if(bundle.minimum_requirements_n_max_products!==null&&bundle.minimum_requirements_n_max_products!==''&&(productQuantityCount+apQuantity)>bundle.minimum_requirements_n_max_products){apQuantity=bundle.minimum_requirements_n_max_products-productQuantityCount;}
if(apQuantity>0){quantity-=apQuantity;remainingEachProductQuantity[productId]-=apQuantity;productQuantityCount+=apQuantity;applyCombo=true;}
if(applyCombo){if(typeof combos[comboId]==='undefined'){combos[comboId]={};}
var key=i;var origLineItem=i;if(typeof cartItems[i].orig_line_item_id!=='undefined'){origLineItem=cartItems[i].orig_line_item_id;}
combos[comboId][key]={product_id:productId,variant_id:cartItems[i].variant_id,line_item_id:i,orig_line_item_id:origLineItem,bundle_id:bundle.id,price:cartItems[i].price,quantity:apQuantity,discount_type:bundle.discount_type,type:'discounted'};cartItems[i].quantity-=apQuantity;}}}}}}}}}}
for(var productId in bundle.products){if(bundle.products.hasOwnProperty(productId)){var product=bundle.products[productId];var productVariants=bundle.products[productId].variants;if(typeof remainingEachProductQuantity[productId]==='undefined'){remainingEachProductQuantity[productId]=product.quantity;}
productsLoop:for(var variantId in productVariants){if(productVariants.hasOwnProperty(variantId)){var quantity=product.quantity;variantsLoop:for(var i=0;i<cartItems.length;i++){if(variantId==cartItems[i].variant_id&&this.bundleMatchesPreferredBundle(cartItems[i],bundle)){var applyCombo=false;var apQuantity=cartItems[i].quantity;if((bundle.minimum_requirements==='all_products'||bundle.minimum_requirements==='specific_products')&&cartItems[i].quantity>=quantity){apQuantity=quantity;applyCombo=true;}else if(bundle.minimum_requirements==='n_products'&&cartItems[i].quantity>0){var remainingQuantity=remainingEachProductQuantity[productId];if(cartItems[i].quantity>=remainingQuantity){apQuantity=remainingQuantity;}
if(bundle.minimum_requirements_n_max_products!==null&&bundle.minimum_requirements_n_max_products!==''&&(productQuantityCount+apQuantity)>bundle.minimum_requirements_n_max_products){apQuantity=bundle.minimum_requirements_n_max_products-productQuantityCount;}
if(apQuantity>0){quantity-=apQuantity;remainingEachProductQuantity[productId]-=apQuantity;productQuantityCount+=apQuantity;applyCombo=true;}}
if(applyCombo){if(typeof combos[comboId]==='undefined'){combos[comboId]={};}
if(bundle.minimum_requirements==='n_products'||bundle.minimum_requirements==='specific_products'){var key=i;}else{var key=productId;}
var origLineItem=i;if(typeof cartItems[i].orig_line_item_id!=='undefined'){origLineItem=cartItems[i].orig_line_item_id;}
combos[comboId][key]={product_id:productId,variant_id:cartItems[i].variant_id,line_item_id:i,orig_line_item_id:origLineItem,bundle_id:bundle.id,price:cartItems[i].price,quantity:apQuantity,discount_type:bundle.discount_type,type:'discounted'};cartItems[i].quantity-=apQuantity;if(bundle.minimum_requirements==='n_products'){}else{break productsLoop;}}}}}}}}
var appliedProducts=0;var appliedRequiredProducts=0;var appliedQuantity=0;var numOfRequiredMixNMatchProductsArray={};var numOfRequiredMixNMatchProductsAppliedArray={};if(bundle.minimum_requirements==='all_products'){for(var productId in bundle.products){if(bundle.products.hasOwnProperty(productId)){if(typeof combos[comboId]!=='undefined'&&typeof combos[comboId][productId]!=='undefined'){appliedProducts++;}}}}else if(bundle.minimum_requirements==='n_products'){for(var productId in bundle.products){if(bundle.products.hasOwnProperty(productId)){if(bundle.products[productId].required===1){numOfRequiredMixNMatchProductsArray[productId]=1;}
if(typeof combos[comboId]!=='undefined'){for(var id in combos[comboId]){if(combos[comboId].hasOwnProperty(id)){if(combos[comboId][id].product_id==productId){appliedQuantity+=combos[comboId][id]['quantity'];if(bundle.products[productId].required===1){numOfRequiredMixNMatchProductsAppliedArray[productId]=1;}}}}}}}}else if(bundle.minimum_requirements==='specific_products'){for(var productId in bundle.products){if(bundle.products.hasOwnProperty(productId)){if(typeof combos[comboId]!=='undefined'){for(var id in combos[comboId]){if(combos[comboId].hasOwnProperty(id)){if(combos[comboId][id].type==='discounted'&&combos[comboId][id].product_id==productId){appliedProducts++;}}}}}}
for(var productId in bundle.required_products){if(bundle.required_products.hasOwnProperty(productId)){if(typeof combos[comboId]!=='undefined'){for(var id in combos[comboId]){if(combos[comboId].hasOwnProperty(id)){if(combos[comboId][id].type==='required'&&combos[comboId][id].product_id==productId){appliedRequiredProducts++;}}}}}}}
if(bundle.minimum_requirements==='all_products'){if(appliedProducts!==Object.keys(bundle.products).length){loop=false;if(typeof combos[comboId]!=='undefined'&&Object.keys(combos[comboId]).length){this.returnQuantityToCartItem(cartItems,combos[comboId]);}
delete combos[comboId];}}else if(bundle.minimum_requirements==='n_products'){if(appliedQuantity<bundle.minimum_requirements_num||(bundle.minimum_requirements_n_max_products!==null&&bundle.minimum_requirements_n_max_products!==''&&appliedQuantity>bundle.minimum_requirements_n_max_products)||Object.keys(numOfRequiredMixNMatchProductsAppliedArray).length<Object.keys(numOfRequiredMixNMatchProductsArray).length){loop=false;if(typeof combos[comboId]!=='undefined'&&Object.keys(combos[comboId]).length){this.returnQuantityToCartItem(cartItems,combos[comboId]);}
delete combos[comboId];}}else if(bundle.minimum_requirements==='specific_products'){if(appliedProducts!==Object.keys(bundle.products).length||appliedRequiredProducts!==Object.keys(bundle.required_products).length){loop=false;if(typeof combos[comboId]!=='undefined'&&Object.keys(combos[comboId]).length){this.returnQuantityToCartItem(cartItems,combos[comboId]);}
delete combos[comboId];}}else{return false;}
if(bundle.discount_type==='fixed_price'&&typeof combos[comboId]!=='undefined'&&Object.keys(combos[comboId]).length){var totalValue=this.getTotalOriginalAmount(combos[comboId])
if(typeof window.bndlrPOS!=='undefined'){totalValue=totalValue*100;}
if(bundle.fixed_price_value*100>=totalValue){loop=false;this.returnQuantityToCartItem(cartItems,combos[comboId]);delete combos[comboId];}}
comboId++;}}
return combos;},returnQuantityToCartItem:function(cartItems,combo){for(var variantId in combo){if(combo.hasOwnProperty(variantId)){var product=combo[variantId];var lineItemId=product['line_item_id'];if(typeof cartItems[lineItemId]!=='undefined'){cartItems[lineItemId].quantity+=product.quantity;}}}},bundleMatchesPreferredBundle:function(cartItem,bundle){if(typeof window.bndlrPOS!=='undefined'){return true;}
return true;},getBundleIdFromProperties:function(cartItem){if(typeof cartItem.properties!=='undefined'&&cartItem.properties!==null&&Object.keys(cartItem.properties).length>0){for(var key in cartItem.properties){if(cartItem.properties.hasOwnProperty(key)){if(key.indexOf('_bundler_')!==-1){var value=key.replace('_bundler_','');if(value*1==value){return value*1;}}}}}
return 0;},displayCartValue:function(value,cartData,canGetFreeShipping){if(typeof canGetFreeShipping==='undefined'){canGetFreeShipping=false;}
var currency=cartData.currency;if(value>0||canGetFreeShipping===true){var totalCompareAtValue=cartData.total_price;if($('#bndlr-discount-message').length===0){$('body').append('<div id="bndlr-discount-message" class="bndlr-go-to-checkout"></div>');}
var customText='';var popupTitle='You got';var popupSubtitle='{{savings}} OFF your order';var popupAndText='&';var popupFreeShipping='FREE SHIPPING';var popupQuestion='Apply discount and go to checkout?';var popupYes='Yes, please';var popupNo='No';var priceHtml=htmlUtils.moneySpan(bndlr.formatPrice(value,currency),currency,'bndlr-cart-price');popupTitle=popupTitle.replace('{{savings}}',priceHtml);popupSubtitle=popupSubtitle.replace('{{savings}}',priceHtml);popupQuestion=popupQuestion.replace('{{savings}}',priceHtml);popupYes=popupYes.replace('{{savings}}',priceHtml);popupNo=popupNo.replace('{{savings}}',priceHtml);var discountHtml='';if(value>0&&canGetFreeShipping){discountHtml='<div class="bndlr-message-discount-value">'+
popupSubtitle+
'<div class="bndlr-message-and-text">'+popupAndText+'</div>'+
popupFreeShipping+
'</div>';}else if(value>0){discountHtml='<div class="bndlr-message-discount-value">'+
popupSubtitle+
'</div>';}else if(canGetFreeShipping){discountHtml='<div class="bndlr-message-discount-value">'+
popupFreeShipping+
'</div>';}
$('#bndlr-discount-message').html(''+
'<div class="bndlr-message-title">'+popupTitle+'</div>'+
discountHtml+
customText+
'<div class="bndlr-message-question">'+popupQuestion+'</div>'+
'<div class="bndlr-message-options">'+
'<div class="bndlr-message-yes">'+popupYes+'</div>'+
'<div class="bndlr-message-no">'+popupNo+'</div>'+
'</div>'+
'<div class="bndlr-message-close"></div>'+
'');$('#bndlr-discount-message').animate({bottom:'10px'},1000);bndlr.convertCurrency('.bndlr-cart-price');}},};var GlobalUtility={setObserver:function(keySelector,customCallback){if(typeof IntersectionObserver!=='undefined'){var options={root:null,rootMargin:'0px 0px 0px 0px',threshold:.25}
var callback=function(entries,observer){for(var i=0;i<entries.length;i++){var entry=entries[i];if(entry.isIntersecting||entry.boundingClientRect.top<0){observer.unobserve(entry.target);customCallback();}}};var observer=new IntersectionObserver(callback,options);var target=document.querySelector(keySelector);if(target!==null){observer.observe(target);}}else{customCallback();}},liquidReplaceMulti:function(string,keyValue){for(var key in keyValue){if(keyValue.hasOwnProperty(key)){string=this.liquidReplace(string,key,keyValue[key]);}}
return string;},liquidReplace:function(string,key,value){var regex=new RegExp("{{\\s*"+key+"\\s*}}",'i');string=string.replace(regex,value);return string;}};var errorHandler={displayError:function(message,bundleId){var $bundleContainer=$('.bundler-target-element[data-bundle="'+bundleId+'"]');if($bundleContainer.length===0){return true;}
if($bundleContainer.find('.bndlr-error').length===0){$bundleContainer.append('<div class="bndlr-error"></div>');$bundleContainer.attr('data-bundle-widget-status','error');}
$bundleContainer.find('.bndlr-bundle-loading').remove();$bundleErrorContainer=$bundleContainer.find('.bndlr-error').first();var hash=this.getHash(message);if($bundleErrorContainer.find('span[data-hash="'+hash+'"]').length===0){$bundleErrorContainer.append('<span data-hash="'+hash+'">'+message+'</span><br />');}},getHash:function(string){var hash=0,i,chr;if(this.length===0){return hash;}
var chr=0;for(var i=0;i<string.length;i++){chr=string.charCodeAt(i);hash=((hash<<5)-hash)+chr;hash|=0;}
return 'h'+hash;}}
var queue={queue:{},add:function(key,action,afterFinish){if(typeof this.queue[key]==='undefined'){this.queue[key]={finish:afterFinish,q:[],tick:0};}
this.queue[key].q.push(action);},process:function(key){if(typeof this.queue[key]!=='undefined'){var total=this.queue[key].q.length;var tick=this.queue[key].tick;if(typeof this.queue[key].q[tick]!=='undefined'){this.queue[key].q[tick]();}}},tick:function(key){if(typeof this.queue[key]!=='undefined'){this.queue[key].tick++;if(this.queue[key].tick===this.queue[key].q.length){this.queue[key].finish();delete this.queue[key];}else{this.process(key);}}},cancel:function(key){delete this.queue[key];}};if(typeof clientSpecifics['before_init']!=='undefined'){clientSpecifics['before_init'].trigger();}
if(typeof window.completelyDisableBundlerApp==='undefined'||window.completelyDisableBundlerApp===false){idleCallback(bndlr.init.bind(bndlr));if(typeof window.bndlrPOS==='undefined'){idleCallback(bndlr.showBundle.bind(bndlr));idleCallback(DiscountEstimator.showPopup.bind(DiscountEstimator));}}else{bundlerConsole.log('Bundler app was disabled via JavaScript variable completelyDisableBundlerApp');}
window.bndlr={checkout:bndlr.prepareInvoice,goToCheckout:(function(){bndlr.prepareInvoice(undefined,undefined,false);}),canUseCheckout:bndlr.canUseCheckout,setCheckoutParams:bndlr.setCheckoutParams,preventBundlerCheckout:bndlr.preventBundlerCheckout,outputBundles:bndlr.outputBundles,outputProductUrls:bndlr.outputProductUrls,getProductUrls:bndlr.getProductUrls,getBundles:bndlr.getBundles,refresh:(function(){bndlr.showBundle.bind(bndlr)();}),refreshVolumeDiscounts:(function(){}),getCheckoutInfo:bndlr.getCheckoutInfo,updateCartDiscounts:(function(){DiscountEstimator.updateCartDiscounts(true);})};if(typeof window.opcLoadCart==='function'){window.opcLoadCart=function(){window.bndlr.checkout();}}
_internalFunctionCollection['removeBundledItemsFromCart']=(function(items){DiscountEstimator.removeBundledItemsFromCart.bind(DiscountEstimator)(items);});_internalFunctionCollection['canShowBundle']=bndlr.canShowBundle.bind(bndlr);Object.freeze(window.bndlr);var event=new CustomEvent("bundler:loaded");document.dispatchEvent(event);document.addEventListener('bundlerPOS:triggerPOSsystem',function(){if(typeof window.bndlrPOS!=='undefined'){window.bndlrPOS.init(bndlr,bundles,DiscountEstimator,queue);if(typeof window.bndlrPOSShowBundles!=='undefined'&&window.bndlrPOSShowBundles===true){window.bndlr.refresh();}}});if(typeof window.bndlrPOS!=='undefined'){window.bndlrPOS.init(bndlr,bundles,DiscountEstimator,queue);if(typeof window.bndlrPOSShowBundles!=='undefined'&&window.bndlrPOSShowBundles===true){idleCallback(bndlr.showBundle.bind(bndlr));}}
function ClassChangeObserver(){};ClassChangeObserver.prototype.observe=function(modalSelectors){try{for(var key in modalSelectors){if(modalSelectors.hasOwnProperty(key)){var modals=$(key);if(modals.length){var observedClass=modalSelectors[key].observedClass;var callback=modalSelectors[key].callback;var observedAttribute={name:'',oldValue:''};if(typeof modalSelectors[key].observedAttribute!=='undefined'){observedAttribute=modalSelectors[key].observedAttribute;}
var mutationCallback=function(mutations,observer){try{mutations.forEach(function(mutation){if(observedAttribute.name!=''){if(mutation.attributeName==observedAttribute.name){var oldValue=mutation.oldValue;if(oldValue!==null){var prevState=oldValue.indexOf(observedAttribute.oldValue)!==-1?true:false;if(prevState){callback();}}}}else if(mutation.attributeName=="class"){var oldValue=mutation.oldValue;var prevState=oldValue.indexOf(observedClass)!==-1?true:false;var currentState=mutation.target.classList.contains(observedClass);if(currentState!==prevState){if(currentState){callback();}}}});}catch(e){console.log(e);}};var observer=new MutationObserver(mutationCallback);for(var j=0;j<modals.length;j++){observer.observe(modals[j],{attributes:true,attributeOldValue:true});}}}}}catch(e){console.log(e);}}
var ClassChangeObserver=new ClassChangeObserver();ClassChangeObserver.observe({'.modal-wrapper[data-product-modal-wrapper]':{observedClass:'is-open',callback:function(){debounce('modal-displayed',function(){if(typeof window.bndlr!=='undefined'&&typeof window.bndlr.refreshVolumeDiscounts==='function'){window.bndlr.refreshVolumeDiscounts();}},100)}},'.screen-layer--product':{observedClass:'screen-layer--is-active',callback:function(){debounce('modal-displayed',function(){if(typeof window.bndlr!=='undefined'&&typeof window.bndlr.refresh==='function'){window.bndlr.refresh();}
if(typeof window.bndlr!=='undefined'&&typeof window.bndlr.refreshVolumeDiscounts==='function'){window.bndlr.refreshVolumeDiscounts();}},100)}}});};if((typeof jQuery==='undefined')||(typeof jQuery.fn==='undefined')||(parseFloat(jQuery.fn.jquery)<3)||typeof jQuery.ajax==='undefined'){var jqueryUrl='//ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js';loadScript(jqueryUrl,function(){jQuery341=jQuery.noConflict(true);bundler(jQuery341);if(typeof BundlerPromotions==='function'){BundlerPromotions(jQuery341);}});}else{bundler(jQuery);if(typeof BundlerPromotions==='function'){BundlerPromotions(jQuery);}}
window.bundlerLoaded=true;})();}