function _slicedToArray(e,s){return _arrayWithHoles(e)||_iterableToArrayLimit(e,s)||_unsupportedIterableToArray(e,s)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,s){if(e){if("string"==typeof e)return _arrayLikeToArray(e,s);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(e,s):void 0}}function _arrayLikeToArray(e,s){(null==s||s>e.length)&&(s=e.length);for(var o=0,t=new Array(s);o<s;o++)t[o]=e[o];return t}function _iterableToArrayLimit(e,s){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var t,i,a=[],n=!0,r=!1;try{for(o=o.call(e);!(n=(t=o.next()).done)&&(a.push(t.value),!s||a.length!==s);n=!0);}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return a}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}var loginPath=gwGetUrlWithActiveLocale("/account/login"),registerPath=gwGetUrlWithActiveLocale("/account/register"),ssw_is_auth_page=location.pathname.indexOf("/account")>-1,ssw_message_selector=ssw_is_auth_page?'form[action*="/account"]:not(#he_customer_login, #he_create_customer)':"#login_modal .login-failed";if(window.storeFrontRecaptchaV3ScriptUrl="https://cdn.shopify.com/shopifycloud/storefront-recaptcha-v3/v0.6/index.js",window.showLoginPopupLoader=function(){ssw(".ssw-login form").css("opacity","0.3"),ssw(".ssw-login form input").removeAttr("enabled").attr("disabled","disabled"),ssw(".ssw-signup-loading").show(),ssw(".he-login").css("opacity","0.3"),ssw(".he-login input").removeAttr("enabled").attr("disabled","disabled"),ssw(".ssw-login-loading").show()},window.hideLoginPopupLoader=function(){ssw(".ssw-login form").css("opacity","1"),ssw(".ssw-login form input").removeAttr("disabled").attr("enabled","enabled"),ssw(".ssw-signup-loading").hide(),ssw(".he-login").css("opacity","1"),ssw(".he-login input").removeAttr("disabled").attr("enabled","enabled"),ssw(".ssw-login-loading").hide()},window.targetSEMModal=function(e,s){var o,t="";if(e.first_name&&(t+=e.first_name+" "),e.last_name&&(t+=e.last_name),"invited"===e.state)ssw("#sem_btn").hide(),ssw("#sem_forgot").hide(),ssw("#sem_password").hide(),o=sswLangs.t("already_registered_and_sent_invite_message",{email:e.email,service_name:s});else if("enabled"!=e.state)ssw("#sem_btn").hide(),ssw("#sem_forgot").hide(),e.account_activation_token&&e.email?(o=sswLangs.t("already_registered_to_social_service",{email:e.email,service_name:s}),ssw("#sem_modal_form").data("account-activation",{customer_id:e.customer_id,token:e.account_activation_token})):(ssw("#sem_password").hide(),o=sswLangs.t("incorrect_credentials",[e.email,s]));else{if(_typeof(window.ssw.usercheckResponse.multipass_enabled)&&window.ssw.usercheckResponse.multipass_enabled)return void(new ShopifyLogin).multiPassLogin();o=sswLangs.t("already_registered_to_social_service",{email:e.email,service_name:s})}if(hideLoginPopupLoader(),ssw("#social_exist_modal .ssw-img-circle").hasClass("ssw-hide")||ssw("#social_exist_modal .ssw-img-circle").addClass("ssw-hide"),e.photo_url){var i=new Image;i.onload=function(){ssw("#social_exist_modal .ssw-img-circle").removeClass("ssw-hide"),ssw("#social_exist_modal .ssw-img-circle").attr("src",e.photo_url)},i.src=e.photo_url}ssw("#sem_name").html(t),ssw("#sem_email").val(e.email),ssw("#sem_text").html(o),ssw("#login_modal").sswModal("hide"),ssw("#social_exist_modal").sswModal()},void 0===sswApp.customer){var service_id=0,sl=0,sswSocialLogin=0;window.sswCreateAccount=function(){var e=ssw("#accept-terms-modal").data("own-app");if(ssw("#ssw-create-account-button").attr("disabled","disabled"),ssw("#ssw-create-account-button").siblings("#ssw-cancel-account-button").attr("disabled","disabled"),!e)return ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/acceptTerms",data:{_sid:ssw.cookie("hesid"),service_id:ssw("#ssw-accept-terms-service_id").val(),accepts_marketing:ssw("#ssw-accept-marketing-checkbox")[0].checked,accept_terms:ssw("#ssw-accept-terms-checkbox")[0].checked,email:ssw("#terms-email-input").val()},success:function(e){switch(e.error){case 0:var s=new ShopifyLogin;s.preLogin(e.email,e.password),s.login({verified:e.verified});break;case 1:if(e.user){var o=[];e.user.twitter||o.push(".ssw-twconnect"),e.user.tumblr||o.push(".ssw-tmconnect"),e.user.instagram||o.push(".ssw-inconnect");var t=ssw("#login_modal");t.find(o.join()).hide(),t.sswModal("show"),addMessage(ssw_message_selector,sswLangs.t("this_email_is_already_used"),"info")}}},dataType:"json"}),!1;(new ShopifyLogin).setServiceUser(e.user,e.service)},window.sswCancelAccount=function(){ssw("#accept-terms-modal").sswModal("hide"),hideLoginPopupLoader()},window.sswOnAcceptTerms=function(e){"accept_terms"===e.name?e.checked?(ssw("#ssw-cancel-account-button").hide(),ssw("#ssw-create-account-button").show()):(ssw("#ssw-cancel-account-button").show(),ssw("#ssw-create-account-button").hide()):"terms"===e.name&&(e.checked?(ssw("#hesy-sign-up-cancel").hide(),ssw("#hesy-sign-up-submit").show()):(ssw("#hesy-sign-up-cancel").show(),ssw("#hesy-sign-up-submit").hide()))},window.sswOnAcceptMarketing=function(e){"accepts_marketing"===e.name&&(e.checked?ssw("#ssw-customer-accepts_marketing").val(!0):ssw("#ssw-customer-accepts_marketing").val(!1))},window.sswOnAcceptMarketingRegisterPage=function(e){"accepts_marketing"==e.name&&(e.checked?ssw(".ssw-accept-marketing__input_hidden").val(!0):ssw(".ssw-accept-marketing__input_hidden").val(!1))},window.showAcceptTermsForm=function(e,s,o){s?(ssw("#accept-terms-modal").data("own-app",{user:o,service:s}),ssw(".terms-email-group").hide()):ssw("#accept-terms-modal").removeData("own-app"),ssw("#signup_modal").sswModal("hide"),ssw("#login_modal").sswModal("hide"),e.service_id&&ssw("#ssw-accept-terms-service_id").val(e.service_id),e.email&&(ssw("#terms-email-input").val(e.email),ssw(".terms-email-group").hide()),e.termsLink&&(ssw("#accept-terms-modal .terms-link").attr("href",e.termsLink).show(),ssw("#accept-terms-modal .terms-span").hide()),e.termsSignup||(ssw(".accept_terms-group").hide(),ssw("#ssw-create-account-button").show(),ssw("#accept-terms-modal .ssw-h3").text(sswLangs.t("accept_terms_and_conditions"))),hideLoginPopupLoader(),ssw("#accept-terms-modal").sswModal()},window.addEventListener("sswoauthcallback",(function(e){if(e.detail&&-1!==["twitter","tumblr","instagram"].indexOf(e.detail.service)){var s=e.detail.service;ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/shopCallback",dataType:"json",data:{_sid:ssw.cookie("hesid"),hash_key:ssw.cookie("hash_key"),verify_token:ssw.cookie("ssw_verify_token"),service:s},success:function(e){var o;sswSocialLogin=1,void 0!==e.service_id&&(service_id=e.service_id),ssw.isEmptyObject(e)?hideLoginPopupLoader():e.termsSignup||sswApp.metafield_settings.accept_marketing_show_modal&&void 0!==e.new&&1===e.new?showAcceptTermsForm(e):e.password?e.isOldCustomer?targetSEMModal(e,s):((o=new ShopifyLogin).preLogin(e.email,e.password),o.login({verified:e.verified})):void 0!==e.user_id&&e.user_id&&_typeof(window.ssw.usercheckResponse.multipass_enabled)&&window.ssw.usercheckResponse.multipass_enabled?(o=new ShopifyLogin).multiPassLogin():(hideLoginPopupLoader(),ssw("#service_id").val(e.service_id),ssw(".ssw-modal").sswModal("hide"),e.email?targetSEMModal(e,s):ssw("#set-email-modal").sswModal())}})}})),window.shopCallback4TTI=function(e,s){showLoginPopupLoader();var o=sswProxyUrl+"/lite2/auth/"+e+"?_sid="+ssw.cookie("hesid")+"&verify_token="+ssw.cookie("ssw_verify_token")+"&shop="+encodeURIComponent(Shopify.shop);sswIsWebView()?(o+="&oauth_redirect_uri="+encodeURIComponent(location.href),location.href=o):ssw.oauthpopup({path:o,callback:function(){sswDispatchEvent("sswoauthcallback",{detail:{service:s},bubbles:!0,cancellable:!1})}})},window.loginLoader=function(){ssw(".ssw-modal").sswModal("hide"),ssw("body").prepend('<div style="background: none repeat scroll 0 0 rgba(255, 255, 255, 0.77);height: 100%;position: fixed;width: 100%;z-index: 999;"><div class="ssw-login-loading" id="ssw-login-loader"> <span class="ssw-spin ssw-loader"></span> </div> </div>'),ssw("#ssw-login-loader").css("opacity",1),ssw("#ssw-login-loader").css({position:"fixed",top:"50%",left:"50%"})},window.loginLoaderCancel=function(){ssw("#ssw-login-loader").parent().remove()},window.addMessage2SetMailForm=function(e){var s=ssw("#set-email-error");s.html(e),s.show()};var addMessage=function(e,s,o){o=void 0!==o?"ssw-alert-"+o:"",ssw(e).prepend('<div class="ssw-alert '+o+' ssw-fade ssw-in"><button class="ssw-close" data-dismiss="ssw-alert">&times;</button>'+s+"</div>")};window.validateLogin=function(){Promise.all([Ssw.gwAssetsManifestLoader.requireByKey("lib.popover.js","SCRIPT"),Ssw.gwAssetsManifestLoader.requireByKey("lib.validate.js","SCRIPT")]).then((function(){var e=ssw("#sem_modal_form");e.validate({rules:{password:{required:!0}},highlight:function(e){ssw(e).closest(".ssw-control-group").addClass("ssw-error")},success:function(e){ssw(e).closest(".ssw-control-group").removeClass("ssw-error")},submitHandler:function(){var s=new ShopifyLogin,o=ssw("#sem_email").val(),t=ssw("#sem_password").val();ssw.cookie("ssw_verify_token",sswMd5(t+btoa(o)),{expires:30,path:"/",secure:"https:"===location.protocol,samesite:"Lax"}),s.preLogin(o,t);var i=e.data("account-activation");"object"===_typeof(i)?(i.customer={password:t,password_confirmation:t},s.login(i),e.data("account-activation",!1)):s.login()}}),ssw("#set-email-form").validate({rules:{email:{required:!0,email:!0}},highlight:function(e){ssw(e).closest(".ssw-control-group").addClass("ssw-error")},success:function(e){ssw(e).closest(".ssw-control-group").removeClass("ssw-error")},submitHandler:function(){ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/setEmail",data:{_sid:ssw.cookie("hesid"),verify_token:ssw.cookie("ssw_verify_token"),service_id:ssw("#service_id").val(),email:ssw("#set-email-input").val()},success:function(e){switch(e.error){case 0:var s=new ShopifyLogin;s.preLogin(e.email,e.password),s.login({verified:e.verified});break;case 1:if(e.user){var o=[];e.user.twitter||o.push(".ssw-twconnect"),e.user.tumblr||o.push(".ssw-tmconnect"),e.user.instagram||o.push(".ssw-inconnect");var t=ssw("#login_modal");t.find(o.join()).hide(),t.sswModal("show"),addMessage(ssw_message_selector,sswLangs.t("this_email_is_already_used"),"info")}break;case 2:addMessage2SetMailForm(sswLangs.t("incorrect_data"));break;case 3:addMessage2SetMailForm(sswLangs.t("tumblr_user_not_found"));break;case 4:addMessage2SetMailForm(sswLangs.t("not_created_customer_on_shopify"));break;case 5:addMessage2SetMailForm(sswLangs.t("problem_on_create_user"))}},dataType:"json"})}}),ssw("#he_create_customer").validate({rules:{email:{required:!0,email:!0}},highlight:function(e){ssw(e).closest(".ssw-control-group").addClass("ssw-error")},success:function(e){ssw(e).closest(".ssw-control-group").removeClass("ssw-error")},submitHandler:function(){(new ShopifyLogin).signUp()}}),ssw("#he_customer_login").validate({rules:{"customer[email]":{required:!0,email:!0},"customer[password]":{required:!0,minlength:1}},highlight:function(e){ssw(e).closest(".ssw-control-group").addClass("ssw-error")},success:function(e){ssw(e).closest(".ssw-control-group").removeClass("ssw-error")},submitHandler:function(){(new ShopifyLogin).login()}})}))},window.serviceUserChecker=function(e,s){FB.api("/me",{fields:"id,email"},(function(o){ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/service",data:{_sid:ssw.cookie("hesid"),user_id:e.authResponse.userID,email:o.email,service:s,access_token:e.authResponse.accessToken,hash_key:ssw.cookie("hash_key"),verify_token:ssw.cookie("ssw_verify_token")},success:function(o){var t=new ShopifyLogin;void 0!==o.service_id&&(service_id=o.service_id),o.status?o.password&&o.email?(sswSocialLogin=1,sl=1,t.preLogin(o.email,o.password),o.account_activation_token?t.login({customer_id:o.customer_id,token:o.account_activation_token,verified:o.verified,service:s,customer:{password:o.password,password_confirmation:o.password}}):t.login({verified:o.verified,service:s})):targetSEMModal(o,"facebook"):o.termsSignup||sswApp.metafield_settings.accept_marketing_show_modal&&void 0!==o.new&&1===o.new?showAcceptTermsForm(o,"facebook",e):o.isOldCustomer?targetSEMModal(o,"facebook"):t.setServiceUser(e,"facebook")},dataType:"json"})}))};var ShopifyLogin=function e(){var s="/account",o=this;this.check_customer_count=0,this.preLogin=function(e,s){ssw("#ssw-customer-email").val(e),ssw("#ssw-customer-password").val(s)},this.setServiceUser=function(s,t){if("facebook"===t){var i=s;FB.api("/me",{fields:"id,email,first_name,gender,last_name,link,locale,name,timezone,updated_time,verified"},(function(s){ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/setService",data:{user_id:i.authResponse.userID,access_token:i.authResponse.accessToken,user:s,service:t,_sid:ssw.cookie("hesid"),verify_token:ssw.cookie("ssw_verify_token"),accepts_marketing:!ssw.usercheckResponse.acceptMarketing||ssw("#ssw-accept-marketing-checkbox")[0].checked},success:function(t){if(service_id=t.service_id,0===t.user_id)hideLoginPopupLoader(),t.email?(ssw(".ssw-socialconnect").remove(),ssw("div.ssw-alert").remove(),ssw("#ssw-first_name").val(s.first_name).show(),ssw("#ssw-last_name").val(s.last_name).show(),ssw("#ssw-email").val(s.email),ssw("#login_modal").sswModal("hide"),ssw("#signup_modal").sswModal("show")):(ssw("#service_id").val(t.service_id),ssw(".ssw-modal").sswModal("hide"),ssw("#set-email-modal").sswModal());else if("enabled"!=t.state)if(t.password&&t.email){var i=new e;i.preLogin(t.email,t.password),t.account_activation_token?i.login({customer_id:t.customer_id,token:t.account_activation_token,verified:t.verified,customer:{password:t.password,password_confirmation:t.password}}):i.login({verified:t.verified})}else targetSEMModal(t,"Facebook");else!t.password&&t.email?targetSEMModal(t):(o.preLogin(t.email,t.password),o.login())},dataType:"json"})}))}else if("gplus"===t){var a=ssw.extend(s.gplusData,{_sid:ssw.cookie("hesid"),hash_key:sswCookie("hash_key"),verify_token:ssw.cookie("ssw_verify_token")});s.response;ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/glogin",data:a,success:function(e){sswSocialLogin=1,service_id=e.service_id,0===e.user_id?(hideLoginPopupLoader(),ssw(ssw(".socialconnect")[1]).prev().remove(),ssw(ssw(".socialconnect")[1]).next().remove(),ssw(ssw(".socialconnect")[1]).next().remove(),ssw(ssw(".socialconnect")[1]).remove(),ssw("div.ssw-alert").remove(),ssw("#ssw-first_name").val(a.first_name),ssw("#ssw-last_name").val(a.last_name),ssw("#ssw-email").val(a.email),ssw("#login_modal").sswModal("hide"),ssw("#signup_modal").sswModal("show")):"enabled"!=e.state?targetSEMModal(e,"Google"):e.password?(o.preLogin(e.email,e.password),o.login()):targetSEMModal(e,"Google")},dataType:"json"})}},this.prepareFormNode=function(e,s,o,t,i){var a=e[0];e.hide(),ssw(document.body).append(e),s&&-1!==s.indexOf("checkout.shopify.com")||e.attr("action",a.action.replace(location.protocol,i)+o);var n=ssw('<input type="hidden" name="checkout_url" />');for(var r in s&&n.val(s),e.append(n),t)if(t.hasOwnProperty(r)){var c=t[r],l=e.find('input[name="'+c.name+'"]');l.length&&(l.removeAttr("disabled"),l.val(c.value))}return a},this.addRecaptchaTokenAndSubmitForm=function(e,s,t,i,a){window.grecaptcha.execute(window.Shopify.recaptchaV3.siteKey,{action:"customer_login"}).then((function(n){(e.find('input[name="recaptcha-v3-token"]').length||e.append('<input type="hidden" name="recaptcha-v3-token" value="'.concat(n,'"/>')),e[0])&&o.prepareFormNode(e,s,t,i,a).submit()}))},this.redirectAfterAuth=function(e,s,o){var t=this;if(navigator.userAgent.indexOf("MSIE")>-1&&o)location.href=o;else{var i=(navigator.userAgent.indexOf("Chrome")>-1||-1===navigator.userAgent.indexOf("Safari"))&&-1===navigator.userAgent.indexOf("Firefox")&&"https:"===location.protocol,a=location.protocol;i&&(a="http:"===location.protocol?"https:":"http:");var n=e.clone();n.attr("id","ssw-test-login"),n.find("input").removeAttr("id").removeAttr("class");var r="";r=o||(""===window.ssw.login_redirect_url?location.pathname.indexOf("/account/")?location.href:location.protocol+"//"+location.hostname:window.ssw.login_redirect_url),i||(r=r.replace("https:","http:")),r=gwGetUrlWithActiveLocale(r);var c="?checkout_url="+encodeURIComponent(r);if(""!==Shopify.recaptchaV3.siteKey)window.grecaptcha&&"function"==typeof window.grecaptcha.execute?t.addRecaptchaTokenAndSubmitForm(n,r,c,s,a):Ssw.gwAssetsLoader.require({url:storeFrontRecaptchaV3ScriptUrl,type:"SCRIPT"}).then((function(){t.addRecaptchaTokenAndSubmitForm(n,r,c,s,a)}));else if(n[0])t.prepareFormNode(n,r,c,s,a).submit()}},this.customerIdPage=function(e,s,o,t,i){var a=this;a.check_customer_count++,ssw.ajax({url:sswProxyUrl+"/lite2/auth/customeridpage",type:"POST",data:e,success:function(n){ssw.cookie("ssw-userchecked",0,{expires:-1});var r=ssw("<div>");if(r.html(n),parseInt(r.find("#ssw-customer-id").html()))a.redirectAfterAuth(s,o,t);else if(i&&a.check_customer_count<5)setTimeout((function(){a.customerIdPage(e,s,o,t,i)}),1e3);else if(!i){if(sswSocialLogin?trackShopStats("invalid_social_login","all"):trackShopStats("invalid_email_login","all"),hideLoginPopupLoader(),loginLoaderCancel(),ssw("#login_modal").sswModal("show"),sl)addMessage(ssw_message_selector,sswLangs.t("not_able_to_log_in_you_socially"),"warning");else{addMessage(ssw_message_selector,sswLangs.t("invalid_login_credentials"),"warning");var c=ssw("#ssw-customer-email").val();ssw.post(sswProxyUrl+"/lite2/auth/checkUserState",{email:c},(function(e){e&&(e.success?addMessage(ssw_message_selector,sswLangs.t("already_registered_and_sent_invite_message",{email:c}),"warning"):addMessage(ssw_message_selector,sswLangs.t("incorrect_credentials",[c]),"warning"))}),"json")}sl=0,ssw("#hesy-login-submit").removeAttr("disabled").attr("enabled","enabled")}},dataType:"html"})},this.multiPassLogin=function(){ssw.get(sswProxyUrl+"/lite2/auth/getMultipassToken",{_sid:ssw.cookie("hesid")},(function(e){e?ssw.get("/account/login/multipass/"+e,{},(function(e){if(ssw("<div>").html(e).find("#ssw_cid").val()){var s=sswGetParameterByName("checkout_url");s||(s=""===window.ssw.login_redirect_url?location.pathname.indexOf("/account/")?location.href:location.protocol+"//"+location.hostname:window.ssw.login_redirect_url),gwHasShopifyLocaleInCurrentUrl()&&(s=s.indexOf(location.host)>-1?s.replace(location.host,location.host+"/"+Shopify.locale):"/"+Shopify.locale+s),location.href=s}else trackShopStats("invalid_social_login","all"),addMessage(ssw_message_selector,sswLangs.t("not_able_to_log_in_you_socially"),"warning"),hideLoginPopupLoader(),loginLoaderCancel(),ssw("#login_modal").sswModal("show")})).fail((function(){trackShopStats("invalid_social_login","all"),addMessage(ssw_message_selector,sswLangs.t("not_able_to_log_in_you_socially"),"warning"),hideLoginPopupLoader(),loginLoaderCancel(),ssw("#login_modal").sswModal("show")})):(trackShopStats("invalid_social_login","all"),addMessage(ssw_message_selector,sswLangs.t("not_able_to_log_in_you_socially"),"warning"),hideLoginPopupLoader(),loginLoaderCancel(),ssw("#login_modal").sswModal("show"))}))},this._login=function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=this,t=s,i=ssw("#he_customer_login"),a=i.serializeArray(),n={_sid:ssw.cookie("hesid"),hash_key:ssw.cookie("hash_key"),verify_token:ssw.cookie("ssw_verify_token"),service_id:service_id};for(var r in a)a.hasOwnProperty(r);void 0!==sswCookie("cart")&&(n.cart_token=sswCookie("cart"));var c=sswGetParameterByName("checkout_url");if(""!=c){var l=c.split("/");n.form_type="customer_login",n.utf8="%E2%9C%93",n.checkout_url=encodeURIComponent(c),n.cart=l[l.length-1],n.customer={email:ssw("#ssw-customer-email").val(),password:ssw("#ssw-customer-password").val()}}var d="/account/login",w=ssw("#ssw-customer-password").val(),u=ssw("#ssw-customer-email").val(),p=new URLSearchParams(d);a.forEach((function(e){p.append(e.name,e.value)})),t&&p.append("recaptcha-v3-token",t),Object.keys(n).forEach((function(e){return p.append(e,n[e])})),e&&e.customer_id&&e.token&&e.customer&&e.customer.password&&e.customer.password_confirmation&&(d="/account/activate/"+e.customer_id+"/"+e.token,p=e,""!=c&&(p.checkout_url=encodeURIComponent(c)));var h=!!navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i);if(h&&""!=c&&-1!=c.indexOf("checkout.shopify.com")){var m=i.clone();m.attr("id","ssw-login-clone-form"),m.css("display","none"),m.append('<input type="hidden" name="checkout_url" value="'+c+'"/>'),t&&m.append('<input type="hidden" name="recaptcha-v3-token" value="'.concat(t,'"/>')),ssw(document.body).append(m),m.submit()}else fetch(d,{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},body:p}).then((function(e){return Promise.all([e.text(),e.url])})).then((function(s){var t=_slicedToArray(s,2),r=t[0],l=t[1],d=ssw("<div>").html(r).find("#ssw_cid").val();if(0===d||"0"===d)if(l.includes("/challenge")&&ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/encrypt",data:{password:w},success:function(e){if(void 0!==e.new_password&&e.new_password&&"undefined"!=typeof localStorage)return localStorage.setItem("challenge_password",e.new_password),void(location.href="/challenge")},dataType:"json"}).fail((function(e){location.href="/challenge"})),sl||sswSocialLogin||e&&e.service){if(e&&e.verified&&_typeof(window.ssw.usercheckResponse.multipass_enabled)&&window.ssw.usercheckResponse.multipass_enabled)return void o.multiPassLogin();o.redirectAfterAuth(i,a,c),hideLoginPopupLoader()}else trackShopStats("invalid_email_login","all"),addMessage(ssw_message_selector,sswLangs.t("invalid_login_credentials"),"warning"),ssw.post(sswProxyUrl+"/lite2/auth/checkUserState",{email:u},(function(e){e.success?addMessage(ssw_message_selector,sswLangs.t("already_registered_and_sent_invite_message",{email:u}),"warning"):addMessage(ssw_message_selector,sswLangs.t("incorrect_credentials",[u]),"warning")}),"json"),o.redirectAfterAuth(i,a,c),hideLoginPopupLoader(),loginLoaderCancel();else{var p=new Date;n.customer_timezone_offset=-1*p.getTimezoneOffset()*60,n.customer={email:u,password:w},ssw.post(sswProxyUrl+"/lite2/auth/login",n,(function(e){e.error&&(sswSocialLogin?trackShopStats("invalid_social_login","all"):trackShopStats("invalid_email_login","all")),o.redirectAfterAuth(i,a,c)}))}})),-1!=navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")&&setTimeout((function(){o.customerIdPage(n,i,a,c,!0)}),1e3)},this.oldRecaptchaCallback=null,this.login=function(e){var s=this;hideLoginPopupLoader(),loginLoader(),""!==Shopify.recaptchaV3.siteKey?window.grecaptcha&&"function"==typeof window.grecaptcha.execute?window.grecaptcha.execute(window.Shopify.recaptchaV3.siteKey,{action:"customer_login"}).then((function(o){s._login(e,o)})):(Ssw.gwAssetsLoader.require({url:storeFrontRecaptchaV3ScriptUrl,type:"SCRIPT"}).then((function(){window.storefrontContactFormsRecaptchaCallback&&(s.oldRecaptchaCallback=window.storefrontContactFormsRecaptchaCallback,window.storefrontContactFormsRecaptchaCallback=function(){s.oldRecaptchaCallback(),document.dispatchEvent(new Event("gwRecaptchaLoaded"))})})),s._initGrecaptchaEventListener(e)):s._login(e)},this._initGrecaptchaEventListener=function(e){var s=this;document.addEventListener("gwRecaptchaLoaded",(function o(){try{if(!window.grecaptcha||"function"!=typeof window.grecaptcha.execute)throw new Error("Failed to load grecaptcha!");window.grecaptcha.execute(window.Shopify.recaptchaV3.siteKey,{action:"customer_login"}).then((function(o){s._login(e,o)}))}catch(e){console.error(e)}finally{document.removeEventListener("gwRecaptchaLoaded",o),s.oldRecaptchaCallback&&(window.storefrontContactFormsRecaptchaCallback=s.oldRecaptchaCallback,s.oldRecaptchaCallback=null)}}))},this._signUp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=new URLSearchParams(s),i=ssw("#he_create_customer"),a=i.find('input[type="password"]').val(),n=ssw("#he_customer_login"),r=i.serializeArray(),c={_sid:ssw.cookie("hesid"),hash_key:ssw.cookie("hash_key"),service_id:service_id},l=sswGetParameterByName("checkout_url");if(""!=l){var d=l.split("/");c.form_type="customer_login",c.utf8="%E2%9C%93",c.checkout_url=encodeURIComponent(l),c.cart=d[d.length-1]}r.forEach((function(e){t.append(e.name,e.value)})),Object.keys(c).forEach((function(e){return t.append(e,c[e])})),e&&t.append("recaptcha-v3-token",e),showLoginPopupLoader(),ssw("#hesy-sign-up-submit").removeAttr("enabled").attr("disabled","disabled"),ssw("#signup_modal .ssw-alert").remove(),fetch(s,{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},body:t}).then((function(e){return Promise.all([e.text(),e.url])})).then((function(e){var s=_slicedToArray(e,2),i=s[0],c=s[1],d=ssw("<div>").html(i),w=d.find(".errors li");0===w.length&&(w=d.find(".errors-list li")),0===w.length&&(w=d.find("#create_customer .note.form-error li")),w.length?(hideLoginPopupLoader(),ssw("#hesy-sign-up-submit").removeAttr("disabled").attr("enabled","enabled"),w.each((function(){addMessage("#signup_modal .login-failed",ssw(this).text(),"warning"),addMessage('form[action$="/account"]:not(#he_create_customer)',ssw(this).text(),"warning")}))):c.includes("/challenge")?ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/encrypt",data:{password:a},success:function(e){void 0!==e.new_password&&e.new_password&&"undefined"!=typeof localStorage&&(localStorage.setItem("challenge_password",e.new_password),location.href="/challenge")},dataType:"json"}).fail((function(e){location.href="/challenge"})):ssw.post(sswProxyUrl+"/lite2/auth/register",t.toString(),(function(e){ssw(document).trigger("sswOnCustomerSignedUp",e),""!=l?o.redirectAfterAuth(n,r,l):0===e.error?(ssw.cookie("ssw-userchecked",0,{expires:-1}),o.redirectAfterAuth(n,r)):ssw(".login-failed").empty()}),"json")})).catch((function(e){if(parseInt(e.status)>400){hideLoginPopupLoader();var s=ssw("<div>").html(e.responseText).find("div.content > div.content--block:nth-child(2) > div.content--desc").html();s=s||e.statusText,"Too many attempts: Please try again in 10 minutes"==ssw.trim(s)&&void 0!==sswLangs.data.too_many_attempts&&(s=sswLangs.data.too_many_attempts),addMessage("#signup_modal .login-failed",s,"warning"),addMessage('form[action$="/account"]:not(#he_create_customer)',s,"warning")}else ssw.ajax({url:sswProxyUrl+"/lite2/auth/customeridpage",success:function(e){ssw.cookie("ssw-userchecked",0,{expires:-1});var s=parseInt(ssw(e).text());s>0?(t.append("$customer_id",s),ssw.post(sswProxyUrl+"/lite2/auth/register",t.toString(),(function(e){""!=l?o.redirectAfterAuth(n,r,l):0===e.error?(ssw.cookie("ssw-userchecked",0,{expires:-1}),o.redirectAfterAuth(n,r)):ssw(".login-failed").empty()}),"json")):(hideLoginPopupLoader(),addMessage(sswLangs.t("email_is_already_associated")))},dataType:"html"})}))},this.signUp=function(){var e=this;hideLoginPopupLoader(),""!==Shopify.recaptchaV3.siteKey?window.grecaptcha&&"function"==typeof window.grecaptcha.execute?window.grecaptcha.execute(window.Shopify.recaptchaV3.siteKey,{action:"customer_login"}).then((function(s){e._signUp(s)})):Ssw.gwAssetsLoader.require({url:storeFrontRecaptchaV3ScriptUrl,type:"SCRIPT"}).then((function(){window.grecaptcha.execute(window.Shopify.recaptchaV3.siteKey,{action:"customer_login"}).then((function(s){e._signUp(s)}))})):e._signUp()}};void 0!==sswApp.default&&sswApp.default&&sswRun((function(){ssw(document).ready((function(){ssw(document).on("submit",'form[action$="/account"],form[action$="/account/login"]',(function(){var e=this.querySelector('input[name="customer[email]"]'),s=this.querySelector('input[name="customer[password]"]');e&&s&&(e.setAttribute("type","email"),e.setAttribute("required","required"),s.setAttribute("required","required"),function(e){var s=e.querySelector('input[name="customer[email]"]'),o=e.querySelector('input[name="customer[password]"]'),t=s.value,i=o.value,a=btoa(t);if(a&&(ssw.cookie("ssw_verify_token",sswMd5(i+a),{expires:30,path:"/",secure:"https:"===location.protocol,samesite:"https:"===location.protocol?"None":void 0}),"he_customer_login"!==e.id&&"he_create_customer"!==e.id)){var n=btoa(btoa(btoa(i).split("").reverse().join("")).split("").reverse().join("")).split("").reverse().join("");localStorage.setItem(a,n)}}(this))}));var e=document.querySelector('form[action="/account/recover"]');if(e){var s=e.querySelector('input[name="email"]');s&&s.setAttribute("type","email"),e.addEventListener("submit",(function(s){e._passWasUnset||(s.preventDefault(),s.stopPropagation());var o=e.querySelector('input[name="email"]').value;o&&ssw.ajax({url:sswProxyUrl+"/lite2/auth/unsetpass",type:"POST",data:{email:o},dataType:"json",success:function(){e._passWasUnset=!0},error:function(){e._passWasUnset=!0}})}))}var o=document.querySelector('form[action$="/account/reset"]');if(o){var t=location.pathname.split("/account/reset/"),i=t.length>1&&t[1].split("/")[0];i&&o.addEventListener("submit",(function(e){var s=o.querySelector('input[name="customer[password]"]'),t=o.querySelector('input[name="customer[password_confirmation]"]'),a=!(!s.value||!t.value||s.value!==t.value)&&t.value;if(a){var n="function"==typeof window.btoa;ssw.ajax({url:sswProxyUrl+"/lite2/auth/resetpass",type:"POST",async:!1,data:{customer_id:i,new_token:n?window.btoa(a):a,encoded:n},dataType:"json"})}}))}}))})),window.addEventListener("sswoauthcallback",(function(e){if(e.detail)if("amazon"===e.detail.service)ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/azshopcallback",data:{_sid:ssw.cookie("hesid"),hash_key:ssw.cookie("hash_key"),verify_token:ssw.cookie("ssw_verify_token")},success:function(e){if(void 0!==e.service_id&&(service_id=e.service_id),sswSocialLogin=1,ssw.isEmptyObject(e))hideLoginPopupLoader();else if(e.termsSignup||sswApp.metafield_settings.accept_marketing_show_modal&&void 0!==e.new&&1===e.new)showAcceptTermsForm(e);else if("enabled"!=e.state){if(e.password&&e.email)(s=new ShopifyLogin).preLogin(e.email,e.password),e.account_activation_token?s.login({customer_id:e.customer_id,token:e.account_activation_token,verified:e.verified,customer:{password:e.password,password_confirmation:e.password}}):s.login({verified:e.verified});else targetSEMModal(e,"Amazon")}else{var s;if(!e.password&&e.email)targetSEMModal(e,"Amazon");else if(e.password)(s=new ShopifyLogin).preLogin(e.email,e.password),s.login({verified:e.verified});else if(_typeof(window.ssw.usercheckResponse.multipass_enabled)&&window.ssw.usercheckResponse.multipass_enabled)(s=new ShopifyLogin).multiPassLogin();else addMessage(ssw_message_selector,"sswLangs.t('already_registered_to_social_service2', {email: response.email})","warning"),ssw("#login_modal").sswModal()}},dataType:"json"});else if("yahoo"===e.detail.service)ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/yshopcallback",data:{_sid:ssw.cookie("hesid"),hash_key:ssw.cookie("hash_key"),verify_token:ssw.cookie("ssw_verify_token")},success:function(e){if(sswSocialLogin=1,void 0!==e.service_id&&(service_id=e.service_id),ssw.isEmptyObject(e))hideLoginPopupLoader();else if(e.termsSignup||sswApp.metafield_settings.accept_marketing_show_modal&&void 0!==e.new&&1===e.new)showAcceptTermsForm(e);else if("enabled"!=e.state){if(e.password&&e.email)(s=new ShopifyLogin).preLogin(e.email,e.password),e.account_activation_token?s.login({customer_id:e.customer_id,token:e.account_activation_token,customer:{password:e.password,password_confirmation:e.password}}):s.login({verified:e.verified});else targetSEMModal(e,"Yahoo")}else{var s;if(!e.password&&e.email)targetSEMModal(e,"Yahoo");else if(e.password)(s=new ShopifyLogin).preLogin(e.email,e.password),s.login({verified:e.verified});else if(_typeof(window.ssw.usercheckResponse.multipass_enabled)&&window.ssw.usercheckResponse.multipass_enabled)(s=new ShopifyLogin).multiPassLogin();else addMessage(ssw_message_selector,sswLangs.t("already_registered_to_social_service2",{email:e.email}),"warning"),ssw("#login_modal").sswModal()}},dataType:"json"});else if("line"===e.detail.service){var s=e.detail.service;ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/lshopcallback",data:{_sid:ssw.cookie("hesid"),hash_key:ssw.cookie("hash_key"),verify_token:ssw.cookie("ssw_verify_token"),service:s},success:function(e){var o;sswSocialLogin=1,void 0!==e.service_id&&(service_id=e.service_id),ssw.isEmptyObject(e)?hideLoginPopupLoader():e.termsSignup||sswApp.metafield_settings.accept_marketing_show_modal&&void 0!==e.new&&1===e.new?showAcceptTermsForm(e):e.password?e.isOldCustomer?targetSEMModal(e,s):((o=new ShopifyLogin).preLogin(e.email,e.password),o.login({verified:e.verified})):void 0!==e.user_id&&e.user_id&&_typeof(window.ssw.usercheckResponse.multipass_enabled)&&window.ssw.usercheckResponse.multipass_enabled?(o=new ShopifyLogin).multiPassLogin():(hideLoginPopupLoader(),ssw("#service_id").val(e.service_id),ssw(".ssw-modal").sswModal("hide"),e.email?targetSEMModal(e,s):ssw("#set-email-modal").sswModal())},dataType:"json"})}})),sswLibraryLoaded((function(){window.sswHelperLoaded?validateLogin():window.addEventListener("sswhelperload",validateLogin),ssw(document).on("click",".ssw-azconnect",(function(){showLoginPopupLoader();var e=HE_DOMAIN+"/lite2/auth/azconnect?_sid="+ssw.cookie("hesid")+"&shop="+encodeURIComponent("https://"+Shopify.shop);sswIsWebView()?(e+="&oauth_redirect_uri="+encodeURIComponent(location.href),location.href=e):ssw.oauthpopup({path:e,windowOptions:sswGetPopupBounds(710,550),callback:function(){sswDispatchEvent("sswoauthcallback",{detail:{service:"amazon"},bubbles:!0,cancellable:!1})}})})),ssw(document).on("click",".ssw-yconnect",(function(){showLoginPopupLoader();var e=HE_DOMAIN+"/lite2/auth/yconnect?_sid="+ssw.cookie("hesid")+"&shop="+encodeURIComponent(Shopify.shop);sswIsWebView()?(e+="&oauth_redirect_uri="+encodeURIComponent(location.href),location.href=e):ssw.oauthpopup({path:e,callback:function(){sswDispatchEvent("sswoauthcallback",{detail:{service:"yahoo"},bubbles:!0,cancellable:!1})}})})),ssw(document).on("click",".ssw-line-connect ",(function(){showLoginPopupLoader();var e=HE_DOMAIN+"/lite2/auth/lconnect?_sid="+ssw.cookie("hesid")+"&shop="+encodeURIComponent(Shopify.shop);sswIsWebView()?(e+="&oauth_redirect_uri="+encodeURIComponent(location.href),location.href=e):ssw.oauthpopup({path:e,callback:function(){sswDispatchEvent("sswoauthcallback",{detail:{service:"line"},bubbles:!0,cancellable:!1})}})})),ssw(document).on("click",".ssw-twconnect",(function(){shopCallback4TTI("twconnect","twitter")})),ssw(document).on("click",".ssw-inconnect",(function(){shopCallback4TTI("inconnect","instagram")})),ssw(document).on("click",".ssw-tmconnect",(function(){shopCallback4TTI("tmconnect","tumblr")})),ssw(document).on("keyup change","#he_create_customer input",(function(){""!=ssw("#he_create_customer #ssw-email").val()&&""!=ssw("#he_create_customer #ssw-password").val()&&(ssw("#he_create_customer .ssw-first-name:hidden").length?ssw("#he_create_customer .ssw-first-name").slideDown():""!=ssw("#he_create_customer #ssw-first_name").val()&&ssw("#he_create_customer .ssw-last-name:hidden").length&&ssw("#he_create_customer .ssw-last-name").slideDown())})),ssw(document).on("shown.ssw.modal","#login_modal",(function(){ssw(document.body).hasClass("ssw-touch")||ssw("#ssw-customer-email").focus()})),ssw(document).on("show.ssw.modal","#login_modal",(function(){ssw(".ssw-modal:not(#login_modal)").sswModal("hide")})),ssw(document).on("shown.ssw.modal","#signup_modal",(function(){ssw(document.body).hasClass("ssw-touch")||ssw("#he_create_customer input").each((function(e,s){if(""===ssw(s).val())return ssw(s).focus(),!1}))}))})),sswUserChecked((function(){function e(){var e=ssw.usercheckResponse;e.termsSignup&&(ssw("#ssw-signup-accept-terms").show().find('input[type="checkbox"]').attr("required","required"),ssw(".ssw-accept-terms").show(),e.termsLink&&(ssw("#ssw-signup-accept-terms-marketing .terms-link").attr("href",e.termsLink).show(),ssw("#ssw-signup-accept-terms-marketing .terms-span").hide(),ssw(".ssw-accept-wrapper .terms-link").attr("href",e.termsLink).show(),ssw(".ssw-accept-wrapper .terms-span").hide()))}window.sswHelperLoaded?e():window.addEventListener("sswhelperload",e)}))}function gwLoginCritical(e){if("undefined"!=typeof sswJqLoaded&&sswJqLoaded){if(window.addEventListener("sswoauthcallback",(function(e){e.detail&&"facebook"===e.detail.service&&ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/fshopcallback",data:{_sid:ssw.cookie("hesid"),hash_key:ssw.cookie("hash_key"),verify_token:ssw.cookie("ssw_verify_token")},success:function(e){if(void 0!==e.service_id&&(service_id=e.service_id),sswSocialLogin=1,ssw.isEmptyObject(e))hideLoginPopupLoader();else if(e.termsSignup||sswApp.metafield_settings.accept_marketing_show_modal&&void 0!==e.new&&1===e.new)showAcceptTermsForm(e);else if("enabled"!=e.state){if(e.password&&e.email)(s=new ShopifyLogin).preLogin(e.email,e.password),e.account_activation_token?s.login({customer_id:e.customer_id,token:e.account_activation_token,customer:{password:e.password,password_confirmation:e.password}}):s.login();else targetSEMModal(e,"Facebook")}else{var s;if(!e.password&&e.email)targetSEMModal(e,"Facebook");else if(e.email)if(e.password)(s=new ShopifyLogin).preLogin(e.email,e.password),s.login();else addMessage("#login_modal .login-failed","sswLangs.t('already_registered_to_social_service2', {email: response.email})","warning"),ssw("#login_modal").sswModal();else hideLoginPopupLoader(),ssw("#service_id").val(e.service_id),ssw(".ssw-modal").sswModal("hide"),ssw("#set-email-modal").sswModal()}},dataType:"json"})})),1===e.ourFacebookApp)ssw(document).on("click",".ssw-fbconnect",(function(){showLoginPopupLoader();var e=HE_DOMAIN+"/lite2/auth/fconnect?_sid="+ssw.cookie("hesid")+"&shop="+encodeURIComponent(Shopify.shop);sswIsWebView()?(e+="&oauth_redirect_uri="+encodeURIComponent(location.href),location.href=e):ssw.oauthpopup({path:e,windowOptions:window.screen.width>650?"width=650,height=500":null,callback:function(){sswDispatchEvent("sswoauthcallback",{detail:{service:"facebook"},bubbles:!0,cancellable:!1})}})}));else{var s=setInterval((function(){window.FB&&FB.getLoginStatus&&(clearInterval(s),console.info("FB JS SDK is loaded"),setTimeout((function(){FB.getLoginStatus((function(e){window.sswFbLoginStatusResponse=e}),1)}),300))}),100);ssw(document).on("click",".ssw-fbconnect",(function(){showLoginPopupLoader(),clearInterval(window.ssw_fb_login_status_interv),window.ssw_fb_login_status_interv=setInterval((function(){if(window.sswFbLoginStatusResponse){clearInterval(window.ssw_fb_login_status_interv);var e=window.sswFbLoginStatusResponse;"connected"===e.status?serviceUserChecker(e,"facebook"):(e.status,FB.login((function(e){e.authResponse?serviceUserChecker(e,"facebook"):hideLoginPopupLoader()}),{scope:"email"},1))}}),100)}))}window.addEventListener("sswoauthcallback",(function(e){e.detail&&"gplus"===e.detail.service&&ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/gcallback",data:{_sid:ssw.cookie("hesid"),hash_key:ssw.cookie("hash_key"),verify_token:ssw.cookie("ssw_verify_token")},success:function(e){if(sswSocialLogin=1,void 0!==e.service_id&&(service_id=e.service_id),ssw.isEmptyObject(e))hideLoginPopupLoader();else if(e.termsSignup||sswApp.metafield_settings.accept_marketing_show_modal&&void 0!==e.new&&1===e.new)showAcceptTermsForm(e);else if("enabled"!=e.state){if(e.password&&e.email)(s=new ShopifyLogin).preLogin(e.email,e.password),e.account_activation_token?s.login({customer_id:e.customer_id,token:e.account_activation_token,verified:e.verified,service:"gplus",customer:{password:e.password,password_confirmation:e.password}}):s.login({verified:e.verified,service:"gplus"});else targetSEMModal(e,"Google")}else{var s;if(!e.password&&e.email)targetSEMModal(e,"Google");else if(e.password)(s=new ShopifyLogin).preLogin(e.email,e.password),s.login({verified:e.verified,service:"gplus"});else addMessage("#login_modal .login-failed","sswLangs.t('already_registered_to_social_service2', {email: response.email})","warning"),ssw("#login_modal").sswModal()}},dataType:"json"})}));var o={},t=!1;1===e.ourGoogleApp?ssw(document).on("click",".ssw-gconnect",(function(){if(showLoginPopupLoader(),!t){t=!0;var e=HE_DOMAIN+"/lite2/auth/gconnect?_sid="+ssw.cookie("hesid")+"&shop="+encodeURIComponent(Shopify.shop);sswIsWebView()?(e+="&oauth_redirect_uri="+encodeURIComponent(location.href),location.href=e):ssw.oauthpopup({path:HE_DOMAIN+"/lite2/auth/gconnect?_sid="+ssw.cookie("hesid")+"&shop="+Shopify.shop,windowOptions:window.screen.width>470?"width=400,height=550":null,callback:function(){t=!1,sswDispatchEvent("sswoauthcallback",{detail:{service:"gplus"},bubbles:!0,cancellable:!1})}})}})):(window.gwGapiLoad=function(){gapi.load("auth2",(function(){var e=setInterval((function(){if(document.querySelector(".ssw-gconnect")){clearInterval(e);for(var s=gapi.auth2.init({cookiepolicy:"single_host_origin"}),t=document.querySelectorAll(".ssw-gconnect"),i=t.length,a=function(e){if(hideLoginPopupLoader(),e&&e.isSignedIn()){o={access_token:e.getAuthResponse().access_token},profile=e.getBasicProfile();var s={first_name:profile.getGivenName(),last_name:profile.getFamilyName(),about:profile.aboutMe,image:profile.getImageUrl(),url:"",email:profile.getEmail(),user_id:profile.getId(),service:"gplus"};o=ssw.extend(o,s),ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/service",data:{user_id:o.user_id,email:o.email,service:"gplus",access_token:o.access_token,_sid:ssw.cookie("hesid"),hash_key:ssw.cookie("hash_key")},success:function(e){var s=new ShopifyLogin;void 0!==e.service_id&&(service_id=e.service_id),e.status?"enabled"===e.state&&e.password?(s.preLogin(e.email,e.password),s.login({verified:e.verified,service:"gplus"})):"enabled"!=e.state&&e.password&&e.email?(s.preLogin(e.email,e.password),e.account_activation_token?s.login({customer_id:e.customer_id,token:e.account_activation_token,verified:e.verified,service:"gplus",customer:{password:e.password,password_confirmation:e.password}}):s.login({verified:e.verified,service:"gplus"})):targetSEMModal(e,"Google"):e.termsSignup||sswApp.metafield_settings.accept_marketing_show_modal&&void 0!==e.new&&1===e.new?showAcceptTermsForm(e,"gplus",{gplusData:o,json:e}):s.setServiceUser({gplusData:o,json:e},"gplus")},dataType:"json"})}else hideLoginPopupLoader()},n=function(e){hideLoginPopupLoader()},r=0;r<i;r++){var c=t[r];s.attachClickHandler(c,{},a,n)}}}),500)}))},window.gapi&&window.gwGapiLoad())}sswLibraryLoaded((function(){var e=sswIsOauthRedirectFrom();e&&(location.hash="",sswDispatchEvent("sswoauthcallback",{detail:{service:e},bubbles:!0,cancellable:!1}))}));ssw(document.body).on("show.ssw.modal","#login_modal,#signup_modal",(function e(s){showLoginPopupLoader();var o=Ssw.gwAssetsManifestLoader;Promise.all([o.requireByKey("login.main.css","STYLE"),o.requireByKey("login.main.js","SCRIPT"),o.requireByKey("core.library.js","SCRIPT")]).then((function(){hideLoginPopupLoader()})),ssw(document.body).off("show.ssw.modal","#login_modal,#signup_modal",e)}))}"undefined"==typeof Ssw&&(Ssw={}),Ssw.Login={options:{autoIntegrateLinks:!0,autoIntegrateIcons:!0},init:function(e){"object"===_typeof(e)&&(this.options=e),this.changeAuthFormsActions(),this.showForm(),this.bindEvents(),"function"==typeof Ssw.gwAssetsLoader.require&&ssw(".ssw-socialconnect.social_networks_icon_for_dropdown").click((function(){Ssw.gwAssetsLoader.require({url:storeFrontRecaptchaV3ScriptUrl,type:"SCRIPT"}),ssw(".ssw-socialconnect.social_networks_icon_for_dropdown").unbind("click")}))},bindEvents:function(){var e=this;ssw(window).ready((function(){e.options.autoIntegrateLinks&&e.autoIntegrateLinks(),e.options.autoIntegrateIcons&&e.autoIntegrateIcons(),ssw(document.body).on("click",".customer_login_link",(function(){return ssw("#login_modal").sswModal(),trackShopStats("login_popup_view","all"),!1}))})),void 0===sswApp.customer&&e.dropdownLoginForm()},showForm:function(){if("undefined"!=typeof sswAutoShowLogin&&sswAutoShowLogin&&"/pages/share-review"!=location.pathname&&!ssw(".fancybox-overlay:visible").length){var e=+new Date,s=parseInt(ssw.cookie("sswautoshow_login"));if(isNaN(s)||e-s>864e5){var o="undefined"!=typeof sswAutoShowDelay?1e3*sswAutoShowDelay:5e3;setTimeout((function(){ssw("#signup_modal:visible").length||ssw("#login_modal:visible").length||("function"==typeof sswCustomShowLoginFunction?sswCustomShowLoginFunction():ssw("#signup_modal").sswModal("show")),ssw.cookie("sswautoshow_login",+new Date,{path:"/",secure:"https:"===location.protocol,samesite:"Lax"})}),o)}}},autoIntegrateLinks:function(){var e=ssw('a[href="/account/login"]');e&&e.length>0&&e.attr({"data-target":"#login_modal","data-toggle":"ssw-modal",href:"javascript://"});var s=ssw('a[href="/account/register"]');s&&s.length>0&&s.attr({"data-target":"#signup_modal","data-toggle":"ssw-modal",href:"javascript://"});var o=setInterval((function(){var e=ssw('a[href="/account"]:visible'),s=ssw("#ssw-topauth");e&&e.length>0&&e.parent()&&"customer_myorders_li"!=e.parent().attr("id")&&s&&s.length>0&&0!=s.children().length&&(clearInterval(o),e.hide().after(s.clone()))}),100)},validateSignUpForm:function(e){var s=e.find(".ssw-accept-terms__input")[0].checked,o=e.find(".ssw-accept-wrapper"),t=ssw.usercheckResponse.termsSignup;if(!s&&t)return o.addClass("ssw-error-accept-terms"),!1},autoIntegrateIcons:function(){sswAddEventListener("sswhelperload",(function(){if((0===location.pathname.toLowerCase().indexOf(loginPath)||0===location.pathname.toLowerCase().indexOf(registerPath))&&!ssw("*:not(#ssw-login-social-icons-widget-wrapper) > .ssw-social-login-widget").length){var e,s,o=ssw('form[action$="/account/login"]:not(#he_customer_login, #customer_login_guest, .ssw-auth-dropdown form)'),t=ssw('form[action$="/account"]:not(#he_create_customer)'),i=ssw("#ssw-login-social-icons-widget-wrapper").find(".ssw-social-login-widget"),a=ssw("#ssw-login-social-icons-widget-wrapper").find(".ssw-accept-wrapper"),n=ssw('form[action$="/account"]:not(#he_create_customer) input[name="customer[accepts_marketing]"]');if(a.show(),"function"==typeof sswCustomAutoIntegrateIcons)sswCustomAutoIntegrateIcons(i);else if(o.length?e=o:t.length&&n.length?(e=t.find('input[name="customer[first_name]"]'),s=t.children().last(),ssw("#ssw-login-social-icons-widget-wrapper").find(".ssw-accept-marketing").remove()):t.length&&(e=t,s=t.children().last()),e&&e.length){var r,c=e.attr("id");if(c&&(r=ssw('label[for="'+c+'"]')).length&&(e=r),!r||!r.length){var l=e.parents().has("customer[first_name]"==e.attr("name")?t.find('input[name="customer[password]"]'):o.find('input[name="customer[password]"]')).first().children().has(e).first();l.length&&(e=l)}i.insertBefore(e),a.insertBefore(s),t.length&&t.submit((function(){return Ssw.Login.validateSignUpForm(t)}))}}}))},changeAuthFormsActions:function(){var e=ssw("#he_customer_login"),s=ssw("#he_create_customer"),o=e.attr("action"),t=s.attr("action");o&&-1===o.indexOf(location.hostname)&&(gwHasShopifyLocaleInCurrentUrl()&&(o=0===o.indexOf("/")?"/"+Shopify.locale.toLowerCase()+o:Shopify.locale.toLowerCase()+"/"+o),e.attr("action",["https://",location.hostname,o].join(""))),t&&-1===t.indexOf(location.hostname)&&(gwHasShopifyLocaleInCurrentUrl()&&(t=0===t.indexOf("/")?"/"+Shopify.locale.toLowerCase()+t:"/"+Shopify.locale.toLowerCase()+"/"+t),s.attr("action",["https://",location.hostname,t].join("")))},resetAcceptTermsForm:function(){ssw("#ssw-accept-terms-checkbox").checked(!0),ssw("#ssw-accept-marketing-checkbox").checked(!0),ssw("#terms-email-input").val(""),ssw(".terms-email-group").show(),ssw(".accept_terms-group").show(),ssw(".accepts_marketing-group").show(),ssw("#ssw-cancel-account-button").hide(),ssw("#ssw-create-account-button").show()},setDropdownPosition:function(){ssw(".ssw-auth-dropdown").is(":visible")&&ssw(".ssw-auth-dropdown .ssw-dropdown-toggle").length&&(ssw(".ssw-auth-dropdown .ssw-dropdown-toggle").offset().left>ssw(window).width()/2?ssw(".ssw-auth-dropdown .ssw-dropdown-menu").hasClass("ssw-pull-right")||ssw(".ssw-auth-dropdown .ssw-dropdown-menu").addClass("ssw-pull-right"):ssw(".ssw-auth-dropdown .ssw-dropdown-menu").removeClass("ssw-pull-right"))},isElementInView:function(e,s){var o=ssw(window).scrollTop(),t=o+ssw(window).height(),i=e.offset().top,a=i+e.outerHeight();return!0===s?o<i&&t>a:i<=t&&a>=o},dropdownLoginForm:function(){var e=this;ssw(document.body).on("show.ssw.dropdown","span.ssw-dropdown",(function(e){ssw(window).width()<500&&(e.preventDefault(),ssw("#login_modal").sswModal("show"))})),ssw(document.body).on("show.ssw.modal","#login_modal",(function(s){ssw(window).width()<500||ssw(".ssw-auth-dropdown").is(":visible")&&!ssw("#ssw-community-box").is(":visible")&&(s.preventDefault(),setTimeout((function(){ssw(".ssw-auth-dropdown .ssw-auth-dropdown-message").html(ssw("#login_modal .login-failed").html()),ssw(".ssw-auth-dropdown .ssw-dropdown").hasClass("ssw-open")||(ssw(".ssw-auth-dropdown .ssw-dropdown").addClass("ssw-open"),Ssw.RewardPopup&&Ssw.RewardPopup.hidePopup&&Ssw.RewardPopup.hidePopup()),e.isElementInView(ssw(".ssw-auth-dropdown .ssw-dropdown-menu"),!0)||ssw(window).scrollTop(ssw(".ssw-auth-dropdown .ssw-dropdown-toggle").offset().top-20)}),100))})),e.setDropdownPosition(),ssw(window).resize((function(){e.setDropdownPosition()})),ssw(window).bind("orientationchange",(function(){e.setDropdownPosition()})),ssw(document.body).on("submit",'form[action="/account/login"]',(function(){ssw(this).closest(".ssw-auth-dropdown").length?localStorage.setItem("ssw_before_submit_login_url",location.href):localStorage.removeItem("ssw_before_submit_login_url")})),sswUserChecked((function(){!function(){if(null!=localStorage.getItem("ssw_before_submit_login_url")&&"/account"===location.pathname){var e=localStorage.getItem("ssw_before_submit_login_url");localStorage.removeItem("ssw_before_submit_login_url"),window.ssw.login_redirect_url?location.href=window.ssw.login_redirect_url:location.href=e}}()}))}},sswRun((function(e){Ssw.Login.init({autoIntegrateLinks:"undefined"!=typeof sswAutoIntegrate&&sswAutoIntegrate,autoIntegrateIcons:!0})}));